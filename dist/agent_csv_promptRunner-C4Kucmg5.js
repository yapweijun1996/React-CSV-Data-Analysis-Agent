import{u as l}from"./agent_csv_index-Dl9Qc5Vj.js";import{generateLangChainPlanEnvelope as o}from"./agent_csv_planBridge-DeGTPupn.js";const p=async(t={})=>{var r;const a=l.getState(),n=a.columnProfiles,s=((r=a.csvData)==null?void 0:r.data)??[];if(!s.length||!n.length)throw new Error("LangChain PoC requires a loaded dataset.");const e=await o({datasetId:t.datasetId??a.datasetHash,sampleSize:t.sampleSize,fallbackProfile:t.fallbackProfile,debug:t.debug,columns:n,rows:s,settings:a.settings,addProgress:a.addProgress});return a.setLangChainLastPlan(e.plan),a.addProgress(`LangChain PoC 生成計畫：「${e.plan.title??"Untitled plan"}」 (${e.telemetry.latencyMs.toFixed(0)} ms)`,"system"),a.appendPlannerObservation(e.observation),a.updatePlannerPlanState(e.planState),{plan:e.plan,profile:e.profile,envelope:e}};export{p as runLangChainPrompt};
