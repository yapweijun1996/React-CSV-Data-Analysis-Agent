(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(r){if(r.ep)return;r.ep=!0;const u=i(r);fetch(r.href,u)}})();function sf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var td={exports:{}},Wa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function tE(){if(Qg)return Wa;Qg=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,r,u){var c=null;if(u!==void 0&&(c=""+u),r.key!==void 0&&(c=""+r.key),"key"in r){u={};for(var p in r)p!=="key"&&(u[p]=r[p])}else u=r;return r=u.ref,{$$typeof:n,type:a,key:c,ref:r!==void 0?r:null,props:u}}return Wa.Fragment=e,Wa.jsx=i,Wa.jsxs=i,Wa}var Zg;function nE(){return Zg||(Zg=1,td.exports=tE()),td.exports}var C=nE(),nd={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function iE(){if(Wg)return pe;Wg=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,N={};function k(M,$,ee){this.props=M,this.context=$,this.refs=N,this.updater=ee||w}k.prototype.isReactComponent={},k.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function D(){}D.prototype=k.prototype;function U(M,$,ee){this.props=M,this.context=$,this.refs=N,this.updater=ee||w}var L=U.prototype=new D;L.constructor=U,x(L,k.prototype),L.isPureReactComponent=!0;var G=Array.isArray;function F(){}var I={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function z(M,$,ee){var se=ee.ref;return{$$typeof:n,type:M,key:$,ref:se!==void 0?se:null,props:ee}}function Z(M,$){return z(M.type,$,M.props)}function X(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function te(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ee){return $[ee]})}var Te=/\/+/g;function de(M,$){return typeof M=="object"&&M!==null&&M.key!=null?te(""+M.key):$.toString(36)}function Pe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(F,F):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,$,ee,se,me){var Se=typeof M;(Se==="undefined"||Se==="boolean")&&(M=null);var Re=!1;if(M===null)Re=!0;else switch(Se){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(M.$$typeof){case n:case e:Re=!0;break;case v:return Re=M._init,V(Re(M._payload),$,ee,se,me)}}if(Re)return me=me(M),Re=se===""?"."+de(M,0):se,G(me)?(ee="",Re!=null&&(ee=Re.replace(Te,"$&/")+"/"),V(me,$,ee,"",function(je){return je})):me!=null&&(X(me)&&(me=Z(me,ee+(me.key==null||M&&M.key===me.key?"":(""+me.key).replace(Te,"$&/")+"/")+Re)),$.push(me)),1;Re=0;var lt=se===""?".":se+":";if(G(M))for(var ae=0;ae<M.length;ae++)se=M[ae],Se=lt+de(se,ae),Re+=V(se,$,ee,Se,me);else if(ae=E(M),typeof ae=="function")for(M=ae.call(M),ae=0;!(se=M.next()).done;)se=se.value,Se=lt+de(se,ae++),Re+=V(se,$,ee,Se,me);else if(Se==="object"){if(typeof M.then=="function")return V(Pe(M),$,ee,se,me);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Re}function j(M,$,ee){if(M==null)return M;var se=[],me=0;return V(M,se,"","",function(Se){return $.call(ee,Se,me++)}),se}function ue(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(ee){(M._status===0||M._status===-1)&&(M._status=1,M._result=ee)},function(ee){(M._status===0||M._status===-1)&&(M._status=2,M._result=ee)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var Ce=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ne={map:j,forEach:function(M,$,ee){j(M,function(){$.apply(this,arguments)},ee)},count:function(M){var $=0;return j(M,function(){$++}),$},toArray:function(M){return j(M,function($){return $})||[]},only:function(M){if(!X(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return pe.Activity=_,pe.Children=Ne,pe.Component=k,pe.Fragment=i,pe.Profiler=r,pe.PureComponent=U,pe.StrictMode=a,pe.Suspense=g,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},pe.cache=function(M){return function(){return M.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(M,$,ee){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=x({},M.props),me=M.key;if($!=null)for(Se in $.key!==void 0&&(me=""+$.key),$)!Q.call($,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&$.ref===void 0||(se[Se]=$[Se]);var Se=arguments.length-2;if(Se===1)se.children=ee;else if(1<Se){for(var Re=Array(Se),lt=0;lt<Se;lt++)Re[lt]=arguments[lt+2];se.children=Re}return z(M.type,me,se)},pe.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},pe.createElement=function(M,$,ee){var se,me={},Se=null;if($!=null)for(se in $.key!==void 0&&(Se=""+$.key),$)Q.call($,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(me[se]=$[se]);var Re=arguments.length-2;if(Re===1)me.children=ee;else if(1<Re){for(var lt=Array(Re),ae=0;ae<Re;ae++)lt[ae]=arguments[ae+2];me.children=lt}if(M&&M.defaultProps)for(se in Re=M.defaultProps,Re)me[se]===void 0&&(me[se]=Re[se]);return z(M,Se,me)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(M){return{$$typeof:p,render:M}},pe.isValidElement=X,pe.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:ue}},pe.memo=function(M,$){return{$$typeof:m,type:M,compare:$===void 0?null:$}},pe.startTransition=function(M){var $=I.T,ee={};I.T=ee;try{var se=M(),me=I.S;me!==null&&me(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(F,Ce)}catch(Se){Ce(Se)}finally{$!==null&&ee.types!==null&&($.types=ee.types),I.T=$}},pe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},pe.use=function(M){return I.H.use(M)},pe.useActionState=function(M,$,ee){return I.H.useActionState(M,$,ee)},pe.useCallback=function(M,$){return I.H.useCallback(M,$)},pe.useContext=function(M){return I.H.useContext(M)},pe.useDebugValue=function(){},pe.useDeferredValue=function(M,$){return I.H.useDeferredValue(M,$)},pe.useEffect=function(M,$){return I.H.useEffect(M,$)},pe.useEffectEvent=function(M){return I.H.useEffectEvent(M)},pe.useId=function(){return I.H.useId()},pe.useImperativeHandle=function(M,$,ee){return I.H.useImperativeHandle(M,$,ee)},pe.useInsertionEffect=function(M,$){return I.H.useInsertionEffect(M,$)},pe.useLayoutEffect=function(M,$){return I.H.useLayoutEffect(M,$)},pe.useMemo=function(M,$){return I.H.useMemo(M,$)},pe.useOptimistic=function(M,$){return I.H.useOptimistic(M,$)},pe.useReducer=function(M,$,ee){return I.H.useReducer(M,$,ee)},pe.useRef=function(M){return I.H.useRef(M)},pe.useState=function(M){return I.H.useState(M)},pe.useSyncExternalStore=function(M,$,ee){return I.H.useSyncExternalStore(M,$,ee)},pe.useTransition=function(){return I.H.useTransition()},pe.version="19.2.0",pe}var jg;function mo(){return jg||(jg=1,nd.exports=iE()),nd.exports}var ge=mo();const bv=sf(ge);var id={exports:{}},ja={},sd={exports:{}},ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function sE(){return ey||(ey=1,(function(n){function e(V,j){var ue=V.length;V.push(j);e:for(;0<ue;){var Ce=ue-1>>>1,Ne=V[Ce];if(0<r(Ne,j))V[Ce]=j,V[ue]=Ne,ue=Ce;else break e}}function i(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var j=V[0],ue=V.pop();if(ue!==j){V[0]=ue;e:for(var Ce=0,Ne=V.length,M=Ne>>>1;Ce<M;){var $=2*(Ce+1)-1,ee=V[$],se=$+1,me=V[se];if(0>r(ee,ue))se<Ne&&0>r(me,ee)?(V[Ce]=me,V[se]=ue,Ce=se):(V[Ce]=ee,V[$]=ue,Ce=$);else if(se<Ne&&0>r(me,ue))V[Ce]=me,V[se]=ue,Ce=se;else break e}}return j}function r(V,j){var ue=V.sortIndex-j.sortIndex;return ue!==0?ue:V.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,p=c.now();n.unstable_now=function(){return c.now()-p}}var g=[],m=[],v=1,_=null,T=3,E=!1,w=!1,x=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function L(V){for(var j=i(m);j!==null;){if(j.callback===null)a(m);else if(j.startTime<=V)a(m),j.sortIndex=j.expirationTime,e(g,j);else break;j=i(m)}}function G(V){if(x=!1,L(V),!w)if(i(g)!==null)w=!0,F||(F=!0,te());else{var j=i(m);j!==null&&Pe(G,j.startTime-V)}}var F=!1,I=-1,Q=5,z=-1;function Z(){return N?!0:!(n.unstable_now()-z<Q)}function X(){if(N=!1,F){var V=n.unstable_now();z=V;var j=!0;try{e:{w=!1,x&&(x=!1,D(I),I=-1),E=!0;var ue=T;try{t:{for(L(V),_=i(g);_!==null&&!(_.expirationTime>V&&Z());){var Ce=_.callback;if(typeof Ce=="function"){_.callback=null,T=_.priorityLevel;var Ne=Ce(_.expirationTime<=V);if(V=n.unstable_now(),typeof Ne=="function"){_.callback=Ne,L(V),j=!0;break t}_===i(g)&&a(g),L(V)}else a(g);_=i(g)}if(_!==null)j=!0;else{var M=i(m);M!==null&&Pe(G,M.startTime-V),j=!1}}break e}finally{_=null,T=ue,E=!1}j=void 0}}finally{j?te():F=!1}}}var te;if(typeof U=="function")te=function(){U(X)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,de=Te.port2;Te.port1.onmessage=X,te=function(){de.postMessage(null)}}else te=function(){k(X,0)};function Pe(V,j){I=k(function(){V(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(V){switch(T){case 1:case 2:case 3:var j=3;break;default:j=T}var ue=T;T=j;try{return V()}finally{T=ue}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ue=T;T=V;try{return j()}finally{T=ue}},n.unstable_scheduleCallback=function(V,j,ue){var Ce=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ce+ue:Ce):ue=Ce,V){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=ue+Ne,V={id:v++,callback:j,priorityLevel:V,startTime:ue,expirationTime:Ne,sortIndex:-1},ue>Ce?(V.sortIndex=ue,e(m,V),i(g)===null&&V===i(m)&&(x?(D(I),I=-1):x=!0,Pe(G,ue-Ce))):(V.sortIndex=Ne,e(g,V),w||E||(w=!0,F||(F=!0,te()))),V},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(V){var j=T;return function(){var ue=T;T=j;try{return V.apply(this,arguments)}finally{T=ue}}}})(ad)),ad}var ty;function aE(){return ty||(ty=1,sd.exports=sE()),sd.exports}var od={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function oE(){if(ny)return _t;ny=1;var n=mo();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(g,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:g,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,_t.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(g,m,null,v)},_t.flushSync=function(g){var m=c.T,v=a.p;try{if(c.T=null,a.p=2,g)return g()}finally{c.T=m,a.p=v,a.d.f()}},_t.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(g,m))},_t.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},_t.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?a.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):v==="script"&&a.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_t.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);a.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(g)},_t.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);a.d.L(g,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_t.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=p(m.as,m.crossOrigin);a.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(g)},_t.requestFormReset=function(g){a.d.r(g)},_t.unstable_batchedUpdates=function(g,m){return g(m)},_t.useFormState=function(g,m,v){return c.H.useFormState(g,m,v)},_t.useFormStatus=function(){return c.H.useHostTransitionStatus()},_t.version="19.2.0",_t}var iy;function rE(){if(iy)return od.exports;iy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),od.exports=oE(),od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function lE(){if(sy)return ja;sy=1;var n=aE(),e=mo(),i=rE();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function c(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(a(188))}function m(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(a(188));return s!==t?null:t}for(var o=t,l=s;;){var h=o.return;if(h===null)break;var y=h.alternate;if(y===null){if(l=h.return,l!==null){o=l;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===o)return g(h),t;if(y===l)return g(h),s;y=y.sibling}throw Error(a(188))}if(o.return!==l.return)o=h,l=y;else{for(var S=!1,A=h.child;A;){if(A===o){S=!0,o=h,l=y;break}if(A===l){S=!0,l=h,o=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===o){S=!0,o=y,l=h;break}if(A===l){S=!0,l=y,o=h;break}A=A.sibling}if(!S)throw Error(a(189))}}if(o.alternate!==l)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Te?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case G:return"Suspense";case F:return"SuspenseList";case z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case U:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case L:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:de(t.type)||"Memo";case Q:s=t._payload,t=t._init;try{return de(t(s))}catch{}}return null}var Pe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Ce=[],Ne=-1;function M(t){return{current:t}}function $(t){0>Ne||(t.current=Ce[Ne],Ce[Ne]=null,Ne--)}function ee(t,s){Ne++,Ce[Ne]=t.current,t.current=s}var se=M(null),me=M(null),Se=M(null),Re=M(null);function lt(t,s){switch(ee(Se,s),ee(me,t),ee(se,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?_g(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=_g(s),t=Sg(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(se),ee(se,t)}function ae(){$(se),$(me),$(Se)}function je(t){t.memoizedState!==null&&ee(Re,t);var s=se.current,o=Sg(s,t.type);s!==o&&(ee(me,t),ee(se,o))}function Zi(t){me.current===t&&($(se),$(me)),Re.current===t&&($(Re),Ka._currentValue=ue)}var Yn,Bl;function sn(t){if(Yn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Yn=s&&s[1]||"",Bl=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yn+t+Bl}var aa=!1;function Vl(t,s){if(!t||aa)return"";aa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var O=H}Reflect.construct(t,[],K)}else{try{K.call()}catch(H){O=H}t.call(K.prototype)}}else{try{throw Error()}catch(H){O=H}(K=t())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&O&&typeof H.stack=="string")return[H.stack,O.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var b=S.split(`
`),B=A.split(`
`);for(h=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===b.length||h===B.length)for(l=b.length-1,h=B.length-1;1<=l&&0<=h&&b[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(b[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||b[l]!==B[h]){var Y=`
`+b[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{aa=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?sn(o):""}function DS(t,s){switch(t.tag){case 26:case 27:case 5:return sn(t.type);case 16:return sn("Lazy");case 13:return t.child!==s&&s!==null?sn("Suspense Fallback"):sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return Vl(t.type,!1);case 11:return Vl(t.type.render,!1);case 1:return Vl(t.type,!0);case 31:return sn("Activity");default:return""}}function Qf(t){try{var s="",o=null;do s+=DS(t,o),o=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ol=Object.prototype.hasOwnProperty,Hl=n.unstable_scheduleCallback,Gl=n.unstable_cancelCallback,PS=n.unstable_shouldYield,US=n.unstable_requestPaint,Dt=n.unstable_now,LS=n.unstable_getCurrentPriorityLevel,Zf=n.unstable_ImmediatePriority,Wf=n.unstable_UserBlockingPriority,Co=n.unstable_NormalPriority,kS=n.unstable_LowPriority,jf=n.unstable_IdlePriority,qS=n.log,BS=n.unstable_setDisableYieldValue,oa=null,Pt=null;function Jn(t){if(typeof qS=="function"&&BS(t),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(oa,t)}catch{}}var Ut=Math.clz32?Math.clz32:HS,VS=Math.log,OS=Math.LN2;function HS(t){return t>>>=0,t===0?32:31-(VS(t)/OS|0)|0}var Eo=256,Ao=262144,xo=4194304;function bi(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bo(t,s,o){var l=t.pendingLanes;if(l===0)return 0;var h=0,y=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~y,l!==0?h=bi(l):(S&=A,S!==0?h=bi(S):o||(o=A&~t,o!==0&&(h=bi(o))))):(A=l&~y,A!==0?h=bi(A):S!==0?h=bi(S):o||(o=l&~t,o!==0&&(h=bi(o)))),h===0?0:s!==0&&s!==h&&(s&y)===0&&(y=h&-h,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:h}function ra(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function GS(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eh(){var t=xo;return xo<<=1,(xo&62914560)===0&&(xo=4194304),t}function Fl(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function la(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function FS(t,s,o,l,h,y){var S=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var A=t.entanglements,b=t.expirationTimes,B=t.hiddenUpdates;for(o=S&~o;0<o;){var Y=31-Ut(o),K=1<<Y;A[Y]=0,b[Y]=-1;var O=B[Y];if(O!==null)for(B[Y]=null,Y=0;Y<O.length;Y++){var H=O[Y];H!==null&&(H.lane&=-536870913)}o&=~K}l!==0&&th(t,l,0),y!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=y&~(S&~s))}function th(t,s,o){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Ut(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|o&261930}function nh(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var l=31-Ut(o),h=1<<l;h&s|t[l]&s&&(t[l]|=s),o&=~h}}function ih(t,s){var o=s&-s;return o=(o&42)!==0?1:zl(o),(o&(t.suspendedLanes|s))!==0?0:o}function zl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yl(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sh(){var t=j.p;return t!==0?t:(t=window.event,t===void 0?32:Fg(t.type))}function ah(t,s){var o=j.p;try{return j.p=t,s()}finally{j.p=o}}var $n=Math.random().toString(36).slice(2),ft="__reactFiber$"+$n,At="__reactProps$"+$n,Wi="__reactContainer$"+$n,Jl="__reactEvents$"+$n,zS="__reactListeners$"+$n,YS="__reactHandles$"+$n,oh="__reactResources$"+$n,ua="__reactMarker$"+$n;function $l(t){delete t[ft],delete t[At],delete t[Jl],delete t[zS],delete t[YS]}function ji(t){var s=t[ft];if(s)return s;for(var o=t.parentNode;o;){if(s=o[Wi]||o[ft]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=wg(t);t!==null;){if(o=t[ft])return o;t=wg(t)}return s}t=o,o=t.parentNode}return null}function es(t){if(t=t[ft]||t[Wi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function ca(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function ts(t){var s=t[oh];return s||(s=t[oh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ut(t){t[ua]=!0}var rh=new Set,lh={};function wi(t,s){ns(t,s),ns(t+"Capture",s)}function ns(t,s){for(lh[t]=s,t=0;t<s.length;t++)rh.add(s[t])}var JS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uh={},ch={};function $S(t){return Ol.call(ch,t)?!0:Ol.call(uh,t)?!1:JS.test(t)?ch[t]=!0:(uh[t]=!0,!1)}function wo(t,s,o){if($S(s))if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+o)}}function Ro(t,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+o)}}function Sn(t,s,o,l){if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(s,o,""+l)}}function Yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dh(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function KS(t,s,o){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,y=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(S){o=""+S,y.call(this,S)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Kl(t){if(!t._valueTracker){var s=dh(t)?"checked":"value";t._valueTracker=KS(t,s,""+t[s])}}function fh(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),l="";return t&&(l=dh(t)?t.checked?"true":"false":t.value),t=l,t!==o?(s.setValue(t),!0):!1}function No(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var XS=/[\n"\\]/g;function Jt(t){return t.replace(XS,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xl(t,s,o,l,h,y,S,A){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),s!=null?S==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Yt(s)):t.value!==""+Yt(s)&&(t.value=""+Yt(s)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),s!=null?Ql(t,S,Yt(s)):o!=null?Ql(t,S,Yt(o)):l!=null&&t.removeAttribute("value"),h==null&&y!=null&&(t.defaultChecked=!!y),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Yt(A):t.removeAttribute("name")}function hh(t,s,o,l,h,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Kl(t);return}o=o!=null?""+Yt(o):"",s=s!=null?""+Yt(s):o,A||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),Kl(t)}function Ql(t,s,o){s==="number"&&No(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function is(t,s,o,l){if(t=t.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=s.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&l&&(t[o].defaultSelected=!0)}else{for(o=""+Yt(o),s=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function mh(t,s,o){if(s!=null&&(s=""+Yt(s),s!==t.value&&(t.value=s),o==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=o!=null?""+Yt(o):""}function ph(t,s,o,l){if(s==null){if(l!=null){if(o!=null)throw Error(a(92));if(Pe(l)){if(1<l.length)throw Error(a(93));l=l[0]}o=l}o==null&&(o=""),s=o}o=Yt(s),t.defaultValue=o,l=t.textContent,l===o&&l!==""&&l!==null&&(t.value=l),Kl(t)}function ss(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var QS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gh(t,s,o){var l=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,o):typeof o!="number"||o===0||QS.has(s)?s==="float"?t.cssFloat=o:t[s]=(""+o).trim():t[s]=o+"px"}function yh(t,s,o){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&o[h]!==l&&gh(t,h,l)}else for(var y in s)s.hasOwnProperty(y)&&gh(t,y,s[y])}function Zl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(t){return WS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Tn(){}var Wl=null;function jl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var as=null,os=null;function vh(t){var s=es(t);if(s&&(t=s.stateNode)){var o=t[At]||null;e:switch(t=s.stateNode,s.type){case"input":if(Xl(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Jt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var l=o[s];if(l!==t&&l.form===t.form){var h=l[At]||null;if(!h)throw Error(a(90));Xl(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)l=o[s],l.form===t.form&&fh(l)}break e;case"textarea":mh(t,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&is(t,!!o.multiple,s,!1)}}}var eu=!1;function _h(t,s,o){if(eu)return t(s,o);eu=!0;try{var l=t(s);return l}finally{if(eu=!1,(as!==null||os!==null)&&(yr(),as&&(s=as,t=os,os=as=null,vh(s),t)))for(s=0;s<t.length;s++)vh(t[s])}}function da(t,s){var o=t.stateNode;if(o===null)return null;var l=o[At]||null;if(l===null)return null;o=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(a(231,s,typeof o));return o}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tu=!1;if(Cn)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){tu=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{tu=!1}var Kn=null,nu=null,Io=null;function Sh(){if(Io)return Io;var t,s=nu,o=s.length,l,h="value"in Kn?Kn.value:Kn.textContent,y=h.length;for(t=0;t<o&&s[t]===h[t];t++);var S=o-t;for(l=1;l<=S&&s[o-l]===h[y-l];l++);return Io=h.slice(t,1<l?1-l:void 0)}function Do(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Po(){return!0}function Th(){return!1}function xt(t){function s(o,l,h,y,S){this._reactName=o,this._targetInst=h,this.type=l,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(o=t[A],this[A]=o?o(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Po:Th,this.isPropagationStopped=Th,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),s}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=xt(Ri),ha=_({},Ri,{view:0,detail:0}),jS=xt(ha),iu,su,ma,Lo=_({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(iu=t.screenX-ma.screenX,su=t.screenY-ma.screenY):su=iu=0,ma=t),iu)},movementY:function(t){return"movementY"in t?t.movementY:su}}),Ch=xt(Lo),eT=_({},Lo,{dataTransfer:0}),tT=xt(eT),nT=_({},ha,{relatedTarget:0}),au=xt(nT),iT=_({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),sT=xt(iT),aT=_({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oT=xt(aT),rT=_({},Ri,{data:0}),Eh=xt(rT),lT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dT(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=cT[t])?!!s[t]:!1}function ou(){return dT}var fT=_({},ha,{key:function(t){if(t.key){var s=lT[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Do(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(t){return t.type==="keypress"?Do(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Do(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hT=xt(fT),mT=_({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ah=xt(mT),pT=_({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),gT=xt(pT),yT=_({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),vT=xt(yT),_T=_({},Lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=xt(_T),TT=_({},Ri,{newState:0,oldState:0}),CT=xt(TT),ET=[9,13,27,32],ru=Cn&&"CompositionEvent"in window,pa=null;Cn&&"documentMode"in document&&(pa=document.documentMode);var AT=Cn&&"TextEvent"in window&&!pa,xh=Cn&&(!ru||pa&&8<pa&&11>=pa),bh=" ",wh=!1;function Rh(t,s){switch(t){case"keyup":return ET.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rs=!1;function xT(t,s){switch(t){case"compositionend":return Nh(s);case"keypress":return s.which!==32?null:(wh=!0,bh);case"textInput":return t=s.data,t===bh&&wh?null:t;default:return null}}function bT(t,s){if(rs)return t==="compositionend"||!ru&&Rh(t,s)?(t=Sh(),Io=nu=Kn=null,rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xh&&s.locale!=="ko"?null:s.data;default:return null}}var wT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!wT[t.type]:s==="textarea"}function Ih(t,s,o,l){as?os?os.push(l):os=[l]:as=l,s=Ar(s,"onChange"),0<s.length&&(o=new Uo("onChange","change",null,o,l),t.push({event:o,listeners:s}))}var ga=null,ya=null;function RT(t){hg(t,0)}function ko(t){var s=ca(t);if(fh(s))return t}function Dh(t,s){if(t==="change")return s}var Ph=!1;if(Cn){var lu;if(Cn){var uu="oninput"in document;if(!uu){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),uu=typeof Uh.oninput=="function"}lu=uu}else lu=!1;Ph=lu&&(!document.documentMode||9<document.documentMode)}function Lh(){ga&&(ga.detachEvent("onpropertychange",kh),ya=ga=null)}function kh(t){if(t.propertyName==="value"&&ko(ya)){var s=[];Ih(s,ya,t,jl(t)),_h(RT,s)}}function NT(t,s,o){t==="focusin"?(Lh(),ga=s,ya=o,ga.attachEvent("onpropertychange",kh)):t==="focusout"&&Lh()}function MT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ko(ya)}function IT(t,s){if(t==="click")return ko(s)}function DT(t,s){if(t==="input"||t==="change")return ko(s)}function PT(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Lt=typeof Object.is=="function"?Object.is:PT;function va(t,s){if(Lt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),l=Object.keys(s);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var h=o[l];if(!Ol.call(s,h)||!Lt(t[h],s[h]))return!1}return!0}function qh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bh(t,s){var o=qh(t);t=0;for(var l;o;){if(o.nodeType===3){if(l=t+o.textContent.length,t<=s&&l>=s)return{node:o,offset:s-t};t=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qh(o)}}function Vh(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Vh(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Oh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=No(t.document);s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=No(t.document)}return s}function cu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var UT=Cn&&"documentMode"in document&&11>=document.documentMode,ls=null,du=null,_a=null,fu=!1;function Hh(t,s,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fu||ls==null||ls!==No(l)||(l=ls,"selectionStart"in l&&cu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_a&&va(_a,l)||(_a=l,l=Ar(du,"onSelect"),0<l.length&&(s=new Uo("onSelect","select",null,s,o),t.push({event:s,listeners:l}),s.target=ls)))}function Ni(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var us={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},hu={},Gh={};Cn&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function Mi(t){if(hu[t])return hu[t];if(!us[t])return t;var s=us[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in Gh)return hu[t]=s[o];return t}var Fh=Mi("animationend"),zh=Mi("animationiteration"),Yh=Mi("animationstart"),LT=Mi("transitionrun"),kT=Mi("transitionstart"),qT=Mi("transitioncancel"),Jh=Mi("transitionend"),$h=new Map,mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mu.push("scrollEnd");function an(t,s){$h.set(t,s),wi(s,[t])}var qo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},$t=[],cs=0,pu=0;function Bo(){for(var t=cs,s=pu=cs=0;s<t;){var o=$t[s];$t[s++]=null;var l=$t[s];$t[s++]=null;var h=$t[s];$t[s++]=null;var y=$t[s];if($t[s++]=null,l!==null&&h!==null){var S=l.pending;S===null?h.next=h:(h.next=S.next,S.next=h),l.pending=h}y!==0&&Kh(o,h,y)}}function Vo(t,s,o,l){$t[cs++]=t,$t[cs++]=s,$t[cs++]=o,$t[cs++]=l,pu|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function gu(t,s,o,l){return Vo(t,s,o,l),Oo(t)}function Ii(t,s){return Vo(t,null,null,s),Oo(t)}function Kh(t,s,o){t.lanes|=o;var l=t.alternate;l!==null&&(l.lanes|=o);for(var h=!1,y=t.return;y!==null;)y.childLanes|=o,l=y.alternate,l!==null&&(l.childLanes|=o),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(h=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,h&&s!==null&&(h=31-Ut(o),t=y.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=o|536870912),y):null}function Oo(t){if(50<Ha)throw Ha=0,xc=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ds={};function BT(t,s,o,l){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(t,s,o,l){return new BT(t,s,o,l)}function yu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function En(t,s){var o=t.alternate;return o===null?(o=kt(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Xh(t,s){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,s=o.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Ho(t,s,o,l,h,y){var S=0;if(l=t,typeof t=="function")yu(t)&&(S=1);else if(typeof t=="string")S=FC(t,o,se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case z:return t=kt(31,o,s,h),t.elementType=z,t.lanes=y,t;case x:return Di(o.children,h,y,s);case N:S=8,h|=24;break;case k:return t=kt(12,o,s,h|2),t.elementType=k,t.lanes=y,t;case G:return t=kt(13,o,s,h),t.elementType=G,t.lanes=y,t;case F:return t=kt(19,o,s,h),t.elementType=F,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:S=10;break e;case D:S=9;break e;case L:S=11;break e;case I:S=14;break e;case Q:S=16,l=null;break e}S=29,o=Error(a(130,t===null?"null":typeof t,"")),l=null}return s=kt(S,o,s,h),s.elementType=t,s.type=l,s.lanes=y,s}function Di(t,s,o,l){return t=kt(7,t,l,s),t.lanes=o,t}function vu(t,s,o){return t=kt(6,t,null,s),t.lanes=o,t}function Qh(t){var s=kt(18,null,null,0);return s.stateNode=t,s}function _u(t,s,o){return s=kt(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Zh=new WeakMap;function Kt(t,s){if(typeof t=="object"&&t!==null){var o=Zh.get(t);return o!==void 0?o:(s={value:t,source:s,stack:Qf(s)},Zh.set(t,s),s)}return{value:t,source:s,stack:Qf(s)}}var fs=[],hs=0,Go=null,Sa=0,Xt=[],Qt=0,Xn=null,fn=1,hn="";function An(t,s){fs[hs++]=Sa,fs[hs++]=Go,Go=t,Sa=s}function Wh(t,s,o){Xt[Qt++]=fn,Xt[Qt++]=hn,Xt[Qt++]=Xn,Xn=t;var l=fn;t=hn;var h=32-Ut(l)-1;l&=~(1<<h),o+=1;var y=32-Ut(s)+h;if(30<y){var S=h-h%5;y=(l&(1<<S)-1).toString(32),l>>=S,h-=S,fn=1<<32-Ut(s)+h|o<<h|l,hn=y+t}else fn=1<<y|o<<h|l,hn=t}function Su(t){t.return!==null&&(An(t,1),Wh(t,1,0))}function Tu(t){for(;t===Go;)Go=fs[--hs],fs[hs]=null,Sa=fs[--hs],fs[hs]=null;for(;t===Xn;)Xn=Xt[--Qt],Xt[Qt]=null,hn=Xt[--Qt],Xt[Qt]=null,fn=Xt[--Qt],Xt[Qt]=null}function jh(t,s){Xt[Qt++]=fn,Xt[Qt++]=hn,Xt[Qt++]=Xn,fn=s.id,hn=s.overflow,Xn=t}var ht=null,Ge=null,we=!1,Qn=null,Zt=!1,Cu=Error(a(519));function Zn(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ta(Kt(s,t)),Cu}function em(t){var s=t.stateNode,o=t.type,l=t.memoizedProps;switch(s[ft]=t,s[At]=l,o){case"dialog":Ae("cancel",s),Ae("close",s);break;case"iframe":case"object":case"embed":Ae("load",s);break;case"video":case"audio":for(o=0;o<Fa.length;o++)Ae(Fa[o],s);break;case"source":Ae("error",s);break;case"img":case"image":case"link":Ae("error",s),Ae("load",s);break;case"details":Ae("toggle",s);break;case"input":Ae("invalid",s),hh(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ae("invalid",s);break;case"textarea":Ae("invalid",s),ph(s,l.value,l.defaultValue,l.children)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||l.suppressHydrationWarning===!0||yg(s.textContent,o)?(l.popover!=null&&(Ae("beforetoggle",s),Ae("toggle",s)),l.onScroll!=null&&Ae("scroll",s),l.onScrollEnd!=null&&Ae("scrollend",s),l.onClick!=null&&(s.onclick=Tn),s=!0):s=!1,s||Zn(t,!0)}function tm(t){for(ht=t.return;ht;)switch(ht.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:ht=ht.return}}function ms(t){if(t!==ht)return!1;if(!we)return tm(t),we=!0,!1;var s=t.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Oc(t.type,t.memoizedProps)),o=!o),o&&Ge&&Zn(t),tm(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ge=bg(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ge=bg(t)}else s===27?(s=Ge,di(t.type)?(t=Yc,Yc=null,Ge=t):Ge=s):Ge=ht?jt(t.stateNode.nextSibling):null;return!0}function Pi(){Ge=ht=null,we=!1}function Eu(){var t=Qn;return t!==null&&(Nt===null?Nt=t:Nt.push.apply(Nt,t),Qn=null),t}function Ta(t){Qn===null?Qn=[t]:Qn.push(t)}var Au=M(null),Ui=null,xn=null;function Wn(t,s,o){ee(Au,s._currentValue),s._currentValue=o}function bn(t){t._currentValue=Au.current,$(Au)}function xu(t,s,o){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===o)break;t=t.return}}function bu(t,s,o,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var y=h.dependencies;if(y!==null){var S=h.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=h;for(var b=0;b<s.length;b++)if(A.context===s[b]){y.lanes|=o,A=y.alternate,A!==null&&(A.lanes|=o),xu(y.return,o,t),l||(S=null);break e}y=A.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(a(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),xu(S,o,t),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===t){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function ps(t,s,o,l){t=null;for(var h=s,y=!1;h!==null;){if(!y){if((h.flags&524288)!==0)y=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var A=h.type;Lt(h.pendingProps.value,S.value)||(t!==null?t.push(A):t=[A])}}else if(h===Re.current){if(S=h.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ka):t=[Ka])}h=h.return}t!==null&&bu(s,t,o,l),s.flags|=262144}function Fo(t){for(t=t.firstContext;t!==null;){if(!Lt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Li(t){Ui=t,xn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mt(t){return nm(Ui,t)}function zo(t,s){return Ui===null&&Li(t),nm(t,s)}function nm(t,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},xn===null){if(t===null)throw Error(a(308));xn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else xn=xn.next=s;return o}var VT=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(o,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(o){return o()})}},OT=n.unstable_scheduleCallback,HT=n.unstable_NormalPriority,et={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wu(){return{controller:new VT,data:new Map,refCount:0}}function Ca(t){t.refCount--,t.refCount===0&&OT(HT,function(){t.controller.abort()})}var Ea=null,Ru=0,gs=0,ys=null;function GT(t,s){if(Ea===null){var o=Ea=[];Ru=0,gs=Ic(),ys={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Ru++,s.then(im,im),s}function im(){if(--Ru===0&&Ea!==null){ys!==null&&(ys.status="fulfilled");var t=Ea;Ea=null,gs=0,ys=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function FT(t,s){var o=[],l={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),l}var sm=V.S;V.S=function(t,s){Hp=Dt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&GT(t,s),sm!==null&&sm(t,s)};var ki=M(null);function Nu(){var t=ki.current;return t!==null?t:He.pooledCache}function Yo(t,s){s===null?ee(ki,ki.current):ee(ki,s.pool)}function am(){var t=Nu();return t===null?null:{parent:et._currentValue,pool:t}}var vs=Error(a(460)),Mu=Error(a(474)),Jo=Error(a(542)),$o={then:function(){}};function om(t){return t=t.status,t==="fulfilled"||t==="rejected"}function rm(t,s,o){switch(o=t[o],o===void 0?t.push(s):o!==s&&(s.then(Tn,Tn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,um(t),t;default:if(typeof s.status=="string")s.then(Tn,Tn);else{if(t=He,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,um(t),t}throw Bi=s,vs}}function qi(t){try{var s=t._init;return s(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Bi=o,vs):o}}var Bi=null;function lm(){if(Bi===null)throw Error(a(459));var t=Bi;return Bi=null,t}function um(t){if(t===vs||t===Jo)throw Error(a(483))}var _s=null,Aa=0;function Ko(t){var s=Aa;return Aa+=1,_s===null&&(_s=[]),rm(_s,t,s)}function xa(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Xo(t,s){throw s.$$typeof===T?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function cm(t){function s(P,R){if(t){var q=P.deletions;q===null?(P.deletions=[R],P.flags|=16):q.push(R)}}function o(P,R){if(!t)return null;for(;R!==null;)s(P,R),R=R.sibling;return null}function l(P){for(var R=new Map;P!==null;)P.key!==null?R.set(P.key,P):R.set(P.index,P),P=P.sibling;return R}function h(P,R){return P=En(P,R),P.index=0,P.sibling=null,P}function y(P,R,q){return P.index=q,t?(q=P.alternate,q!==null?(q=q.index,q<R?(P.flags|=67108866,R):q):(P.flags|=67108866,R)):(P.flags|=1048576,R)}function S(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function A(P,R,q,J){return R===null||R.tag!==6?(R=vu(q,P.mode,J),R.return=P,R):(R=h(R,q),R.return=P,R)}function b(P,R,q,J){var le=q.type;return le===x?Y(P,R,q.props.children,J,q.key):R!==null&&(R.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Q&&qi(le)===R.type)?(R=h(R,q.props),xa(R,q),R.return=P,R):(R=Ho(q.type,q.key,q.props,null,P.mode,J),xa(R,q),R.return=P,R)}function B(P,R,q,J){return R===null||R.tag!==4||R.stateNode.containerInfo!==q.containerInfo||R.stateNode.implementation!==q.implementation?(R=_u(q,P.mode,J),R.return=P,R):(R=h(R,q.children||[]),R.return=P,R)}function Y(P,R,q,J,le){return R===null||R.tag!==7?(R=Di(q,P.mode,J,le),R.return=P,R):(R=h(R,q),R.return=P,R)}function K(P,R,q){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=vu(""+R,P.mode,q),R.return=P,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case E:return q=Ho(R.type,R.key,R.props,null,P.mode,q),xa(q,R),q.return=P,q;case w:return R=_u(R,P.mode,q),R.return=P,R;case Q:return R=qi(R),K(P,R,q)}if(Pe(R)||te(R))return R=Di(R,P.mode,q,null),R.return=P,R;if(typeof R.then=="function")return K(P,Ko(R),q);if(R.$$typeof===U)return K(P,zo(P,R),q);Xo(P,R)}return null}function O(P,R,q,J){var le=R!==null?R.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return le!==null?null:A(P,R,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return q.key===le?b(P,R,q,J):null;case w:return q.key===le?B(P,R,q,J):null;case Q:return q=qi(q),O(P,R,q,J)}if(Pe(q)||te(q))return le!==null?null:Y(P,R,q,J,null);if(typeof q.then=="function")return O(P,R,Ko(q),J);if(q.$$typeof===U)return O(P,R,zo(P,q),J);Xo(P,q)}return null}function H(P,R,q,J,le){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return P=P.get(q)||null,A(R,P,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case E:return P=P.get(J.key===null?q:J.key)||null,b(R,P,J,le);case w:return P=P.get(J.key===null?q:J.key)||null,B(R,P,J,le);case Q:return J=qi(J),H(P,R,q,J,le)}if(Pe(J)||te(J))return P=P.get(q)||null,Y(R,P,J,le,null);if(typeof J.then=="function")return H(P,R,q,Ko(J),le);if(J.$$typeof===U)return H(P,R,q,zo(R,J),le);Xo(R,J)}return null}function ie(P,R,q,J){for(var le=null,Me=null,oe=R,_e=R=0,be=null;oe!==null&&_e<q.length;_e++){oe.index>_e?(be=oe,oe=null):be=oe.sibling;var Ie=O(P,oe,q[_e],J);if(Ie===null){oe===null&&(oe=be);break}t&&oe&&Ie.alternate===null&&s(P,oe),R=y(Ie,R,_e),Me===null?le=Ie:Me.sibling=Ie,Me=Ie,oe=be}if(_e===q.length)return o(P,oe),we&&An(P,_e),le;if(oe===null){for(;_e<q.length;_e++)oe=K(P,q[_e],J),oe!==null&&(R=y(oe,R,_e),Me===null?le=oe:Me.sibling=oe,Me=oe);return we&&An(P,_e),le}for(oe=l(oe);_e<q.length;_e++)be=H(oe,P,_e,q[_e],J),be!==null&&(t&&be.alternate!==null&&oe.delete(be.key===null?_e:be.key),R=y(be,R,_e),Me===null?le=be:Me.sibling=be,Me=be);return t&&oe.forEach(function(gi){return s(P,gi)}),we&&An(P,_e),le}function ce(P,R,q,J){if(q==null)throw Error(a(151));for(var le=null,Me=null,oe=R,_e=R=0,be=null,Ie=q.next();oe!==null&&!Ie.done;_e++,Ie=q.next()){oe.index>_e?(be=oe,oe=null):be=oe.sibling;var gi=O(P,oe,Ie.value,J);if(gi===null){oe===null&&(oe=be);break}t&&oe&&gi.alternate===null&&s(P,oe),R=y(gi,R,_e),Me===null?le=gi:Me.sibling=gi,Me=gi,oe=be}if(Ie.done)return o(P,oe),we&&An(P,_e),le;if(oe===null){for(;!Ie.done;_e++,Ie=q.next())Ie=K(P,Ie.value,J),Ie!==null&&(R=y(Ie,R,_e),Me===null?le=Ie:Me.sibling=Ie,Me=Ie);return we&&An(P,_e),le}for(oe=l(oe);!Ie.done;_e++,Ie=q.next())Ie=H(oe,P,_e,Ie.value,J),Ie!==null&&(t&&Ie.alternate!==null&&oe.delete(Ie.key===null?_e:Ie.key),R=y(Ie,R,_e),Me===null?le=Ie:Me.sibling=Ie,Me=Ie);return t&&oe.forEach(function(eE){return s(P,eE)}),we&&An(P,_e),le}function Ve(P,R,q,J){if(typeof q=="object"&&q!==null&&q.type===x&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case E:e:{for(var le=q.key;R!==null;){if(R.key===le){if(le=q.type,le===x){if(R.tag===7){o(P,R.sibling),J=h(R,q.props.children),J.return=P,P=J;break e}}else if(R.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Q&&qi(le)===R.type){o(P,R.sibling),J=h(R,q.props),xa(J,q),J.return=P,P=J;break e}o(P,R);break}else s(P,R);R=R.sibling}q.type===x?(J=Di(q.props.children,P.mode,J,q.key),J.return=P,P=J):(J=Ho(q.type,q.key,q.props,null,P.mode,J),xa(J,q),J.return=P,P=J)}return S(P);case w:e:{for(le=q.key;R!==null;){if(R.key===le)if(R.tag===4&&R.stateNode.containerInfo===q.containerInfo&&R.stateNode.implementation===q.implementation){o(P,R.sibling),J=h(R,q.children||[]),J.return=P,P=J;break e}else{o(P,R);break}else s(P,R);R=R.sibling}J=_u(q,P.mode,J),J.return=P,P=J}return S(P);case Q:return q=qi(q),Ve(P,R,q,J)}if(Pe(q))return ie(P,R,q,J);if(te(q)){if(le=te(q),typeof le!="function")throw Error(a(150));return q=le.call(q),ce(P,R,q,J)}if(typeof q.then=="function")return Ve(P,R,Ko(q),J);if(q.$$typeof===U)return Ve(P,R,zo(P,q),J);Xo(P,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,R!==null&&R.tag===6?(o(P,R.sibling),J=h(R,q),J.return=P,P=J):(o(P,R),J=vu(q,P.mode,J),J.return=P,P=J),S(P)):o(P,R)}return function(P,R,q,J){try{Aa=0;var le=Ve(P,R,q,J);return _s=null,le}catch(oe){if(oe===vs||oe===Jo)throw oe;var Me=kt(29,oe,null,P.mode);return Me.lanes=J,Me.return=P,Me}finally{}}}var Vi=cm(!0),dm=cm(!1),jn=!1;function Iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Du(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ei(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ti(t,s,o){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ue&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Oo(t),Kh(t,null,o),s}return Vo(t,l,s,o),Oo(t)}function ba(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,o|=l,s.lanes=o,nh(t,o)}}function Pu(t,s){var o=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var h=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?h=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?h=y=s:y=y.next=s}else h=y=s;o={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}var Uu=!1;function wa(){if(Uu){var t=ys;if(t!==null)throw t}}function Ra(t,s,o,l){Uu=!1;var h=t.updateQueue;jn=!1;var y=h.firstBaseUpdate,S=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var b=A,B=b.next;b.next=null,S===null?y=B:S.next=B,S=b;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==S&&(A===null?Y.firstBaseUpdate=B:A.next=B,Y.lastBaseUpdate=b))}if(y!==null){var K=h.baseState;S=0,Y=B=b=null,A=y;do{var O=A.lane&-536870913,H=O!==A.lane;if(H?(xe&O)===O:(l&O)===O){O!==0&&O===gs&&(Uu=!0),Y!==null&&(Y=Y.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ie=t,ce=A;O=s;var Ve=o;switch(ce.tag){case 1:if(ie=ce.payload,typeof ie=="function"){K=ie.call(Ve,K,O);break e}K=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ce.payload,O=typeof ie=="function"?ie.call(Ve,K,O):ie,O==null)break e;K=_({},K,O);break e;case 2:jn=!0}}O=A.callback,O!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[O]:H.push(O))}else H={lane:O,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(B=Y=H,b=K):Y=Y.next=H,S|=O;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;H=A,A=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Y===null&&(b=K),h.baseState=b,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,y===null&&(h.shared.lanes=0),oi|=S,t.lanes=S,t.memoizedState=K}}function fm(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function hm(t,s){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)fm(o[t],s)}var Ss=M(null),Qo=M(0);function mm(t,s){t=Ln,ee(Qo,t),ee(Ss,s),Ln=t|s.baseLanes}function Lu(){ee(Qo,Ln),ee(Ss,Ss.current)}function ku(){Ln=Qo.current,$(Ss),$(Qo)}var qt=M(null),Wt=null;function ni(t){var s=t.alternate;ee(Qe,Qe.current&1),ee(qt,t),Wt===null&&(s===null||Ss.current!==null||s.memoizedState!==null)&&(Wt=t)}function qu(t){ee(Qe,Qe.current),ee(qt,t),Wt===null&&(Wt=t)}function pm(t){t.tag===22?(ee(Qe,Qe.current),ee(qt,t),Wt===null&&(Wt=t)):ii()}function ii(){ee(Qe,Qe.current),ee(qt,qt.current)}function Bt(t){$(qt),Wt===t&&(Wt=null),$(Qe)}var Qe=M(0);function Zo(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Fc(o)||zc(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wn=0,ve=null,qe=null,tt=null,Wo=!1,Ts=!1,Oi=!1,jo=0,Na=0,Cs=null,zT=0;function Ke(){throw Error(a(321))}function Bu(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!Lt(t[o],s[o]))return!1;return!0}function Vu(t,s,o,l,h,y){return wn=y,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=t===null||t.memoizedState===null?Wm:ec,Oi=!1,y=o(l,h),Oi=!1,Ts&&(y=ym(s,o,l,h)),gm(t),y}function gm(t){V.H=Da;var s=qe!==null&&qe.next!==null;if(wn=0,tt=qe=ve=null,Wo=!1,Na=0,Cs=null,s)throw Error(a(300));t===null||nt||(t=t.dependencies,t!==null&&Fo(t)&&(nt=!0))}function ym(t,s,o,l){ve=t;var h=0;do{if(Ts&&(Cs=null),Na=0,Ts=!1,25<=h)throw Error(a(301));if(h+=1,tt=qe=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=jm,y=s(o,l)}while(Ts);return y}function YT(){var t=V.H,s=t.useState()[0];return s=typeof s.then=="function"?Ma(s):s,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(ve.flags|=1024),s}function Ou(){var t=jo!==0;return jo=0,t}function Hu(t,s,o){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o}function Gu(t){if(Wo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Wo=!1}wn=0,tt=qe=ve=null,Ts=!1,Na=jo=0,Cs=null}function Ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?ve.memoizedState=tt=t:tt=tt.next=t,tt}function Ze(){if(qe===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var s=tt===null?ve.memoizedState:tt.next;if(s!==null)tt=s,qe=t;else{if(t===null)throw ve.alternate===null?Error(a(467)):Error(a(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},tt===null?ve.memoizedState=tt=t:tt=tt.next=t}return tt}function er(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ma(t){var s=Na;return Na+=1,Cs===null&&(Cs=[]),t=rm(Cs,t,s),s=ve,(tt===null?s.memoizedState:tt.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Wm:ec),t}function tr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ma(t);if(t.$$typeof===U)return mt(t)}throw Error(a(438,String(t)))}function Fu(t){var s=null,o=ve.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var l=ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=er(),ve.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(t),l=0;l<t;l++)o[l]=Z;return s.index++,o}function Rn(t,s){return typeof s=="function"?s(t):s}function nr(t){var s=Ze();return zu(s,qe,t)}function zu(t,s,o){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=o;var h=t.baseQueue,y=l.pending;if(y!==null){if(h!==null){var S=h.next;h.next=y.next,y.next=S}s.baseQueue=h=y,l.pending=null}if(y=t.baseState,h===null)t.memoizedState=y;else{s=h.next;var A=S=null,b=null,B=s,Y=!1;do{var K=B.lane&-536870913;if(K!==B.lane?(xe&K)===K:(wn&K)===K){var O=B.revertLane;if(O===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),K===gs&&(Y=!0);else if((wn&O)===O){B=B.next,O===gs&&(Y=!0);continue}else K={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},b===null?(A=b=K,S=y):b=b.next=K,ve.lanes|=O,oi|=O;K=B.action,Oi&&o(y,K),y=B.hasEagerState?B.eagerState:o(y,K)}else O={lane:K,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},b===null?(A=b=O,S=y):b=b.next=O,ve.lanes|=K,oi|=K;B=B.next}while(B!==null&&B!==s);if(b===null?S=y:b.next=A,!Lt(y,t.memoizedState)&&(nt=!0,Y&&(o=ys,o!==null)))throw o;t.memoizedState=y,t.baseState=S,t.baseQueue=b,l.lastRenderedState=y}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Yu(t){var s=Ze(),o=s.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=t;var l=o.dispatch,h=o.pending,y=s.memoizedState;if(h!==null){o.pending=null;var S=h=h.next;do y=t(y,S.action),S=S.next;while(S!==h);Lt(y,s.memoizedState)||(nt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,l]}function vm(t,s,o){var l=ve,h=Ze(),y=we;if(y){if(o===void 0)throw Error(a(407));o=o()}else o=s();var S=!Lt((qe||h).memoizedState,o);if(S&&(h.memoizedState=o,nt=!0),h=h.queue,Ku(Tm.bind(null,l,h,t),[t]),h.getSnapshot!==s||S||tt!==null&&tt.memoizedState.tag&1){if(l.flags|=2048,Es(9,{destroy:void 0},Sm.bind(null,l,h,o,s),null),He===null)throw Error(a(349));y||(wn&127)!==0||_m(l,s,o)}return o}function _m(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=ve.updateQueue,s===null?(s=er(),ve.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function Sm(t,s,o,l){s.value=o,s.getSnapshot=l,Cm(s)&&Em(t)}function Tm(t,s,o){return o(function(){Cm(s)&&Em(t)})}function Cm(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!Lt(t,o)}catch{return!0}}function Em(t){var s=Ii(t,2);s!==null&&Mt(s,t,2)}function Ju(t){var s=Ct();if(typeof t=="function"){var o=t;if(t=o(),Oi){Jn(!0);try{o()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:t},s}function Am(t,s,o,l){return t.baseState=o,zu(t,qe,typeof l=="function"?l:Rn)}function JT(t,s,o,l,h){if(ar(t))throw Error(a(485));if(t=s.action,t!==null){var y={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};V.T!==null?o(!0):y.isTransition=!1,l(y),o=s.pending,o===null?(y.next=s.pending=y,xm(s,y)):(y.next=o.next,s.pending=o.next=y)}}function xm(t,s){var o=s.action,l=s.payload,h=t.state;if(s.isTransition){var y=V.T,S={};V.T=S;try{var A=o(h,l),b=V.S;b!==null&&b(S,A),bm(t,s,A)}catch(B){$u(t,s,B)}finally{y!==null&&S.types!==null&&(y.types=S.types),V.T=y}}else try{y=o(h,l),bm(t,s,y)}catch(B){$u(t,s,B)}}function bm(t,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){wm(t,s,l)},function(l){return $u(t,s,l)}):wm(t,s,o)}function wm(t,s,o){s.status="fulfilled",s.value=o,Rm(s),t.state=o,s=t.pending,s!==null&&(o=s.next,o===s?t.pending=null:(o=o.next,s.next=o,xm(t,o)))}function $u(t,s,o){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=o,Rm(s),s=s.next;while(s!==l)}t.action=null}function Rm(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Nm(t,s){return s}function Mm(t,s){if(we){var o=He.formState;if(o!==null){e:{var l=ve;if(we){if(Ge){t:{for(var h=Ge,y=Zt;h.nodeType!==8;){if(!y){h=null;break t}if(h=jt(h.nextSibling),h===null){h=null;break t}}y=h.data,h=y==="F!"||y==="F"?h:null}if(h){Ge=jt(h.nextSibling),l=h.data==="F!";break e}}Zn(l)}l=!1}l&&(s=o[0])}}return o=Ct(),o.memoizedState=o.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:s},o.queue=l,o=Xm.bind(null,ve,l),l.dispatch=o,l=Ju(!1),y=ju.bind(null,ve,!1,l.queue),l=Ct(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,o=JT.bind(null,ve,h,y,o),h.dispatch=o,l.memoizedState=t,[s,o,!1]}function Im(t){var s=Ze();return Dm(s,qe,t)}function Dm(t,s,o){if(s=zu(t,s,Nm)[0],t=nr(Rn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ma(s)}catch(S){throw S===vs?Jo:S}else l=s;s=Ze();var h=s.queue,y=h.dispatch;return o!==s.memoizedState&&(ve.flags|=2048,Es(9,{destroy:void 0},$T.bind(null,h,o),null)),[l,y,t]}function $T(t,s){t.action=s}function Pm(t){var s=Ze(),o=qe;if(o!==null)return Dm(s,o,t);Ze(),s=s.memoizedState,o=Ze();var l=o.queue.dispatch;return o.memoizedState=t,[s,l,!1]}function Es(t,s,o,l){return t={tag:t,create:o,deps:l,inst:s,next:null},s=ve.updateQueue,s===null&&(s=er(),ve.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=t.next=t:(l=o.next,o.next=t,t.next=l,s.lastEffect=t),t}function Um(){return Ze().memoizedState}function ir(t,s,o,l){var h=Ct();ve.flags|=t,h.memoizedState=Es(1|s,{destroy:void 0},o,l===void 0?null:l)}function sr(t,s,o,l){var h=Ze();l=l===void 0?null:l;var y=h.memoizedState.inst;qe!==null&&l!==null&&Bu(l,qe.memoizedState.deps)?h.memoizedState=Es(s,y,o,l):(ve.flags|=t,h.memoizedState=Es(1|s,y,o,l))}function Lm(t,s){ir(8390656,8,t,s)}function Ku(t,s){sr(2048,8,t,s)}function KT(t){ve.flags|=4;var s=ve.updateQueue;if(s===null)s=er(),ve.updateQueue=s,s.events=[t];else{var o=s.events;o===null?s.events=[t]:o.push(t)}}function km(t){var s=Ze().memoizedState;return KT({ref:s,nextImpl:t}),function(){if((Ue&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function qm(t,s){return sr(4,2,t,s)}function Bm(t,s){return sr(4,4,t,s)}function Vm(t,s){if(typeof s=="function"){t=t();var o=s(t);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Om(t,s,o){o=o!=null?o.concat([t]):null,sr(4,4,Vm.bind(null,s,t),o)}function Xu(){}function Hm(t,s){var o=Ze();s=s===void 0?null:s;var l=o.memoizedState;return s!==null&&Bu(s,l[1])?l[0]:(o.memoizedState=[t,s],t)}function Gm(t,s){var o=Ze();s=s===void 0?null:s;var l=o.memoizedState;if(s!==null&&Bu(s,l[1]))return l[0];if(l=t(),Oi){Jn(!0);try{t()}finally{Jn(!1)}}return o.memoizedState=[l,s],l}function Qu(t,s,o){return o===void 0||(wn&1073741824)!==0&&(xe&261930)===0?t.memoizedState=s:(t.memoizedState=o,t=Fp(),ve.lanes|=t,oi|=t,o)}function Fm(t,s,o,l){return Lt(o,s)?o:Ss.current!==null?(t=Qu(t,o,l),Lt(t,s)||(nt=!0),t):(wn&42)===0||(wn&1073741824)!==0&&(xe&261930)===0?(nt=!0,t.memoizedState=o):(t=Fp(),ve.lanes|=t,oi|=t,s)}function zm(t,s,o,l,h){var y=j.p;j.p=y!==0&&8>y?y:8;var S=V.T,A={};V.T=A,ju(t,!1,s,o);try{var b=h(),B=V.S;if(B!==null&&B(A,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var Y=FT(b,l);Ia(t,s,Y,Ht(t))}else Ia(t,s,l,Ht(t))}catch(K){Ia(t,s,{then:function(){},status:"rejected",reason:K},Ht())}finally{j.p=y,S!==null&&A.types!==null&&(S.types=A.types),V.T=S}}function XT(){}function Zu(t,s,o,l){if(t.tag!==5)throw Error(a(476));var h=Ym(t).queue;zm(t,h,s,ue,o===null?XT:function(){return Jm(t),o(l)})}function Ym(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:ue},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:o},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Jm(t){var s=Ym(t);s.next===null&&(s=t.alternate.memoizedState),Ia(t,s.next.queue,{},Ht())}function Wu(){return mt(Ka)}function $m(){return Ze().memoizedState}function Km(){return Ze().memoizedState}function QT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ht();t=ei(o);var l=ti(s,t,o);l!==null&&(Mt(l,s,o),ba(l,s,o)),s={cache:wu()},t.payload=s;return}s=s.return}}function ZT(t,s,o){var l=Ht();o={lane:l,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ar(t)?Qm(s,o):(o=gu(t,s,o,l),o!==null&&(Mt(o,t,l),Zm(o,s,l)))}function Xm(t,s,o){var l=Ht();Ia(t,s,o,l)}function Ia(t,s,o,l){var h={lane:l,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ar(t))Qm(s,h);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,A=y(S,o);if(h.hasEagerState=!0,h.eagerState=A,Lt(A,S))return Vo(t,s,h,0),He===null&&Bo(),!1}catch{}finally{}if(o=gu(t,s,h,l),o!==null)return Mt(o,t,l),Zm(o,s,l),!0}return!1}function ju(t,s,o,l){if(l={lane:2,revertLane:Ic(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ar(t)){if(s)throw Error(a(479))}else s=gu(t,o,l,2),s!==null&&Mt(s,t,2)}function ar(t){var s=t.alternate;return t===ve||s!==null&&s===ve}function Qm(t,s){Ts=Wo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function Zm(t,s,o){if((o&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,o|=l,s.lanes=o,nh(t,o)}}var Da={readContext:mt,use:tr,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Da.useEffectEvent=Ke;var Wm={readContext:mt,use:tr,useCallback:function(t,s){return Ct().memoizedState=[t,s===void 0?null:s],t},useContext:mt,useEffect:Lm,useImperativeHandle:function(t,s,o){o=o!=null?o.concat([t]):null,ir(4194308,4,Vm.bind(null,s,t),o)},useLayoutEffect:function(t,s){return ir(4194308,4,t,s)},useInsertionEffect:function(t,s){ir(4,2,t,s)},useMemo:function(t,s){var o=Ct();s=s===void 0?null:s;var l=t();if(Oi){Jn(!0);try{t()}finally{Jn(!1)}}return o.memoizedState=[l,s],l},useReducer:function(t,s,o){var l=Ct();if(o!==void 0){var h=o(s);if(Oi){Jn(!0);try{o(s)}finally{Jn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ZT.bind(null,ve,t),[l.memoizedState,t]},useRef:function(t){var s=Ct();return t={current:t},s.memoizedState=t},useState:function(t){t=Ju(t);var s=t.queue,o=Xm.bind(null,ve,s);return s.dispatch=o,[t.memoizedState,o]},useDebugValue:Xu,useDeferredValue:function(t,s){var o=Ct();return Qu(o,t,s)},useTransition:function(){var t=Ju(!1);return t=zm.bind(null,ve,t.queue,!0,!1),Ct().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,o){var l=ve,h=Ct();if(we){if(o===void 0)throw Error(a(407));o=o()}else{if(o=s(),He===null)throw Error(a(349));(xe&127)!==0||_m(l,s,o)}h.memoizedState=o;var y={value:o,getSnapshot:s};return h.queue=y,Lm(Tm.bind(null,l,y,t),[t]),l.flags|=2048,Es(9,{destroy:void 0},Sm.bind(null,l,y,o,s),null),o},useId:function(){var t=Ct(),s=He.identifierPrefix;if(we){var o=hn,l=fn;o=(l&~(1<<32-Ut(l)-1)).toString(32)+o,s="_"+s+"R_"+o,o=jo++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=zT++,s="_"+s+"r_"+o.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Wu,useFormState:Mm,useActionState:Mm,useOptimistic:function(t){var s=Ct();s.memoizedState=s.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=ju.bind(null,ve,!0,o),o.dispatch=s,[t,s]},useMemoCache:Fu,useCacheRefresh:function(){return Ct().memoizedState=QT.bind(null,ve)},useEffectEvent:function(t){var s=Ct(),o={impl:t};return s.memoizedState=o,function(){if((Ue&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},ec={readContext:mt,use:tr,useCallback:Hm,useContext:mt,useEffect:Ku,useImperativeHandle:Om,useInsertionEffect:qm,useLayoutEffect:Bm,useMemo:Gm,useReducer:nr,useRef:Um,useState:function(){return nr(Rn)},useDebugValue:Xu,useDeferredValue:function(t,s){var o=Ze();return Fm(o,qe.memoizedState,t,s)},useTransition:function(){var t=nr(Rn)[0],s=Ze().memoizedState;return[typeof t=="boolean"?t:Ma(t),s]},useSyncExternalStore:vm,useId:$m,useHostTransitionStatus:Wu,useFormState:Im,useActionState:Im,useOptimistic:function(t,s){var o=Ze();return Am(o,qe,t,s)},useMemoCache:Fu,useCacheRefresh:Km};ec.useEffectEvent=km;var jm={readContext:mt,use:tr,useCallback:Hm,useContext:mt,useEffect:Ku,useImperativeHandle:Om,useInsertionEffect:qm,useLayoutEffect:Bm,useMemo:Gm,useReducer:Yu,useRef:Um,useState:function(){return Yu(Rn)},useDebugValue:Xu,useDeferredValue:function(t,s){var o=Ze();return qe===null?Qu(o,t,s):Fm(o,qe.memoizedState,t,s)},useTransition:function(){var t=Yu(Rn)[0],s=Ze().memoizedState;return[typeof t=="boolean"?t:Ma(t),s]},useSyncExternalStore:vm,useId:$m,useHostTransitionStatus:Wu,useFormState:Pm,useActionState:Pm,useOptimistic:function(t,s){var o=Ze();return qe!==null?Am(o,qe,t,s):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Fu,useCacheRefresh:Km};jm.useEffectEvent=km;function tc(t,s,o,l){s=t.memoizedState,o=o(l,s),o=o==null?s:_({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var nc={enqueueSetState:function(t,s,o){t=t._reactInternals;var l=Ht(),h=ei(l);h.payload=s,o!=null&&(h.callback=o),s=ti(t,h,l),s!==null&&(Mt(s,t,l),ba(s,t,l))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var l=Ht(),h=ei(l);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=ti(t,h,l),s!==null&&(Mt(s,t,l),ba(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=Ht(),l=ei(o);l.tag=2,s!=null&&(l.callback=s),s=ti(t,l,o),s!==null&&(Mt(s,t,o),ba(s,t,o))}};function ep(t,s,o,l,h,y,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,y,S):s.prototype&&s.prototype.isPureReactComponent?!va(o,l)||!va(h,y):!0}function tp(t,s,o,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,l),s.state!==t&&nc.enqueueReplaceState(s,s.state,null)}function Hi(t,s){var o=s;if("ref"in s){o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}if(t=t.defaultProps){o===s&&(o=_({},o));for(var h in t)o[h]===void 0&&(o[h]=t[h])}return o}function np(t){qo(t)}function ip(t){console.error(t)}function sp(t){qo(t)}function or(t,s){try{var o=t.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function ap(t,s,o){try{var l=t.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ic(t,s,o){return o=ei(o),o.tag=3,o.payload={element:null},o.callback=function(){or(t,s)},o}function op(t){return t=ei(t),t.tag=3,t}function rp(t,s,o,l){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var y=l.value;t.payload=function(){return h(y)},t.callback=function(){ap(s,o,l)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){ap(s,o,l),typeof h!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function WT(t,s,o,l,h){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=o.alternate,s!==null&&ps(s,o,h,!0),o=qt.current,o!==null){switch(o.tag){case 31:case 13:return Wt===null?vr():o.alternate===null&&Xe===0&&(Xe=3),o.flags&=-257,o.flags|=65536,o.lanes=h,l===$o?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([l]):s.add(l),Rc(t,l,h)),!1;case 22:return o.flags|=65536,l===$o?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([l]):o.add(l)),Rc(t,l,h)),!1}throw Error(a(435,o.tag))}return Rc(t,l,h),vr(),!1}if(we)return s=qt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Cu&&(t=Error(a(422),{cause:l}),Ta(Kt(t,o)))):(l!==Cu&&(s=Error(a(423),{cause:l}),Ta(Kt(s,o))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Kt(l,o),h=ic(t.stateNode,l,h),Pu(t,h),Xe!==4&&(Xe=2)),!1;var y=Error(a(520),{cause:l});if(y=Kt(y,o),Oa===null?Oa=[y]:Oa.push(y),Xe!==4&&(Xe=2),s===null)return!0;l=Kt(l,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,t=h&-h,o.lanes|=t,t=ic(o.stateNode,l,t),Pu(o,t),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ri===null||!ri.has(y))))return o.flags|=65536,h&=-h,o.lanes|=h,h=op(h),rp(h,t,o,l),Pu(o,h),!1}o=o.return}while(o!==null);return!1}var sc=Error(a(461)),nt=!1;function pt(t,s,o,l){s.child=t===null?dm(s,null,o,l):Vi(s,t.child,o,l)}function lp(t,s,o,l,h){o=o.render;var y=s.ref;if("ref"in l){var S={};for(var A in l)A!=="ref"&&(S[A]=l[A])}else S=l;return Li(s),l=Vu(t,s,o,S,y,h),A=Ou(),t!==null&&!nt?(Hu(t,s,h),Nn(t,s,h)):(we&&A&&Su(s),s.flags|=1,pt(t,s,l,h),s.child)}function up(t,s,o,l,h){if(t===null){var y=o.type;return typeof y=="function"&&!yu(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,cp(t,s,y,l,h)):(t=Ho(o.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,!fc(t,h)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:va,o(S,l)&&t.ref===s.ref)return Nn(t,s,h)}return s.flags|=1,t=En(y,l),t.ref=s.ref,t.return=s,s.child=t}function cp(t,s,o,l,h){if(t!==null){var y=t.memoizedProps;if(va(y,l)&&t.ref===s.ref)if(nt=!1,s.pendingProps=l=y,fc(t,h))(t.flags&131072)!==0&&(nt=!0);else return s.lanes=t.lanes,Nn(t,s,h)}return ac(t,s,o,l,h)}function dp(t,s,o,l){var h=l.children,y=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~y}else l=0,s.child=null;return fp(t,s,y,o,l)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yo(s,y!==null?y.cachePool:null),y!==null?mm(s,y):Lu(),pm(s);else return l=s.lanes=536870912,fp(t,s,y!==null?y.baseLanes|o:o,o,l)}else y!==null?(Yo(s,y.cachePool),mm(s,y),ii(),s.memoizedState=null):(t!==null&&Yo(s,null),Lu(),ii());return pt(t,s,h,o),s.child}function Pa(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fp(t,s,o,l,h){var y=Nu();return y=y===null?null:{parent:et._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},t!==null&&Yo(s,null),Lu(),pm(s),t!==null&&ps(t,s,l,!0),s.childLanes=h,null}function rr(t,s){return s=ur({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function hp(t,s,o){return Vi(s,t.child,null,o),t=rr(s,s.pendingProps),t.flags|=2,Bt(s),s.memoizedState=null,t}function jT(t,s,o){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(we){if(l.mode==="hidden")return t=rr(s,l),s.lanes=536870912,Pa(null,t);if(qu(s),(t=Ge)?(t=xg(t,Zt),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Xn!==null?{id:fn,overflow:hn}:null,retryLane:536870912,hydrationErrors:null},o=Qh(t),o.return=s,s.child=o,ht=s,Ge=null)):t=null,t===null)throw Zn(s);return s.lanes=536870912,null}return rr(s,l)}var y=t.memoizedState;if(y!==null){var S=y.dehydrated;if(qu(s),h)if(s.flags&256)s.flags&=-257,s=hp(t,s,o);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(nt||ps(t,s,o,!1),h=(o&t.childLanes)!==0,nt||h){if(l=He,l!==null&&(S=ih(l,o),S!==0&&S!==y.retryLane))throw y.retryLane=S,Ii(t,S),Mt(l,t,S),sc;vr(),s=hp(t,s,o)}else t=y.treeContext,Ge=jt(S.nextSibling),ht=s,we=!0,Qn=null,Zt=!1,t!==null&&jh(s,t),s=rr(s,l),s.flags|=4096;return s}return t=En(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function lr(t,s){var o=s.ref;if(o===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(t===null||t.ref!==o)&&(s.flags|=4194816)}}function ac(t,s,o,l,h){return Li(s),o=Vu(t,s,o,l,void 0,h),l=Ou(),t!==null&&!nt?(Hu(t,s,h),Nn(t,s,h)):(we&&l&&Su(s),s.flags|=1,pt(t,s,o,h),s.child)}function mp(t,s,o,l,h,y){return Li(s),s.updateQueue=null,o=ym(s,l,o,h),gm(t),l=Ou(),t!==null&&!nt?(Hu(t,s,y),Nn(t,s,y)):(we&&l&&Su(s),s.flags|=1,pt(t,s,o,y),s.child)}function pp(t,s,o,l,h){if(Li(s),s.stateNode===null){var y=ds,S=o.contextType;typeof S=="object"&&S!==null&&(y=mt(S)),y=new o(l,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=nc,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=l,y.state=s.memoizedState,y.refs={},Iu(s),S=o.contextType,y.context=typeof S=="object"&&S!==null?mt(S):ds,y.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(tc(s,o,S,l),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&nc.enqueueReplaceState(y,y.state,null),Ra(s,l,y,h),wa(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){y=s.stateNode;var A=s.memoizedProps,b=Hi(o,A);y.props=b;var B=y.context,Y=o.contextType;S=ds,typeof Y=="object"&&Y!==null&&(S=mt(Y));var K=o.getDerivedStateFromProps;Y=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,Y||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||B!==S)&&tp(s,y,l,S),jn=!1;var O=s.memoizedState;y.state=O,Ra(s,l,y,h),wa(),B=s.memoizedState,A||O!==B||jn?(typeof K=="function"&&(tc(s,o,K,l),B=s.memoizedState),(b=jn||ep(s,o,b,l,O,B,S))?(Y||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),y.props=l,y.state=B,y.context=S,l=b):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{y=s.stateNode,Du(t,s),S=s.memoizedProps,Y=Hi(o,S),y.props=Y,K=s.pendingProps,O=y.context,B=o.contextType,b=ds,typeof B=="object"&&B!==null&&(b=mt(B)),A=o.getDerivedStateFromProps,(B=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==K||O!==b)&&tp(s,y,l,b),jn=!1,O=s.memoizedState,y.state=O,Ra(s,l,y,h),wa();var H=s.memoizedState;S!==K||O!==H||jn||t!==null&&t.dependencies!==null&&Fo(t.dependencies)?(typeof A=="function"&&(tc(s,o,A,l),H=s.memoizedState),(Y=jn||ep(s,o,Y,l,O,H,b)||t!==null&&t.dependencies!==null&&Fo(t.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,H,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,H,b)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=H),y.props=l,y.state=H,y.context=b,l=Y):(typeof y.componentDidUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(s.flags|=1024),l=!1)}return y=l,lr(t,s),l=(s.flags&128)!==0,y||l?(y=s.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,t!==null&&l?(s.child=Vi(s,t.child,null,h),s.child=Vi(s,null,o,h)):pt(t,s,o,h),s.memoizedState=y.state,t=s.child):t=Nn(t,s,h),t}function gp(t,s,o,l){return Pi(),s.flags|=256,pt(t,s,o,l),s.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rc(t){return{baseLanes:t,cachePool:am()}}function lc(t,s,o){return t=t!==null?t.childLanes&~o:0,s&&(t|=Ot),t}function yp(t,s,o){var l=s.pendingProps,h=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=t!==null&&t.memoizedState===null?!1:(Qe.current&2)!==0),S&&(h=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,t===null){if(we){if(h?ni(s):ii(),(t=Ge)?(t=xg(t,Zt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Xn!==null?{id:fn,overflow:hn}:null,retryLane:536870912,hydrationErrors:null},o=Qh(t),o.return=s,s.child=o,ht=s,Ge=null)):t=null,t===null)throw Zn(s);return zc(t)?s.lanes=32:s.lanes=536870912,null}var A=l.children;return l=l.fallback,h?(ii(),h=s.mode,A=ur({mode:"hidden",children:A},h),l=Di(l,h,o,null),A.return=s,l.return=s,A.sibling=l,s.child=A,l=s.child,l.memoizedState=rc(o),l.childLanes=lc(t,S,o),s.memoizedState=oc,Pa(null,l)):(ni(s),uc(s,A))}var b=t.memoizedState;if(b!==null&&(A=b.dehydrated,A!==null)){if(y)s.flags&256?(ni(s),s.flags&=-257,s=cc(t,s,o)):s.memoizedState!==null?(ii(),s.child=t.child,s.flags|=128,s=null):(ii(),A=l.fallback,h=s.mode,l=ur({mode:"visible",children:l.children},h),A=Di(A,h,o,null),A.flags|=2,l.return=s,A.return=s,l.sibling=A,s.child=l,Vi(s,t.child,null,o),l=s.child,l.memoizedState=rc(o),l.childLanes=lc(t,S,o),s.memoizedState=oc,s=Pa(null,l));else if(ni(s),zc(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var B=S.dgst;S=B,l=Error(a(419)),l.stack="",l.digest=S,Ta({value:l,source:null,stack:null}),s=cc(t,s,o)}else if(nt||ps(t,s,o,!1),S=(o&t.childLanes)!==0,nt||S){if(S=He,S!==null&&(l=ih(S,o),l!==0&&l!==b.retryLane))throw b.retryLane=l,Ii(t,l),Mt(S,t,l),sc;Fc(A)||vr(),s=cc(t,s,o)}else Fc(A)?(s.flags|=192,s.child=t.child,s=null):(t=b.treeContext,Ge=jt(A.nextSibling),ht=s,we=!0,Qn=null,Zt=!1,t!==null&&jh(s,t),s=uc(s,l.children),s.flags|=4096);return s}return h?(ii(),A=l.fallback,h=s.mode,b=t.child,B=b.sibling,l=En(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&65011712,B!==null?A=En(B,A):(A=Di(A,h,o,null),A.flags|=2),A.return=s,l.return=s,l.sibling=A,s.child=l,Pa(null,l),l=s.child,A=t.child.memoizedState,A===null?A=rc(o):(h=A.cachePool,h!==null?(b=et._currentValue,h=h.parent!==b?{parent:b,pool:b}:h):h=am(),A={baseLanes:A.baseLanes|o,cachePool:h}),l.memoizedState=A,l.childLanes=lc(t,S,o),s.memoizedState=oc,Pa(t.child,l)):(ni(s),o=t.child,t=o.sibling,o=En(o,{mode:"visible",children:l.children}),o.return=s,o.sibling=null,t!==null&&(S=s.deletions,S===null?(s.deletions=[t],s.flags|=16):S.push(t)),s.child=o,s.memoizedState=null,o)}function uc(t,s){return s=ur({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ur(t,s){return t=kt(22,t,null,s),t.lanes=0,t}function cc(t,s,o){return Vi(s,t.child,null,o),t=uc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function vp(t,s,o){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),xu(t.return,s,o)}function dc(t,s,o,l,h,y){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:h,treeForkCount:y}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=l,S.tail=o,S.tailMode=h,S.treeForkCount=y)}function _p(t,s,o){var l=s.pendingProps,h=l.revealOrder,y=l.tail;l=l.children;var S=Qe.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,ee(Qe,S),pt(t,s,l,o),l=we?Sa:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vp(t,o,s);else if(t.tag===19)vp(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(o=s.child,h=null;o!==null;)t=o.alternate,t!==null&&Zo(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),dc(s,!1,h,o,y,l);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Zo(t)===null){s.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}dc(s,!0,o,null,y,l);break;case"together":dc(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Nn(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),oi|=s.lanes,(o&s.childLanes)===0)if(t!==null){if(ps(t,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,o=En(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=En(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function fc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Fo(t)))}function eC(t,s,o){switch(s.tag){case 3:lt(s,s.stateNode.containerInfo),Wn(s,et,t.memoizedState.cache),Pi();break;case 27:case 5:je(s);break;case 4:lt(s,s.stateNode.containerInfo);break;case 10:Wn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,qu(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ni(s),s.flags|=128,null):(o&s.child.childLanes)!==0?yp(t,s,o):(ni(s),t=Nn(t,s,o),t!==null?t.sibling:null);ni(s);break;case 19:var h=(t.flags&128)!==0;if(l=(o&s.childLanes)!==0,l||(ps(t,s,o,!1),l=(o&s.childLanes)!==0),h){if(l)return _p(t,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Qe,Qe.current),l)break;return null;case 22:return s.lanes=0,dp(t,s,o,s.pendingProps);case 24:Wn(s,et,t.memoizedState.cache)}return Nn(t,s,o)}function Sp(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps)nt=!0;else{if(!fc(t,o)&&(s.flags&128)===0)return nt=!1,eC(t,s,o);nt=(t.flags&131072)!==0}else nt=!1,we&&(s.flags&1048576)!==0&&Wh(s,Sa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=qi(s.elementType),s.type=t,typeof t=="function")yu(t)?(l=Hi(t,l),s.tag=1,s=pp(null,s,t,l,o)):(s.tag=0,s=ac(null,s,t,l,o));else{if(t!=null){var h=t.$$typeof;if(h===L){s.tag=11,s=lp(null,s,t,l,o);break e}else if(h===I){s.tag=14,s=up(null,s,t,l,o);break e}}throw s=de(t)||t,Error(a(306,s,""))}}return s;case 0:return ac(t,s,s.type,s.pendingProps,o);case 1:return l=s.type,h=Hi(l,s.pendingProps),pp(t,s,l,h,o);case 3:e:{if(lt(s,s.stateNode.containerInfo),t===null)throw Error(a(387));l=s.pendingProps;var y=s.memoizedState;h=y.element,Du(t,s),Ra(s,l,null,o);var S=s.memoizedState;if(l=S.cache,Wn(s,et,l),l!==y.cache&&bu(s,[et],o,!0),wa(),l=S.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=gp(t,s,l,o);break e}else if(l!==h){h=Kt(Error(a(424)),s),Ta(h),s=gp(t,s,l,o);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ge=jt(t.firstChild),ht=s,we=!0,Qn=null,Zt=!0,o=dm(s,null,l,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Pi(),l===h){s=Nn(t,s,o);break e}pt(t,s,l,o)}s=s.child}return s;case 26:return lr(t,s),t===null?(o=Ig(s.type,null,s.pendingProps,null))?s.memoizedState=o:we||(o=s.type,t=s.pendingProps,l=xr(Se.current).createElement(o),l[ft]=s,l[At]=t,gt(l,o,t),ut(l),s.stateNode=l):s.memoizedState=Ig(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return je(s),t===null&&we&&(l=s.stateNode=Rg(s.type,s.pendingProps,Se.current),ht=s,Zt=!0,h=Ge,di(s.type)?(Yc=h,Ge=jt(l.firstChild)):Ge=h),pt(t,s,s.pendingProps.children,o),lr(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&we&&((h=l=Ge)&&(l=MC(l,s.type,s.pendingProps,Zt),l!==null?(s.stateNode=l,ht=s,Ge=jt(l.firstChild),Zt=!1,h=!0):h=!1),h||Zn(s)),je(s),h=s.type,y=s.pendingProps,S=t!==null?t.memoizedProps:null,l=y.children,Oc(h,y)?l=null:S!==null&&Oc(h,S)&&(s.flags|=32),s.memoizedState!==null&&(h=Vu(t,s,YT,null,null,o),Ka._currentValue=h),lr(t,s),pt(t,s,l,o),s.child;case 6:return t===null&&we&&((t=o=Ge)&&(o=IC(o,s.pendingProps,Zt),o!==null?(s.stateNode=o,ht=s,Ge=null,t=!0):t=!1),t||Zn(s)),null;case 13:return yp(t,s,o);case 4:return lt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Vi(s,null,l,o):pt(t,s,l,o),s.child;case 11:return lp(t,s,s.type,s.pendingProps,o);case 7:return pt(t,s,s.pendingProps,o),s.child;case 8:return pt(t,s,s.pendingProps.children,o),s.child;case 12:return pt(t,s,s.pendingProps.children,o),s.child;case 10:return l=s.pendingProps,Wn(s,s.type,l.value),pt(t,s,l.children,o),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Li(s),h=mt(h),l=l(h),s.flags|=1,pt(t,s,l,o),s.child;case 14:return up(t,s,s.type,s.pendingProps,o);case 15:return cp(t,s,s.type,s.pendingProps,o);case 19:return _p(t,s,o);case 31:return jT(t,s,o);case 22:return dp(t,s,o,s.pendingProps);case 24:return Li(s),l=mt(et),t===null?(h=Nu(),h===null&&(h=He,y=wu(),h.pooledCache=y,y.refCount++,y!==null&&(h.pooledCacheLanes|=o),h=y),s.memoizedState={parent:l,cache:h},Iu(s),Wn(s,et,h)):((t.lanes&o)!==0&&(Du(t,s),Ra(s,null,null,o),wa()),h=t.memoizedState,y=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Wn(s,et,l)):(l=y.cache,Wn(s,et,l),l!==h.cache&&bu(s,[et],o,!0))),pt(t,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Mn(t){t.flags|=4}function hc(t,s,o,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if($p())t.flags|=8192;else throw Bi=$o,Mu}else t.flags&=-16777217}function Tp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!kg(s))if($p())t.flags|=8192;else throw Bi=$o,Mu}function cr(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?eh():536870912,t.lanes|=s,ws|=s)}function Ua(t,s){if(!we)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Fe(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,l=0;if(s)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=o,s}function tC(t,s,o){var l=s.pendingProps;switch(Tu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(s),null;case 1:return Fe(s),null;case 3:return o=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),bn(et),ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(ms(s)?Mn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Eu())),Fe(s),null;case 26:var h=s.type,y=s.memoizedState;return t===null?(Mn(s),y!==null?(Fe(s),Tp(s,y)):(Fe(s),hc(s,h,null,l,o))):y?y!==t.memoizedState?(Mn(s),Fe(s),Tp(s,y)):(Fe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Mn(s),Fe(s),hc(s,h,t,l,o)),null;case 27:if(Zi(s),o=Se.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Mn(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return Fe(s),null}t=se.current,ms(s)?em(s):(t=Rg(h,l,o),s.stateNode=t,Mn(s))}return Fe(s),null;case 5:if(Zi(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Mn(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return Fe(s),null}if(y=se.current,ms(s))em(s);else{var S=xr(Se.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof l.is=="string"?S.createElement("select",{is:l.is}):S.createElement("select"),l.multiple?y.multiple=!0:l.size&&(y.size=l.size);break;default:y=typeof l.is=="string"?S.createElement(h,{is:l.is}):S.createElement(h)}}y[ft]=s,y[At]=l;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=y;e:switch(gt(y,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Mn(s)}}return Fe(s),hc(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,o),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Mn(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(a(166));if(t=Se.current,ms(s)){if(t=s.stateNode,o=s.memoizedProps,l=null,h=ht,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[ft]=s,t=!!(t.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||yg(t.nodeValue,o)),t||Zn(s,!0)}else t=xr(t).createTextNode(l),t[ft]=s,s.stateNode=t}return Fe(s),null;case 31:if(o=s.memoizedState,t===null||t.memoizedState!==null){if(l=ms(s),o!==null){if(t===null){if(!l)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[ft]=s}else Pi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),t=!1}else o=Eu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return s.flags&256?(Bt(s),s):(Bt(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Fe(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ms(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[ft]=s}else Pi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),h=!1}else h=Eu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Bt(s),s):(Bt(s),null)}return Bt(s),(s.flags&128)!==0?(s.lanes=o,s):(o=l!==null,t=t!==null&&t.memoizedState!==null,o&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==h&&(l.flags|=2048)),o!==t&&o&&(s.child.flags|=8192),cr(s,s.updateQueue),Fe(s),null);case 4:return ae(),t===null&&Lc(s.stateNode.containerInfo),Fe(s),null;case 10:return bn(s.type),Fe(s),null;case 19:if($(Qe),l=s.memoizedState,l===null)return Fe(s),null;if(h=(s.flags&128)!==0,y=l.rendering,y===null)if(h)Ua(l,!1);else{if(Xe!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(y=Zo(t),y!==null){for(s.flags|=128,Ua(l,!1),t=y.updateQueue,s.updateQueue=t,cr(s,t),s.subtreeFlags=0,t=o,o=s.child;o!==null;)Xh(o,t),o=o.sibling;return ee(Qe,Qe.current&1|2),we&&An(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Dt()>pr&&(s.flags|=128,h=!0,Ua(l,!1),s.lanes=4194304)}else{if(!h)if(t=Zo(y),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,cr(s,t),Ua(l,!0),l.tail===null&&l.tailMode==="hidden"&&!y.alternate&&!we)return Fe(s),null}else 2*Dt()-l.renderingStartTime>pr&&o!==536870912&&(s.flags|=128,h=!0,Ua(l,!1),s.lanes=4194304);l.isBackwards?(y.sibling=s.child,s.child=y):(t=l.last,t!==null?t.sibling=y:s.child=y,l.last=y)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Dt(),t.sibling=null,o=Qe.current,ee(Qe,h?o&1|2:o&1),we&&An(s,l.treeForkCount),t):(Fe(s),null);case 22:case 23:return Bt(s),ku(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(o&536870912)!==0&&(s.flags&128)===0&&(Fe(s),s.subtreeFlags&6&&(s.flags|=8192)):Fe(s),o=s.updateQueue,o!==null&&cr(s,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==o&&(s.flags|=2048),t!==null&&$(ki),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),bn(et),Fe(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function nC(t,s){switch(Tu(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return bn(et),ae(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Zi(s),null;case 31:if(s.memoizedState!==null){if(Bt(s),s.alternate===null)throw Error(a(340));Pi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Bt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Pi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return $(Qe),null;case 4:return ae(),null;case 10:return bn(s.type),null;case 22:case 23:return Bt(s),ku(),t!==null&&$(ki),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return bn(et),null;case 25:return null;default:return null}}function Cp(t,s){switch(Tu(s),s.tag){case 3:bn(et),ae();break;case 26:case 27:case 5:Zi(s);break;case 4:ae();break;case 31:s.memoizedState!==null&&Bt(s);break;case 13:Bt(s);break;case 19:$(Qe);break;case 10:bn(s.type);break;case 22:case 23:Bt(s),ku(),t!==null&&$(ki);break;case 24:bn(et)}}function La(t,s){try{var o=s.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var h=l.next;o=h;do{if((o.tag&t)===t){l=void 0;var y=o.create,S=o.inst;l=y(),S.destroy=l}o=o.next}while(o!==h)}}catch(A){ke(s,s.return,A)}}function si(t,s,o){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var y=h.next;l=y;do{if((l.tag&t)===t){var S=l.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,h=s;var b=o,B=A;try{B()}catch(Y){ke(h,b,Y)}}}l=l.next}while(l!==y)}}catch(Y){ke(s,s.return,Y)}}function Ep(t){var s=t.updateQueue;if(s!==null){var o=t.stateNode;try{hm(s,o)}catch(l){ke(t,t.return,l)}}}function Ap(t,s,o){o.props=Hi(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(l){ke(t,s,l)}}function ka(t,s){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof o=="function"?t.refCleanup=o(l):o.current=l}}catch(h){ke(t,s,h)}}function mn(t,s){var o=t.ref,l=t.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(h){ke(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){ke(t,s,h)}else o.current=null}function xp(t){var s=t.type,o=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(h){ke(t,t.return,h)}}function mc(t,s,o){try{var l=t.stateNode;AC(l,t.type,o,s),l[At]=s}catch(h){ke(t,t.return,h)}}function bp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&di(t.type)||t.tag===4}function pc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&di(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,s,o){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(t),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Tn));else if(l!==4&&(l===27&&di(t.type)&&(o=t.stateNode,s=null),t=t.child,t!==null))for(gc(t,s,o),t=t.sibling;t!==null;)gc(t,s,o),t=t.sibling}function dr(t,s,o){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(l!==4&&(l===27&&di(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(dr(t,s,o),t=t.sibling;t!==null;)dr(t,s,o),t=t.sibling}function wp(t){var s=t.stateNode,o=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);gt(s,l,o),s[ft]=t,s[At]=o}catch(y){ke(t,t.return,y)}}var In=!1,it=!1,yc=!1,Rp=typeof WeakSet=="function"?WeakSet:Set,ct=null;function iC(t,s){if(t=t.containerInfo,Bc=Dr,t=Oh(t),cu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var h=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,A=-1,b=-1,B=0,Y=0,K=t,O=null;t:for(;;){for(var H;K!==o||h!==0&&K.nodeType!==3||(A=S+h),K!==y||l!==0&&K.nodeType!==3||(b=S+l),K.nodeType===3&&(S+=K.nodeValue.length),(H=K.firstChild)!==null;)O=K,K=H;for(;;){if(K===t)break t;if(O===o&&++B===h&&(A=S),O===y&&++Y===l&&(b=S),(H=K.nextSibling)!==null)break;K=O,O=K.parentNode}K=H}o=A===-1||b===-1?null:{start:A,end:b}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vc={focusedElem:t,selectionRange:o},Dr=!1,ct=s;ct!==null;)if(s=ct,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ct=t;else for(;ct!==null;){switch(s=ct,y=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)h=t[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,o=s,h=y.memoizedProps,y=y.memoizedState,l=o.stateNode;try{var ie=Hi(o.type,h);t=l.getSnapshotBeforeUpdate(ie,y),l.__reactInternalSnapshotBeforeUpdate=t}catch(ce){ke(o,o.return,ce)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,o=t.nodeType,o===9)Gc(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,ct=t;break}ct=s.return}}function Np(t,s,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:Pn(t,o),l&4&&La(5,o);break;case 1:if(Pn(t,o),l&4)if(t=o.stateNode,s===null)try{t.componentDidMount()}catch(S){ke(o,o.return,S)}else{var h=Hi(o.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(S){ke(o,o.return,S)}}l&64&&Ep(o),l&512&&ka(o,o.return);break;case 3:if(Pn(t,o),l&64&&(t=o.updateQueue,t!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{hm(t,s)}catch(S){ke(o,o.return,S)}}break;case 27:s===null&&l&4&&wp(o);case 26:case 5:Pn(t,o),s===null&&l&4&&xp(o),l&512&&ka(o,o.return);break;case 12:Pn(t,o);break;case 31:Pn(t,o),l&4&&Dp(t,o);break;case 13:Pn(t,o),l&4&&Pp(t,o),l&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=fC.bind(null,o),DC(t,o))));break;case 22:if(l=o.memoizedState!==null||In,!l){s=s!==null&&s.memoizedState!==null||it,h=In;var y=it;In=l,(it=s)&&!y?Un(t,o,(o.subtreeFlags&8772)!==0):Pn(t,o),In=h,it=y}break;case 30:break;default:Pn(t,o)}}function Mp(t){var s=t.alternate;s!==null&&(t.alternate=null,Mp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&$l(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,bt=!1;function Dn(t,s,o){for(o=o.child;o!==null;)Ip(t,s,o),o=o.sibling}function Ip(t,s,o){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(oa,o)}catch{}switch(o.tag){case 26:it||mn(o,s),Dn(t,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:it||mn(o,s);var l=Ye,h=bt;di(o.type)&&(Ye=o.stateNode,bt=!1),Dn(t,s,o),Ya(o.stateNode),Ye=l,bt=h;break;case 5:it||mn(o,s);case 6:if(l=Ye,h=bt,Ye=null,Dn(t,s,o),Ye=l,bt=h,Ye!==null)if(bt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(o.stateNode)}catch(y){ke(o,s,y)}else try{Ye.removeChild(o.stateNode)}catch(y){ke(o,s,y)}break;case 18:Ye!==null&&(bt?(t=Ye,Eg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),Ls(t)):Eg(Ye,o.stateNode));break;case 4:l=Ye,h=bt,Ye=o.stateNode.containerInfo,bt=!0,Dn(t,s,o),Ye=l,bt=h;break;case 0:case 11:case 14:case 15:si(2,o,s),it||si(4,o,s),Dn(t,s,o);break;case 1:it||(mn(o,s),l=o.stateNode,typeof l.componentWillUnmount=="function"&&Ap(o,s,l)),Dn(t,s,o);break;case 21:Dn(t,s,o);break;case 22:it=(l=it)||o.memoizedState!==null,Dn(t,s,o),it=l;break;default:Dn(t,s,o)}}function Dp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ls(t)}catch(o){ke(s,s.return,o)}}}function Pp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ls(t)}catch(o){ke(s,s.return,o)}}function sC(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Rp),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Rp),s;default:throw Error(a(435,t.tag))}}function fr(t,s){var o=sC(t);s.forEach(function(l){if(!o.has(l)){o.add(l);var h=hC.bind(null,t,l);l.then(h,h)}})}function wt(t,s){var o=s.deletions;if(o!==null)for(var l=0;l<o.length;l++){var h=o[l],y=t,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(di(A.type)){Ye=A.stateNode,bt=!1;break e}break;case 5:Ye=A.stateNode,bt=!1;break e;case 3:case 4:Ye=A.stateNode.containerInfo,bt=!0;break e}A=A.return}if(Ye===null)throw Error(a(160));Ip(y,S,h),Ye=null,bt=!1,y=h.alternate,y!==null&&(y.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Up(s,t),s=s.sibling}var on=null;function Up(t,s){var o=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wt(s,t),Rt(t),l&4&&(si(3,t,t.return),La(3,t),si(5,t,t.return));break;case 1:wt(s,t),Rt(t),l&512&&(it||o===null||mn(o,o.return)),l&64&&In&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var h=on;if(wt(s,t),Rt(t),l&512&&(it||o===null||mn(o,o.return)),l&4){var y=o!==null?o.memoizedState:null;if(l=t.memoizedState,o===null)if(l===null)if(t.stateNode===null){e:{l=t.type,o=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":y=h.getElementsByTagName("title")[0],(!y||y[ua]||y[ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=h.createElement(l),h.head.insertBefore(y,h.querySelector("head > title"))),gt(y,l,o),y[ft]=t,ut(y),l=y;break e;case"link":var S=Ug("link","href",h).get(l+(o.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(A,1);break t}}y=h.createElement(l),gt(y,l,o),h.head.appendChild(y);break;case"meta":if(S=Ug("meta","content",h).get(l+(o.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(A,1);break t}}y=h.createElement(l),gt(y,l,o),h.head.appendChild(y);break;default:throw Error(a(468,l))}y[ft]=t,ut(y),l=y}t.stateNode=l}else Lg(h,t.type,t.stateNode);else t.stateNode=Pg(h,l,t.memoizedProps);else y!==l?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,l===null?Lg(h,t.type,t.stateNode):Pg(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&mc(t,t.memoizedProps,o.memoizedProps)}break;case 27:wt(s,t),Rt(t),l&512&&(it||o===null||mn(o,o.return)),o!==null&&l&4&&mc(t,t.memoizedProps,o.memoizedProps);break;case 5:if(wt(s,t),Rt(t),l&512&&(it||o===null||mn(o,o.return)),t.flags&32){h=t.stateNode;try{ss(h,"")}catch(ie){ke(t,t.return,ie)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,mc(t,h,o!==null?o.memoizedProps:h)),l&1024&&(yc=!0);break;case 6:if(wt(s,t),Rt(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,o=t.stateNode;try{o.nodeValue=l}catch(ie){ke(t,t.return,ie)}}break;case 3:if(Rr=null,h=on,on=br(s.containerInfo),wt(s,t),on=h,Rt(t),l&4&&o!==null&&o.memoizedState.isDehydrated)try{Ls(s.containerInfo)}catch(ie){ke(t,t.return,ie)}yc&&(yc=!1,Lp(t));break;case 4:l=on,on=br(t.stateNode.containerInfo),wt(s,t),Rt(t),on=l;break;case 12:wt(s,t),Rt(t);break;case 31:wt(s,t),Rt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fr(t,l)));break;case 13:wt(s,t),Rt(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(mr=Dt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fr(t,l)));break;case 22:h=t.memoizedState!==null;var b=o!==null&&o.memoizedState!==null,B=In,Y=it;if(In=B||h,it=Y||b,wt(s,t),it=Y,In=B,Rt(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||b||In||it||Gi(t)),o=null,s=t;;){if(s.tag===5||s.tag===26){if(o===null){b=o=s;try{if(y=b.stateNode,h)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=b.stateNode;var K=b.memoizedProps.style,O=K!=null&&K.hasOwnProperty("display")?K.display:null;A.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(ie){ke(b,b.return,ie)}}}else if(s.tag===6){if(o===null){b=s;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(ie){ke(b,b.return,ie)}}}else if(s.tag===18){if(o===null){b=s;try{var H=b.stateNode;h?Ag(H,!0):Ag(b.stateNode,!1)}catch(ie){ke(b,b.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,fr(t,o))));break;case 19:wt(s,t),Rt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,fr(t,l)));break;case 30:break;case 21:break;default:wt(s,t),Rt(t)}}function Rt(t){var s=t.flags;if(s&2){try{for(var o,l=t.return;l!==null;){if(bp(l)){o=l;break}l=l.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var h=o.stateNode,y=pc(t);dr(t,y,h);break;case 5:var S=o.stateNode;o.flags&32&&(ss(S,""),o.flags&=-33);var A=pc(t);dr(t,A,S);break;case 3:case 4:var b=o.stateNode.containerInfo,B=pc(t);gc(t,B,b);break;default:throw Error(a(161))}}catch(Y){ke(t,t.return,Y)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Lp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Lp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Pn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Np(t,s.alternate,s),s=s.sibling}function Gi(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:si(4,s,s.return),Gi(s);break;case 1:mn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Ap(s,s.return,o),Gi(s);break;case 27:Ya(s.stateNode);case 26:case 5:mn(s,s.return),Gi(s);break;case 22:s.memoizedState===null&&Gi(s);break;case 30:Gi(s);break;default:Gi(s)}t=t.sibling}}function Un(t,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Un(h,y,o),La(4,y);break;case 1:if(Un(h,y,o),l=y,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){ke(l,l.return,B)}if(l=y,h=l.updateQueue,h!==null){var A=l.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)fm(b[h],A)}catch(B){ke(l,l.return,B)}}o&&S&64&&Ep(y),ka(y,y.return);break;case 27:wp(y);case 26:case 5:Un(h,y,o),o&&l===null&&S&4&&xp(y),ka(y,y.return);break;case 12:Un(h,y,o);break;case 31:Un(h,y,o),o&&S&4&&Dp(h,y);break;case 13:Un(h,y,o),o&&S&4&&Pp(h,y);break;case 22:y.memoizedState===null&&Un(h,y,o),ka(y,y.return);break;case 30:break;default:Un(h,y,o)}s=s.sibling}}function vc(t,s){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&Ca(o))}function _c(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ca(t))}function rn(t,s,o,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kp(t,s,o,l),s=s.sibling}function kp(t,s,o,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:rn(t,s,o,l),h&2048&&La(9,s);break;case 1:rn(t,s,o,l);break;case 3:rn(t,s,o,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ca(t)));break;case 12:if(h&2048){rn(t,s,o,l),t=s.stateNode;try{var y=s.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(b){ke(s,s.return,b)}}else rn(t,s,o,l);break;case 31:rn(t,s,o,l);break;case 13:rn(t,s,o,l);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?rn(t,s,o,l):qa(t,s):y._visibility&2?rn(t,s,o,l):(y._visibility|=2,As(t,s,o,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&vc(S,s);break;case 24:rn(t,s,o,l),h&2048&&_c(s.alternate,s);break;default:rn(t,s,o,l)}}function As(t,s,o,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=t,S=s,A=o,b=l,B=S.flags;switch(S.tag){case 0:case 11:case 15:As(y,S,A,b,h),La(8,S);break;case 23:break;case 22:var Y=S.stateNode;S.memoizedState!==null?Y._visibility&2?As(y,S,A,b,h):qa(y,S):(Y._visibility|=2,As(y,S,A,b,h)),h&&B&2048&&vc(S.alternate,S);break;case 24:As(y,S,A,b,h),h&&B&2048&&_c(S.alternate,S);break;default:As(y,S,A,b,h)}s=s.sibling}}function qa(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=t,l=s,h=l.flags;switch(l.tag){case 22:qa(o,l),h&2048&&vc(l.alternate,l);break;case 24:qa(o,l),h&2048&&_c(l.alternate,l);break;default:qa(o,l)}s=s.sibling}}var Ba=8192;function xs(t,s,o){if(t.subtreeFlags&Ba)for(t=t.child;t!==null;)qp(t,s,o),t=t.sibling}function qp(t,s,o){switch(t.tag){case 26:xs(t,s,o),t.flags&Ba&&t.memoizedState!==null&&zC(o,on,t.memoizedState,t.memoizedProps);break;case 5:xs(t,s,o);break;case 3:case 4:var l=on;on=br(t.stateNode.containerInfo),xs(t,s,o),on=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ba,Ba=16777216,xs(t,s,o),Ba=l):xs(t,s,o));break;default:xs(t,s,o)}}function Bp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Va(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];ct=l,Op(l,t)}Bp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vp(t),t=t.sibling}function Vp(t){switch(t.tag){case 0:case 11:case 15:Va(t),t.flags&2048&&si(9,t,t.return);break;case 3:Va(t);break;case 12:Va(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,hr(t)):Va(t);break;default:Va(t)}}function hr(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];ct=l,Op(l,t)}Bp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:si(8,s,s.return),hr(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,hr(s));break;default:hr(s)}t=t.sibling}}function Op(t,s){for(;ct!==null;){var o=ct;switch(o.tag){case 0:case 11:case 15:si(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ca(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,ct=l;else e:for(o=t;ct!==null;){l=ct;var h=l.sibling,y=l.return;if(Mp(l),l===o){ct=null;break e}if(h!==null){h.return=y,ct=h;break e}ct=y}}}var aC={getCacheForType:function(t){var s=mt(et),o=s.data.get(t);return o===void 0&&(o=t(),s.data.set(t,o)),o},cacheSignal:function(){return mt(et).controller.signal}},oC=typeof WeakMap=="function"?WeakMap:Map,Ue=0,He=null,Ee=null,xe=0,Le=0,Vt=null,ai=!1,bs=!1,Sc=!1,Ln=0,Xe=0,oi=0,Fi=0,Tc=0,Ot=0,ws=0,Oa=null,Nt=null,Cc=!1,mr=0,Hp=0,pr=1/0,gr=null,ri=null,st=0,li=null,Rs=null,kn=0,Ec=0,Ac=null,Gp=null,Ha=0,xc=null;function Ht(){return(Ue&2)!==0&&xe!==0?xe&-xe:V.T!==null?Ic():sh()}function Fp(){if(Ot===0)if((xe&536870912)===0||we){var t=Ao;Ao<<=1,(Ao&3932160)===0&&(Ao=262144),Ot=t}else Ot=536870912;return t=qt.current,t!==null&&(t.flags|=32),Ot}function Mt(t,s,o){(t===He&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(Ns(t,0),ui(t,xe,Ot,!1)),la(t,o),((Ue&2)===0||t!==He)&&(t===He&&((Ue&2)===0&&(Fi|=o),Xe===4&&ui(t,xe,Ot,!1)),pn(t))}function zp(t,s,o){if((Ue&6)!==0)throw Error(a(327));var l=!o&&(s&127)===0&&(s&t.expiredLanes)===0||ra(t,s),h=l?uC(t,s):wc(t,s,!0),y=l;do{if(h===0){bs&&!l&&ui(t,s,0,!1);break}else{if(o=t.current.alternate,y&&!rC(o)){h=wc(t,s,!1),y=!1;continue}if(h===2){if(y=s,t.errorRecoveryDisabledLanes&y)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=t;h=Oa;var b=A.current.memoizedState.isDehydrated;if(b&&(Ns(A,S).flags|=256),S=wc(A,S,!1),S!==2){if(Sc&&!b){A.errorRecoveryDisabledLanes|=y,Fi|=y,h=4;break e}y=Nt,Nt=h,y!==null&&(Nt===null?Nt=y:Nt.push.apply(Nt,y))}h=S}if(y=!1,h!==2)continue}}if(h===1){Ns(t,0),ui(t,s,0,!0);break}e:{switch(l=t,y=h,y){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:ui(l,s,Ot,!ai);break e;case 2:Nt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(h=mr+300-Dt(),10<h)){if(ui(l,s,Ot,!ai),bo(l,0,!0)!==0)break e;kn=s,l.timeoutHandle=Tg(Yp.bind(null,l,o,Nt,gr,Cc,s,Ot,Fi,ws,ai,y,"Throttled",-0,0),h);break e}Yp(l,o,Nt,gr,Cc,s,Ot,Fi,ws,ai,y,null,-0,0)}}break}while(!0);pn(t)}function Yp(t,s,o,l,h,y,S,A,b,B,Y,K,O,H){if(t.timeoutHandle=-1,K=s.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tn},qp(s,y,K);var ie=(y&62914560)===y?mr-Dt():(y&4194048)===y?Hp-Dt():0;if(ie=YC(K,ie),ie!==null){kn=y,t.cancelPendingCommit=ie(jp.bind(null,t,s,y,o,l,h,S,A,b,Y,K,null,O,H)),ui(t,y,S,!B);return}}jp(t,s,y,o,l,h,S,A,b)}function rC(t){for(var s=t;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var h=o[l],y=h.getSnapshot;h=h.value;try{if(!Lt(y(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ui(t,s,o,l){s&=~Tc,s&=~Fi,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var y=31-Ut(h),S=1<<y;l[y]=-1,h&=~S}o!==0&&th(t,o,s)}function yr(){return(Ue&6)===0?(Ga(0),!1):!0}function bc(){if(Ee!==null){if(Le===0)var t=Ee.return;else t=Ee,xn=Ui=null,Gu(t),_s=null,Aa=0,t=Ee;for(;t!==null;)Cp(t.alternate,t),t=t.return;Ee=null}}function Ns(t,s){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,wC(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),kn=0,bc(),He=t,Ee=o=En(t.current,null),xe=s,Le=0,Vt=null,ai=!1,bs=ra(t,s),Sc=!1,ws=Ot=Tc=Fi=oi=Xe=0,Nt=Oa=null,Cc=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-Ut(l),y=1<<h;s|=t[h],l&=~y}return Ln=s,Bo(),o}function Jp(t,s){ve=null,V.H=Da,s===vs||s===Jo?(s=lm(),Le=3):s===Mu?(s=lm(),Le=4):Le=s===sc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vt=s,Ee===null&&(Xe=1,or(t,Kt(s,t.current)))}function $p(){var t=qt.current;return t===null?!0:(xe&4194048)===xe?Wt===null:(xe&62914560)===xe||(xe&536870912)!==0?t===Wt:!1}function Kp(){var t=V.H;return V.H=Da,t===null?Da:t}function Xp(){var t=V.A;return V.A=aC,t}function vr(){Xe=4,ai||(xe&4194048)!==xe&&qt.current!==null||(bs=!0),(oi&134217727)===0&&(Fi&134217727)===0||He===null||ui(He,xe,Ot,!1)}function wc(t,s,o){var l=Ue;Ue|=2;var h=Kp(),y=Xp();(He!==t||xe!==s)&&(gr=null,Ns(t,s)),s=!1;var S=Xe;e:do try{if(Le!==0&&Ee!==null){var A=Ee,b=Vt;switch(Le){case 8:bc(),S=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(s=!0);var B=Le;if(Le=0,Vt=null,Ms(t,A,b,B),o&&bs){S=0;break e}break;default:B=Le,Le=0,Vt=null,Ms(t,A,b,B)}}lC(),S=Xe;break}catch(Y){Jp(t,Y)}while(!0);return s&&t.shellSuspendCounter++,xn=Ui=null,Ue=l,V.H=h,V.A=y,Ee===null&&(He=null,xe=0,Bo()),S}function lC(){for(;Ee!==null;)Qp(Ee)}function uC(t,s){var o=Ue;Ue|=2;var l=Kp(),h=Xp();He!==t||xe!==s?(gr=null,pr=Dt()+500,Ns(t,s)):bs=ra(t,s);e:do try{if(Le!==0&&Ee!==null){s=Ee;var y=Vt;t:switch(Le){case 1:Le=0,Vt=null,Ms(t,s,y,1);break;case 2:case 9:if(om(y)){Le=0,Vt=null,Zp(s);break}s=function(){Le!==2&&Le!==9||He!==t||(Le=7),pn(t)},y.then(s,s);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:om(y)?(Le=0,Vt=null,Zp(s)):(Le=0,Vt=null,Ms(t,s,y,7));break;case 5:var S=null;switch(Ee.tag){case 26:S=Ee.memoizedState;case 5:case 27:var A=Ee;if(S?kg(S):A.stateNode.complete){Le=0,Vt=null;var b=A.sibling;if(b!==null)Ee=b;else{var B=A.return;B!==null?(Ee=B,_r(B)):Ee=null}break t}}Le=0,Vt=null,Ms(t,s,y,5);break;case 6:Le=0,Vt=null,Ms(t,s,y,6);break;case 8:bc(),Xe=6;break e;default:throw Error(a(462))}}cC();break}catch(Y){Jp(t,Y)}while(!0);return xn=Ui=null,V.H=l,V.A=h,Ue=o,Ee!==null?0:(He=null,xe=0,Bo(),Xe)}function cC(){for(;Ee!==null&&!PS();)Qp(Ee)}function Qp(t){var s=Sp(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,s===null?_r(t):Ee=s}function Zp(t){var s=t,o=s.alternate;switch(s.tag){case 15:case 0:s=mp(o,s,s.pendingProps,s.type,void 0,xe);break;case 11:s=mp(o,s,s.pendingProps,s.type.render,s.ref,xe);break;case 5:Gu(s);default:Cp(o,s),s=Ee=Xh(s,Ln),s=Sp(o,s,Ln)}t.memoizedProps=t.pendingProps,s===null?_r(t):Ee=s}function Ms(t,s,o,l){xn=Ui=null,Gu(s),_s=null,Aa=0;var h=s.return;try{if(WT(t,h,s,o,xe)){Xe=1,or(t,Kt(o,t.current)),Ee=null;return}}catch(y){if(h!==null)throw Ee=h,y;Xe=1,or(t,Kt(o,t.current)),Ee=null;return}s.flags&32768?(we||l===1?t=!0:bs||(xe&536870912)!==0?t=!1:(ai=t=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wp(s,t)):_r(s)}function _r(t){var s=t;do{if((s.flags&32768)!==0){Wp(s,ai);return}t=s.return;var o=tC(s.alternate,s,Ln);if(o!==null){Ee=o;return}if(s=s.sibling,s!==null){Ee=s;return}Ee=s=t}while(s!==null);Xe===0&&(Xe=5)}function Wp(t,s){do{var o=nC(t.alternate,t);if(o!==null){o.flags&=32767,Ee=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(t=t.sibling,t!==null)){Ee=t;return}Ee=t=o}while(t!==null);Xe=6,Ee=null}function jp(t,s,o,l,h,y,S,A,b){t.cancelPendingCommit=null;do Sr();while(st!==0);if((Ue&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(y=s.lanes|s.childLanes,y|=pu,FS(t,o,y,S,A,b),t===He&&(Ee=He=null,xe=0),Rs=s,li=t,kn=o,Ec=y,Ac=h,Gp=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,mC(Co,function(){return sg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=V.T,V.T=null,h=j.p,j.p=2,S=Ue,Ue|=4;try{iC(t,s,o)}finally{Ue=S,j.p=h,V.T=l}}st=1,eg(),tg(),ng()}}function eg(){if(st===1){st=0;var t=li,s=Rs,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var l=j.p;j.p=2;var h=Ue;Ue|=4;try{Up(s,t);var y=Vc,S=Oh(t.containerInfo),A=y.focusedElem,b=y.selectionRange;if(S!==A&&A&&A.ownerDocument&&Vh(A.ownerDocument.documentElement,A)){if(b!==null&&cu(A)){var B=b.start,Y=b.end;if(Y===void 0&&(Y=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(Y,A.value.length);else{var K=A.ownerDocument||document,O=K&&K.defaultView||window;if(O.getSelection){var H=O.getSelection(),ie=A.textContent.length,ce=Math.min(b.start,ie),Ve=b.end===void 0?ce:Math.min(b.end,ie);!H.extend&&ce>Ve&&(S=Ve,Ve=ce,ce=S);var P=Bh(A,ce),R=Bh(A,Ve);if(P&&R&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==R.node||H.focusOffset!==R.offset)){var q=K.createRange();q.setStart(P.node,P.offset),H.removeAllRanges(),ce>Ve?(H.addRange(q),H.extend(R.node,R.offset)):(q.setEnd(R.node,R.offset),H.addRange(q))}}}}for(K=[],H=A;H=H.parentNode;)H.nodeType===1&&K.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<K.length;A++){var J=K[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Dr=!!Bc,Vc=Bc=null}finally{Ue=h,j.p=l,V.T=o}}t.current=s,st=2}}function tg(){if(st===2){st=0;var t=li,s=Rs,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var l=j.p;j.p=2;var h=Ue;Ue|=4;try{Np(t,s.alternate,s)}finally{Ue=h,j.p=l,V.T=o}}st=3}}function ng(){if(st===4||st===3){st=0,US();var t=li,s=Rs,o=kn,l=Gp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?st=5:(st=0,Rs=li=null,ig(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ri=null),Yl(o),s=s.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(oa,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=V.T,h=j.p,j.p=2,V.T=null;try{for(var y=t.onRecoverableError,S=0;S<l.length;S++){var A=l[S];y(A.value,{componentStack:A.stack})}}finally{V.T=s,j.p=h}}(kn&3)!==0&&Sr(),pn(t),h=t.pendingLanes,(o&261930)!==0&&(h&42)!==0?t===xc?Ha++:(Ha=0,xc=t):Ha=0,Ga(0)}}function ig(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Ca(s)))}function Sr(){return eg(),tg(),ng(),sg()}function sg(){if(st!==5)return!1;var t=li,s=Ec;Ec=0;var o=Yl(kn),l=V.T,h=j.p;try{j.p=32>o?32:o,V.T=null,o=Ac,Ac=null;var y=li,S=kn;if(st=0,Rs=li=null,kn=0,(Ue&6)!==0)throw Error(a(331));var A=Ue;if(Ue|=4,Vp(y.current),kp(y,y.current,S,o),Ue=A,Ga(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(oa,y)}catch{}return!0}finally{j.p=h,V.T=l,ig(t,s)}}function ag(t,s,o){s=Kt(o,s),s=ic(t.stateNode,s,2),t=ti(t,s,2),t!==null&&(la(t,2),pn(t))}function ke(t,s,o){if(t.tag===3)ag(t,t,o);else for(;s!==null;){if(s.tag===3){ag(s,t,o);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ri===null||!ri.has(l))){t=Kt(o,t),o=op(2),l=ti(s,o,2),l!==null&&(rp(o,l,s,t),la(l,2),pn(l));break}}s=s.return}}function Rc(t,s,o){var l=t.pingCache;if(l===null){l=t.pingCache=new oC;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(o)||(Sc=!0,h.add(o),t=dC.bind(null,t,s,o),s.then(t,t))}function dC(t,s,o){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,He===t&&(xe&o)===o&&(Xe===4||Xe===3&&(xe&62914560)===xe&&300>Dt()-mr?(Ue&2)===0&&Ns(t,0):Tc|=o,ws===xe&&(ws=0)),pn(t)}function og(t,s){s===0&&(s=eh()),t=Ii(t,s),t!==null&&(la(t,s),pn(t))}function fC(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),og(t,o)}function hC(t,s){var o=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(s),og(t,o)}function mC(t,s){return Hl(t,s)}var Tr=null,Is=null,Nc=!1,Cr=!1,Mc=!1,ci=0;function pn(t){t!==Is&&t.next===null&&(Is===null?Tr=Is=t:Is=Is.next=t),Cr=!0,Nc||(Nc=!0,gC())}function Ga(t,s){if(!Mc&&Cr){Mc=!0;do for(var o=!1,l=Tr;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var y=0;else{var S=l.suspendedLanes,A=l.pingedLanes;y=(1<<31-Ut(42|t)+1)-1,y&=h&~(S&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,cg(l,y))}else y=xe,y=bo(l,l===He?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||ra(l,y)||(o=!0,cg(l,y));l=l.next}while(o);Mc=!1}}function pC(){rg()}function rg(){Cr=Nc=!1;var t=0;ci!==0&&bC()&&(t=ci);for(var s=Dt(),o=null,l=Tr;l!==null;){var h=l.next,y=lg(l,s);y===0?(l.next=null,o===null?Tr=h:o.next=h,h===null&&(Is=o)):(o=l,(t!==0||(y&3)!==0)&&(Cr=!0)),l=h}st!==0&&st!==5||Ga(t),ci!==0&&(ci=0)}function lg(t,s){for(var o=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var S=31-Ut(y),A=1<<S,b=h[S];b===-1?((A&o)===0||(A&l)!==0)&&(h[S]=GS(A,s)):b<=s&&(t.expiredLanes|=A),y&=~A}if(s=He,o=xe,o=bo(t,t===s?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,o===0||t===s&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Gl(l),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||ra(t,o)){if(s=o&-o,s===t.callbackPriority)return s;switch(l!==null&&Gl(l),Yl(o)){case 2:case 8:o=Wf;break;case 32:o=Co;break;case 268435456:o=jf;break;default:o=Co}return l=ug.bind(null,t),o=Hl(o,l),t.callbackPriority=s,t.callbackNode=o,s}return l!==null&&l!==null&&Gl(l),t.callbackPriority=2,t.callbackNode=null,2}function ug(t,s){if(st!==0&&st!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Sr()&&t.callbackNode!==o)return null;var l=xe;return l=bo(t,t===He?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(zp(t,l,s),lg(t,Dt()),t.callbackNode!=null&&t.callbackNode===o?ug.bind(null,t):null)}function cg(t,s){if(Sr())return null;zp(t,s,!0)}function gC(){RC(function(){(Ue&6)!==0?Hl(Zf,pC):rg()})}function Ic(){if(ci===0){var t=gs;t===0&&(t=Eo,Eo<<=1,(Eo&261888)===0&&(Eo=256)),ci=t}return ci}function dg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Mo(""+t)}function fg(t,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,t.id&&o.setAttribute("form",t.id),s.parentNode.insertBefore(o,s),t=new FormData(t),o.parentNode.removeChild(o),t}function yC(t,s,o,l,h){if(s==="submit"&&o&&o.stateNode===h){var y=dg((h[At]||null).action),S=l.submitter;S&&(s=(s=S[At]||null)?dg(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var A=new Uo("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ci!==0){var b=S?fg(h,S):new FormData(h);Zu(o,{pending:!0,data:b,method:h.method,action:y},null,b)}}else typeof y=="function"&&(A.preventDefault(),b=S?fg(h,S):new FormData(h),Zu(o,{pending:!0,data:b,method:h.method,action:y},y,b))},currentTarget:h}]})}}for(var Dc=0;Dc<mu.length;Dc++){var Pc=mu[Dc],vC=Pc.toLowerCase(),_C=Pc[0].toUpperCase()+Pc.slice(1);an(vC,"on"+_C)}an(Fh,"onAnimationEnd"),an(zh,"onAnimationIteration"),an(Yh,"onAnimationStart"),an("dblclick","onDoubleClick"),an("focusin","onFocus"),an("focusout","onBlur"),an(LT,"onTransitionRun"),an(kT,"onTransitionStart"),an(qT,"onTransitionCancel"),an(Jh,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fa));function hg(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var l=t[o],h=l.event;l=l.listeners;e:{var y=void 0;if(s)for(var S=l.length-1;0<=S;S--){var A=l[S],b=A.instance,B=A.currentTarget;if(A=A.listener,b!==y&&h.isPropagationStopped())break e;y=A,h.currentTarget=B;try{y(h)}catch(Y){qo(Y)}h.currentTarget=null,y=b}else for(S=0;S<l.length;S++){if(A=l[S],b=A.instance,B=A.currentTarget,A=A.listener,b!==y&&h.isPropagationStopped())break e;y=A,h.currentTarget=B;try{y(h)}catch(Y){qo(Y)}h.currentTarget=null,y=b}}}}function Ae(t,s){var o=s[Jl];o===void 0&&(o=s[Jl]=new Set);var l=t+"__bubble";o.has(l)||(mg(s,t,2,!1),o.add(l))}function Uc(t,s,o){var l=0;s&&(l|=4),mg(o,t,l,s)}var Er="_reactListening"+Math.random().toString(36).slice(2);function Lc(t){if(!t[Er]){t[Er]=!0,rh.forEach(function(o){o!=="selectionchange"&&(SC.has(o)||Uc(o,!1,t),Uc(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Er]||(s[Er]=!0,Uc("selectionchange",!1,s))}}function mg(t,s,o,l){switch(Fg(s)){case 2:var h=KC;break;case 8:h=XC;break;default:h=Qc}o=h.bind(null,s,o,t),h=void 0,!tu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,o,{capture:!0,passive:h}):t.addEventListener(s,o,!0):h!==void 0?t.addEventListener(s,o,{passive:h}):t.addEventListener(s,o,!1)}function kc(t,s,o,l,h){var y=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var A=l.stateNode.containerInfo;if(A===h)break;if(S===4)for(S=l.return;S!==null;){var b=S.tag;if((b===3||b===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;A!==null;){if(S=ji(A),S===null)return;if(b=S.tag,b===5||b===6||b===26||b===27){l=y=S;continue e}A=A.parentNode}}l=l.return}_h(function(){var B=y,Y=jl(o),K=[];e:{var O=$h.get(t);if(O!==void 0){var H=Uo,ie=t;switch(t){case"keypress":if(Do(o)===0)break e;case"keydown":case"keyup":H=hT;break;case"focusin":ie="focus",H=au;break;case"focusout":ie="blur",H=au;break;case"beforeblur":case"afterblur":H=au;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=tT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=gT;break;case Fh:case zh:case Yh:H=sT;break;case Jh:H=vT;break;case"scroll":case"scrollend":H=jS;break;case"wheel":H=ST;break;case"copy":case"cut":case"paste":H=oT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ah;break;case"toggle":case"beforetoggle":H=CT}var ce=(s&4)!==0,Ve=!ce&&(t==="scroll"||t==="scrollend"),P=ce?O!==null?O+"Capture":null:O;ce=[];for(var R=B,q;R!==null;){var J=R;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||P===null||(J=da(R,P),J!=null&&ce.push(za(R,J,q))),Ve)break;R=R.return}0<ce.length&&(O=new H(O,ie,null,o,Y),K.push({event:O,listeners:ce}))}}if((s&7)===0){e:{if(O=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",O&&o!==Wl&&(ie=o.relatedTarget||o.fromElement)&&(ji(ie)||ie[Wi]))break e;if((H||O)&&(O=Y.window===Y?Y:(O=Y.ownerDocument)?O.defaultView||O.parentWindow:window,H?(ie=o.relatedTarget||o.toElement,H=B,ie=ie?ji(ie):null,ie!==null&&(Ve=u(ie),ce=ie.tag,ie!==Ve||ce!==5&&ce!==27&&ce!==6)&&(ie=null)):(H=null,ie=B),H!==ie)){if(ce=Ch,J="onMouseLeave",P="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ce=Ah,J="onPointerLeave",P="onPointerEnter",R="pointer"),Ve=H==null?O:ca(H),q=ie==null?O:ca(ie),O=new ce(J,R+"leave",H,o,Y),O.target=Ve,O.relatedTarget=q,J=null,ji(Y)===B&&(ce=new ce(P,R+"enter",ie,o,Y),ce.target=q,ce.relatedTarget=Ve,J=ce),Ve=J,H&&ie)t:{for(ce=TC,P=H,R=ie,q=0,J=P;J;J=ce(J))q++;J=0;for(var le=R;le;le=ce(le))J++;for(;0<q-J;)P=ce(P),q--;for(;0<J-q;)R=ce(R),J--;for(;q--;){if(P===R||R!==null&&P===R.alternate){ce=P;break t}P=ce(P),R=ce(R)}ce=null}else ce=null;H!==null&&pg(K,O,H,ce,!1),ie!==null&&Ve!==null&&pg(K,Ve,ie,ce,!0)}}e:{if(O=B?ca(B):window,H=O.nodeName&&O.nodeName.toLowerCase(),H==="select"||H==="input"&&O.type==="file")var Me=Dh;else if(Mh(O))if(Ph)Me=DT;else{Me=MT;var oe=NT}else H=O.nodeName,!H||H.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?B&&Zl(B.elementType)&&(Me=Dh):Me=IT;if(Me&&(Me=Me(t,B))){Ih(K,Me,o,Y);break e}oe&&oe(t,O,B),t==="focusout"&&B&&O.type==="number"&&B.memoizedProps.value!=null&&Ql(O,"number",O.value)}switch(oe=B?ca(B):window,t){case"focusin":(Mh(oe)||oe.contentEditable==="true")&&(ls=oe,du=B,_a=null);break;case"focusout":_a=du=ls=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,Hh(K,o,Y);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":Hh(K,o,Y)}var _e;if(ru)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else rs?Rh(t,o)&&(be="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(xh&&o.locale!=="ko"&&(rs||be!=="onCompositionStart"?be==="onCompositionEnd"&&rs&&(_e=Sh()):(Kn=Y,nu="value"in Kn?Kn.value:Kn.textContent,rs=!0)),oe=Ar(B,be),0<oe.length&&(be=new Eh(be,t,null,o,Y),K.push({event:be,listeners:oe}),_e?be.data=_e:(_e=Nh(o),_e!==null&&(be.data=_e)))),(_e=AT?xT(t,o):bT(t,o))&&(be=Ar(B,"onBeforeInput"),0<be.length&&(oe=new Eh("onBeforeInput","beforeinput",null,o,Y),K.push({event:oe,listeners:be}),oe.data=_e)),yC(K,t,B,o,Y)}hg(K,s)})}function za(t,s,o){return{instance:t,listener:s,currentTarget:o}}function Ar(t,s){for(var o=s+"Capture",l=[];t!==null;){var h=t,y=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||y===null||(h=da(t,o),h!=null&&l.unshift(za(t,h,y)),h=da(t,s),h!=null&&l.push(za(t,h,y))),t.tag===3)return l;t=t.return}return[]}function TC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function pg(t,s,o,l,h){for(var y=s._reactName,S=[];o!==null&&o!==l;){var A=o,b=A.alternate,B=A.stateNode;if(A=A.tag,b!==null&&b===l)break;A!==5&&A!==26&&A!==27||B===null||(b=B,h?(B=da(o,y),B!=null&&S.unshift(za(o,B,b))):h||(B=da(o,y),B!=null&&S.push(za(o,B,b)))),o=o.return}S.length!==0&&t.push({event:s,listeners:S})}var CC=/\r\n?/g,EC=/\u0000|\uFFFD/g;function gg(t){return(typeof t=="string"?t:""+t).replace(CC,`
`).replace(EC,"")}function yg(t,s){return s=gg(s),gg(t)===s}function Be(t,s,o,l,h,y){switch(o){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ss(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ss(t,""+l);break;case"className":Ro(t,"class",l);break;case"tabIndex":Ro(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ro(t,o,l);break;case"style":yh(t,l,y);break;case"data":if(s!=="object"){Ro(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||o!=="href")){t.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(o);break}l=Mo(""+l),t.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&Be(t,s,"name",h.name,h,null),Be(t,s,"formEncType",h.formEncType,h,null),Be(t,s,"formMethod",h.formMethod,h,null),Be(t,s,"formTarget",h.formTarget,h,null)):(Be(t,s,"encType",h.encType,h,null),Be(t,s,"method",h.method,h,null),Be(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(o);break}l=Mo(""+l),t.setAttribute(o,l);break;case"onClick":l!=null&&(t.onclick=Tn);break;case"onScroll":l!=null&&Ae("scroll",t);break;case"onScrollEnd":l!=null&&Ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(o=l.__html,o!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}o=Mo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(o,""+l):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":l===!0?t.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(o,l):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(o,l):t.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(o):t.setAttribute(o,l);break;case"popover":Ae("beforetoggle",t),Ae("toggle",t),wo(t,"popover",l);break;case"xlinkActuate":Sn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Sn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Sn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Sn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Sn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Sn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":wo(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ZS.get(o)||o,wo(t,o,l))}}function qc(t,s,o,l,h,y){switch(o){case"style":yh(t,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(o=l.__html,o!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"children":typeof l=="string"?ss(t,l):(typeof l=="number"||typeof l=="bigint")&&ss(t,""+l);break;case"onScroll":l!=null&&Ae("scroll",t);break;case"onScrollEnd":l!=null&&Ae("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lh.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),y=t[At]||null,y=y!=null?y[o]:null,typeof y=="function"&&t.removeEventListener(s,y,h),typeof l=="function")){typeof y!="function"&&y!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(s,l,h);break e}o in t?t[o]=l:l===!0?t.setAttribute(o,""):wo(t,o,l)}}}function gt(t,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",t),Ae("load",t);var l=!1,h=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:Be(t,s,y,S,o,null)}}h&&Be(t,s,"srcSet",o.srcSet,o,null),l&&Be(t,s,"src",o.src,o,null);return;case"input":Ae("invalid",t);var A=y=S=h=null,b=null,B=null;for(l in o)if(o.hasOwnProperty(l)){var Y=o[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":S=Y;break;case"checked":b=Y;break;case"defaultChecked":B=Y;break;case"value":y=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,s));break;default:Be(t,s,l,Y,o,null)}}hh(t,y,A,b,B,S,h,!1);return;case"select":Ae("invalid",t),l=S=y=null;for(h in o)if(o.hasOwnProperty(h)&&(A=o[h],A!=null))switch(h){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":l=A;default:Be(t,s,h,A,o,null)}s=y,o=S,t.multiple=!!l,s!=null?is(t,!!l,s,!1):o!=null&&is(t,!!l,o,!0);return;case"textarea":Ae("invalid",t),y=h=l=null;for(S in o)if(o.hasOwnProperty(S)&&(A=o[S],A!=null))switch(S){case"value":l=A;break;case"defaultValue":h=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Be(t,s,S,A,o,null)}ph(t,l,h,y);return;case"option":for(b in o)if(o.hasOwnProperty(b)&&(l=o[b],l!=null))switch(b){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Be(t,s,b,l,o,null)}return;case"dialog":Ae("beforetoggle",t),Ae("toggle",t),Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":Ae("load",t);break;case"video":case"audio":for(l=0;l<Fa.length;l++)Ae(Fa[l],t);break;case"image":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"embed":case"source":case"link":Ae("error",t),Ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in o)if(o.hasOwnProperty(B)&&(l=o[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:Be(t,s,B,l,o,null)}return;default:if(Zl(s)){for(Y in o)o.hasOwnProperty(Y)&&(l=o[Y],l!==void 0&&qc(t,s,Y,l,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(l=o[A],l!=null&&Be(t,s,A,l,o,null))}function AC(t,s,o,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,y=null,S=null,A=null,b=null,B=null,Y=null;for(H in o){var K=o[H];if(o.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":b=K;default:l.hasOwnProperty(H)||Be(t,s,H,null,l,K)}}for(var O in l){var H=l[O];if(K=o[O],l.hasOwnProperty(O)&&(H!=null||K!=null))switch(O){case"type":y=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":Y=H;break;case"value":S=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,s));break;default:H!==K&&Be(t,s,O,H,l,K)}}Xl(t,S,A,b,B,Y,y,h);return;case"select":H=S=A=O=null;for(y in o)if(b=o[y],o.hasOwnProperty(y)&&b!=null)switch(y){case"value":break;case"multiple":H=b;default:l.hasOwnProperty(y)||Be(t,s,y,null,l,b)}for(h in l)if(y=l[h],b=o[h],l.hasOwnProperty(h)&&(y!=null||b!=null))switch(h){case"value":O=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==b&&Be(t,s,h,y,l,b)}s=A,o=S,l=H,O!=null?is(t,!!o,O,!1):!!l!=!!o&&(s!=null?is(t,!!o,s,!0):is(t,!!o,o?[]:"",!1));return;case"textarea":H=O=null;for(A in o)if(h=o[A],o.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Be(t,s,A,null,l,h)}for(S in l)if(h=l[S],y=o[S],l.hasOwnProperty(S)&&(h!=null||y!=null))switch(S){case"value":O=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==y&&Be(t,s,S,h,l,y)}mh(t,O,H);return;case"option":for(var ie in o)if(O=o[ie],o.hasOwnProperty(ie)&&O!=null&&!l.hasOwnProperty(ie))switch(ie){case"selected":t.selected=!1;break;default:Be(t,s,ie,null,l,O)}for(b in l)if(O=l[b],H=o[b],l.hasOwnProperty(b)&&O!==H&&(O!=null||H!=null))switch(b){case"selected":t.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Be(t,s,b,O,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in o)O=o[ce],o.hasOwnProperty(ce)&&O!=null&&!l.hasOwnProperty(ce)&&Be(t,s,ce,null,l,O);for(B in l)if(O=l[B],H=o[B],l.hasOwnProperty(B)&&O!==H&&(O!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,s));break;default:Be(t,s,B,O,l,H)}return;default:if(Zl(s)){for(var Ve in o)O=o[Ve],o.hasOwnProperty(Ve)&&O!==void 0&&!l.hasOwnProperty(Ve)&&qc(t,s,Ve,void 0,l,O);for(Y in l)O=l[Y],H=o[Y],!l.hasOwnProperty(Y)||O===H||O===void 0&&H===void 0||qc(t,s,Y,O,l,H);return}}for(var P in o)O=o[P],o.hasOwnProperty(P)&&O!=null&&!l.hasOwnProperty(P)&&Be(t,s,P,null,l,O);for(K in l)O=l[K],H=o[K],!l.hasOwnProperty(K)||O===H||O==null&&H==null||Be(t,s,K,O,l,H)}function vg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,o=performance.getEntriesByType("resource"),l=0;l<o.length;l++){var h=o[l],y=h.transferSize,S=h.initiatorType,A=h.duration;if(y&&A&&vg(S)){for(S=0,A=h.responseEnd,l+=1;l<o.length;l++){var b=o[l],B=b.startTime;if(B>A)break;var Y=b.transferSize,K=b.initiatorType;Y&&vg(K)&&(b=b.responseEnd,S+=Y*(b<A?1:(A-B)/(b-B)))}if(--l,s+=8*(y+S)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bc=null,Vc=null;function xr(t){return t.nodeType===9?t:t.ownerDocument}function _g(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sg(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Oc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hc=null;function bC(){var t=window.event;return t&&t.type==="popstate"?t===Hc?!1:(Hc=t,!0):(Hc=null,!1)}var Tg=typeof setTimeout=="function"?setTimeout:void 0,wC=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,RC=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(t){return Cg.resolve(null).then(t).catch(NC)}:Tg;function NC(t){setTimeout(function(){throw t})}function di(t){return t==="head"}function Eg(t,s){var o=s,l=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(l===0){t.removeChild(h),Ls(s);return}l--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")l++;else if(o==="html")Ya(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Ya(o);for(var y=o.firstChild;y;){var S=y.nextSibling,A=y.nodeName;y[ua]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=S}}else o==="body"&&Ya(t.ownerDocument.body);o=h}while(o);Ls(s)}function Ag(t,s){var o=t;t=0;do{var l=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),l&&l.nodeType===8)if(o=l.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=l}while(o)}function Gc(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gc(o),$l(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function MC(t,s,o,l){for(;t.nodeType===1;){var h=o;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ua])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var y=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=jt(t.nextSibling),t===null)break}return null}function IC(t,s,o){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=jt(t.nextSibling),t===null))return null;return t}function xg(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=jt(t.nextSibling),t===null))return null;return t}function Fc(t){return t.data==="$?"||t.data==="$~"}function zc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function DC(t,s){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||o.readyState!=="loading")s();else{var l=function(){s(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function jt(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Yc=null;function bg(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(s===0)return jt(t.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}t=t.nextSibling}return null}function wg(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return t;s--}else o!=="/$"&&o!=="/&"||s++}t=t.previousSibling}return null}function Rg(t,s,o){switch(s=xr(o),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ya(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);$l(t)}var en=new Map,Ng=new Set;function br(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var qn=j.d;j.d={f:PC,r:UC,D:LC,C:kC,L:qC,m:BC,X:OC,S:VC,M:HC};function PC(){var t=qn.f(),s=yr();return t||s}function UC(t){var s=es(t);s!==null&&s.tag===5&&s.type==="form"?Jm(s):qn.r(t)}var Ds=typeof document>"u"?null:document;function Mg(t,s,o){var l=Ds;if(l&&typeof s=="string"&&s){var h=Jt(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),Ng.has(h)||(Ng.add(h),t={rel:t,crossOrigin:o,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),gt(s,"link",t),ut(s),l.head.appendChild(s)))}}function LC(t){qn.D(t),Mg("dns-prefetch",t,null)}function kC(t,s){qn.C(t,s),Mg("preconnect",t,s)}function qC(t,s,o){qn.L(t,s,o);var l=Ds;if(l&&t&&s){var h='link[rel="preload"][as="'+Jt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Jt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Jt(o.imageSizes)+'"]')):h+='[href="'+Jt(t)+'"]';var y=h;switch(s){case"style":y=Ps(t);break;case"script":y=Us(t)}en.has(y)||(t=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:t,as:s},o),en.set(y,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(Ja(y))||s==="script"&&l.querySelector($a(y))||(s=l.createElement("link"),gt(s,"link",t),ut(s),l.head.appendChild(s)))}}function BC(t,s){qn.m(t,s);var o=Ds;if(o&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Jt(l)+'"][href="'+Jt(t)+'"]',y=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Us(t)}if(!en.has(y)&&(t=_({rel:"modulepreload",href:t},s),en.set(y,t),o.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector($a(y)))return}l=o.createElement("link"),gt(l,"link",t),ut(l),o.head.appendChild(l)}}}function VC(t,s,o){qn.S(t,s,o);var l=Ds;if(l&&t){var h=ts(l).hoistableStyles,y=Ps(t);s=s||"default";var S=h.get(y);if(!S){var A={loading:0,preload:null};if(S=l.querySelector(Ja(y)))A.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},o),(o=en.get(y))&&Jc(t,o);var b=S=l.createElement("link");ut(b),gt(b,"link",t),b._p=new Promise(function(B,Y){b.onload=B,b.onerror=Y}),b.addEventListener("load",function(){A.loading|=1}),b.addEventListener("error",function(){A.loading|=2}),A.loading|=4,wr(S,s,l)}S={type:"stylesheet",instance:S,count:1,state:A},h.set(y,S)}}}function OC(t,s){qn.X(t,s);var o=Ds;if(o&&t){var l=ts(o).hoistableScripts,h=Us(t),y=l.get(h);y||(y=o.querySelector($a(h)),y||(t=_({src:t,async:!0},s),(s=en.get(h))&&$c(t,s),y=o.createElement("script"),ut(y),gt(y,"link",t),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(h,y))}}function HC(t,s){qn.M(t,s);var o=Ds;if(o&&t){var l=ts(o).hoistableScripts,h=Us(t),y=l.get(h);y||(y=o.querySelector($a(h)),y||(t=_({src:t,async:!0,type:"module"},s),(s=en.get(h))&&$c(t,s),y=o.createElement("script"),ut(y),gt(y,"link",t),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(h,y))}}function Ig(t,s,o,l){var h=(h=Se.current)?br(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ps(o.href),o=ts(h).hoistableStyles,l=o.get(s),l||(l={type:"style",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=Ps(o.href);var y=ts(h).hoistableStyles,S=y.get(t);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,S),(y=h.querySelector(Ja(t)))&&!y._p&&(S.instance=y,S.state.loading=5),en.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},en.set(t,o),y||GC(h,t,o,S.state))),s&&l===null)throw Error(a(528,""));return S}if(s&&l!==null)throw Error(a(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Us(o),o=ts(h).hoistableScripts,l=o.get(s),l||(l={type:"script",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ps(t){return'href="'+Jt(t)+'"'}function Ja(t){return'link[rel="stylesheet"]['+t+"]"}function Dg(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function GC(t,s,o,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),gt(s,"link",o),ut(s),t.head.appendChild(s))}function Us(t){return'[src="'+Jt(t)+'"]'}function $a(t){return"script[async]"+t}function Pg(t,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Jt(o.href)+'"]');if(l)return s.instance=l,ut(l),l;var h=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ut(l),gt(l,"style",h),wr(l,o.precedence,t),s.instance=l;case"stylesheet":h=Ps(o.href);var y=t.querySelector(Ja(h));if(y)return s.state.loading|=4,s.instance=y,ut(y),y;l=Dg(o),(h=en.get(h))&&Jc(l,h),y=(t.ownerDocument||t).createElement("link"),ut(y);var S=y;return S._p=new Promise(function(A,b){S.onload=A,S.onerror=b}),gt(y,"link",l),s.state.loading|=4,wr(y,o.precedence,t),s.instance=y;case"script":return y=Us(o.src),(h=t.querySelector($a(y)))?(s.instance=h,ut(h),h):(l=o,(h=en.get(y))&&(l=_({},o),$c(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ut(h),gt(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,wr(l,o.precedence,t));return s.instance}function wr(t,s,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,y=h,S=0;S<l.length;S++){var A=l[S];if(A.dataset.precedence===s)y=A;else if(y!==h)break}y?y.parentNode.insertBefore(t,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(t,s.firstChild))}function Jc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function $c(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Rr=null;function Ug(t,s,o){if(Rr===null){var l=new Map,h=Rr=new Map;h.set(o,l)}else h=Rr,l=h.get(o),l||(l=new Map,h.set(o,l));if(l.has(t))return l;for(l.set(t,null),o=o.getElementsByTagName(t),h=0;h<o.length;h++){var y=o[h];if(!(y[ua]||y[ft]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=t+S;var A=l.get(S);A?A.push(y):l.set(S,[y])}}return l}function Lg(t,s,o){t=t.ownerDocument||t,t.head.insertBefore(o,s==="title"?t.querySelector("head > title"):null)}function FC(t,s,o){if(o===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function kg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function zC(t,s,o,l){if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=Ps(l.href),y=s.querySelector(Ja(h));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Nr.bind(t),s.then(t,t)),o.state.loading|=4,o.instance=y,ut(y);return}y=s.ownerDocument||s,l=Dg(l),(h=en.get(h))&&Jc(l,h),y=y.createElement("link"),ut(y);var S=y;S._p=new Promise(function(A,b){S.onload=A,S.onerror=b}),gt(y,"link",l),o.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Nr.bind(t),s.addEventListener("load",o),s.addEventListener("error",o))}}var Kc=0;function YC(t,s){return t.stylesheets&&t.count===0&&Ir(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var l=setTimeout(function(){if(t.stylesheets&&Ir(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+s);0<t.imgBytes&&Kc===0&&(Kc=62500*xC());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ir(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>Kc?50:800)+s);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Nr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ir(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mr=null;function Ir(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mr=new Map,s.forEach(JC,t),Mr=null,Nr.call(t))}function JC(t,s){if(!(s.state.loading&4)){var o=Mr.get(t);if(o)var l=o.get(null);else{o=new Map,Mr.set(t,o);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<h.length;y++){var S=h[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),l=S)}l&&o.set(null,l)}h=s.instance,S=h.getAttribute("data-precedence"),y=o.get(S)||l,y===l&&o.set(null,h),o.set(S,h),this.count++,l=Nr.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),y?y.parentNode.insertBefore(h,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var Ka={$$typeof:U,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function $C(t,s,o,l,h,y,S,A,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.hiddenUpdates=Fl(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function qg(t,s,o,l,h,y,S,A,b,B,Y,K){return t=new $C(t,s,o,S,b,B,Y,K,A),s=1,y===!0&&(s|=24),y=kt(3,null,null,s),t.current=y,y.stateNode=t,s=wu(),s.refCount++,t.pooledCache=s,s.refCount++,y.memoizedState={element:l,isDehydrated:o,cache:s},Iu(y),t}function Bg(t){return t?(t=ds,t):ds}function Vg(t,s,o,l,h,y){h=Bg(h),l.context===null?l.context=h:l.pendingContext=h,l=ei(s),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=ti(t,l,s),o!==null&&(Mt(o,t,s),ba(o,t,s))}function Og(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function Xc(t,s){Og(t,s),(t=t.alternate)&&Og(t,s)}function Hg(t){if(t.tag===13||t.tag===31){var s=Ii(t,67108864);s!==null&&Mt(s,t,67108864),Xc(t,67108864)}}function Gg(t){if(t.tag===13||t.tag===31){var s=Ht();s=zl(s);var o=Ii(t,s);o!==null&&Mt(o,t,s),Xc(t,s)}}var Dr=!0;function KC(t,s,o,l){var h=V.T;V.T=null;var y=j.p;try{j.p=2,Qc(t,s,o,l)}finally{j.p=y,V.T=h}}function XC(t,s,o,l){var h=V.T;V.T=null;var y=j.p;try{j.p=8,Qc(t,s,o,l)}finally{j.p=y,V.T=h}}function Qc(t,s,o,l){if(Dr){var h=Zc(l);if(h===null)kc(t,s,l,Pr,o),zg(t,l);else if(ZC(h,t,s,o,l))l.stopPropagation();else if(zg(t,l),s&4&&-1<QC.indexOf(t)){for(;h!==null;){var y=es(h);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=bi(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var b=1<<31-Ut(S);A.entanglements[1]|=b,S&=~b}pn(y),(Ue&6)===0&&(pr=Dt()+500,Ga(0))}}break;case 31:case 13:A=Ii(y,2),A!==null&&Mt(A,y,2),yr(),Xc(y,2)}if(y=Zc(l),y===null&&kc(t,s,l,Pr,o),y===h)break;h=y}h!==null&&l.stopPropagation()}else kc(t,s,l,null,o)}}function Zc(t){return t=jl(t),Wc(t)}var Pr=null;function Wc(t){if(Pr=null,t=ji(t),t!==null){var s=u(t);if(s===null)t=null;else{var o=s.tag;if(o===13){if(t=c(s),t!==null)return t;t=null}else if(o===31){if(t=p(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Pr=t,null}function Fg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(LS()){case Zf:return 2;case Wf:return 8;case Co:case kS:return 32;case jf:return 268435456;default:return 32}default:return 32}}var jc=!1,fi=null,hi=null,mi=null,Xa=new Map,Qa=new Map,pi=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(t,s){switch(t){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":Xa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(s.pointerId)}}function Za(t,s,o,l,h,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:o,eventSystemFlags:l,nativeEvent:y,targetContainers:[h]},s!==null&&(s=es(s),s!==null&&Hg(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function ZC(t,s,o,l,h){switch(s){case"focusin":return fi=Za(fi,t,s,o,l,h),!0;case"dragenter":return hi=Za(hi,t,s,o,l,h),!0;case"mouseover":return mi=Za(mi,t,s,o,l,h),!0;case"pointerover":var y=h.pointerId;return Xa.set(y,Za(Xa.get(y)||null,t,s,o,l,h)),!0;case"gotpointercapture":return y=h.pointerId,Qa.set(y,Za(Qa.get(y)||null,t,s,o,l,h)),!0}return!1}function Yg(t){var s=ji(t.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){t.blockedOn=s,ah(t.priority,function(){Gg(o)});return}}else if(s===31){if(s=p(o),s!==null){t.blockedOn=s,ah(t.priority,function(){Gg(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ur(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=Zc(t.nativeEvent);if(o===null){o=t.nativeEvent;var l=new o.constructor(o.type,o);Wl=l,o.target.dispatchEvent(l),Wl=null}else return s=es(o),s!==null&&Hg(s),t.blockedOn=o,!1;s.shift()}return!0}function Jg(t,s,o){Ur(t)&&o.delete(s)}function WC(){jc=!1,fi!==null&&Ur(fi)&&(fi=null),hi!==null&&Ur(hi)&&(hi=null),mi!==null&&Ur(mi)&&(mi=null),Xa.forEach(Jg),Qa.forEach(Jg)}function Lr(t,s){t.blockedOn===s&&(t.blockedOn=null,jc||(jc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WC)))}var kr=null;function $g(t){kr!==t&&(kr=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kr===t&&(kr=null);for(var s=0;s<t.length;s+=3){var o=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(Wc(l||o)===null)continue;break}var y=es(o);y!==null&&(t.splice(s,3),s-=3,Zu(y,{pending:!0,data:h,method:o.method,action:l},l,h))}}))}function Ls(t){function s(b){return Lr(b,t)}fi!==null&&Lr(fi,t),hi!==null&&Lr(hi,t),mi!==null&&Lr(mi,t),Xa.forEach(s),Qa.forEach(s);for(var o=0;o<pi.length;o++){var l=pi[o];l.blockedOn===t&&(l.blockedOn=null)}for(;0<pi.length&&(o=pi[0],o.blockedOn===null);)Yg(o),o.blockedOn===null&&pi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var h=o[l],y=o[l+1],S=h[At]||null;if(typeof y=="function")S||$g(o);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(h=y,S=y[At]||null)A=S.formAction;else if(Wc(h)!==null)continue}else A=S.action;typeof A=="function"?o[l+1]=A:(o.splice(l,3),l-=3),$g(o)}}}function Kg(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(o,20)}function o(){if(!l&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function ed(t){this._internalRoot=t}qr.prototype.render=ed.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var o=s.current,l=Ht();Vg(o,l,t,s,null,null)},qr.prototype.unmount=ed.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Vg(t.current,2,null,t,null,null),yr(),s[Wi]=null}};function qr(t){this._internalRoot=t}qr.prototype.unstable_scheduleHydration=function(t){if(t){var s=sh();t={blockedOn:null,target:t,priority:s};for(var o=0;o<pi.length&&s!==0&&s<pi[o].priority;o++);pi.splice(o,0,t),o===0&&Yg(t)}};var Xg=e.version;if(Xg!=="19.2.0")throw Error(a(527,Xg,"19.2.0"));j.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=m(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var jC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Br=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Br.isDisabled&&Br.supportsFiber)try{oa=Br.inject(jC),Pt=Br}catch{}}return ja.createRoot=function(t,s){if(!r(t))throw Error(a(299));var o=!1,l="",h=np,y=ip,S=sp;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=qg(t,1,!1,null,null,o,l,null,h,y,S,Kg),t[Wi]=s.current,Lc(t),new ed(s)},ja.hydrateRoot=function(t,s,o){if(!r(t))throw Error(a(299));var l=!1,h="",y=np,S=ip,A=sp,b=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(b=o.formState)),s=qg(t,1,!0,s,o??null,l,h,b,y,S,A,Kg),s.context=Bg(null),o=s.current,l=Ht(),l=zl(l),h=ei(l),h.callback=null,ti(o,h,l),o=l,s.current.lanes=o,la(s,o),pn(s),t[Wi]=s.current,Lc(t),new qr(s)},ja.version="19.2.0",ja}var ay;function uE(){if(ay)return id.exports;ay=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),id.exports=lE(),id.exports}var cE=uE();const dE=sf(cE),Fs=["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],ks=Fs.map(n=>`${n}B3`),Vr=Fs.map(n=>`${n}80`),fE="#3b82f6",hE="#2563eb",oy="rgba(107, 114, 128, 0.2)",Or="rgba(107, 114, 128, 0.5)";let ry=!1;const mE=ge.forwardRef(({chartType:n,data:e,plan:i,selectedIndices:a,onElementClick:r,onZoomChange:u,disableAnimation:c},p)=>{const g=ge.useRef(null),m=ge.useRef(null);return typeof Chart<"u"&&typeof ChartZoom<"u"&&!ry&&(Chart.register(ChartZoom),ry=!0),ge.useImperativeHandle(p,()=>({resetZoom:()=>{var v;(v=m.current)==null||v.resetZoom()}})),ge.useEffect(()=>{if(!g.current||!i)return;m.current&&m.current.destroy();const v=g.current.getContext("2d");if(!v)return;const{groupByColumn:_,valueColumn:T,xValueColumn:E,yValueColumn:w}=i,x=T||"count",N=a.length>0,k=Q=>N?e.map((z,Z)=>a.includes(Z)?fE:oy):Q,D=Q=>N?e.map((z,Z)=>a.includes(Z)?hE:Or):Q,U=Q=>{if(!Q||!Q.scales||!Q.scales.x)return!1;const z=Q.getInitialScaleBounds().x,Z={min:Q.scales.x.min,max:Q.scales.x.max};return z.min!==Z.min||z.max!==Z.max},L={maintainAspectRatio:!1,responsive:!0,animation:c?{duration:0}:void 0,onClick:(Q,z)=>{z.length>0&&r(z[0].index,Q)},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#ffffff",titleColor:"#1e293b",bodyColor:"#475569",borderColor:"#e2e8f0",borderWidth:1,titleFont:{weight:"bold"},bodyFont:{size:13},padding:10}},scales:{x:{ticks:{color:"#64748b",callback:function(Q){const z=this.getLabelForValue(Number(Q));return typeof z=="string"&&z.length>30?z.substring(0,27)+"...":z}},grid:{color:"#e2e8f0"}},y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}}}},G={pan:{enabled:!0,mode:"xy",onPanComplete:({chart:Q})=>u(U(Q))},zoom:{wheel:{enabled:!1},pinch:{enabled:!0},mode:"xy",onZoomComplete:({chart:Q})=>u(U(Q))}},F=_?e.map(Q=>Q[_]):[],I=e.map(Q=>Q[x]);switch(n){case"bar":m.current=new Chart(v,{type:"bar",data:{labels:F,datasets:[{label:x,data:I,backgroundColor:k(Vr),borderColor:D(ks),borderWidth:1}]},options:{...L}});break;case"line":m.current=new Chart(v,{type:"line",data:{labels:F,datasets:[{label:x,data:I,fill:!1,borderColor:N?Or:Fs[0],pointBackgroundColor:k([Fs[0]]),pointBorderColor:D([ks[0]]),pointRadius:N?5:3,pointHoverRadius:7,tension:.1}]},options:{...L,plugins:{...L.plugins,zoom:G}}});break;case"pie":case"doughnut":m.current=new Chart(v,{type:n,data:{labels:F,datasets:[{label:x,data:I,backgroundColor:k(Vr),borderColor:D(ks),borderWidth:1,offset:N?e.map((te,Te)=>a.includes(Te)?20:0):0}]},options:{...L,scales:{x:{display:!1},y:{display:!1}}}});break;case"scatter":if(!E||!w)break;const Q=e.map(te=>({x:te[E],y:te[w]}));m.current=new Chart(v,{type:"scatter",data:{datasets:[{label:`${w} vs ${E}`,data:Q,backgroundColor:k(Vr),borderColor:D(ks),borderWidth:1.5,pointRadius:N?e.map((te,Te)=>a.includes(Te)?7:4):5,pointHoverRadius:N?e.map((te,Te)=>a.includes(Te)?9:6):7}]},options:{...L,scales:{x:{...L.scales.x,title:{display:!0,text:E,color:"#64748b"}},y:{...L.scales.y,title:{display:!0,text:w,color:"#64748b"}}},plugins:{...L.plugins,zoom:G}}});break;case"combo":if(!_||!x||!i.secondaryValueColumn)break;const z=i.secondaryValueColumn,Z=e.map(te=>te[x]),X=e.map(te=>te[z]);m.current=new Chart(v,{type:"bar",data:{labels:F,datasets:[{type:"bar",label:x,data:Z,backgroundColor:k(Vr),borderColor:D(ks),borderWidth:1,yAxisID:"y"},{type:"line",label:z,data:X,fill:!1,borderColor:N?Or:Fs[1],pointBackgroundColor:N?oy:Fs[1],pointBorderColor:N?Or:ks[1],pointRadius:N?5:3,pointHoverRadius:7,tension:.1,yAxisID:"y1"}]},options:{...L,scales:{...L.scales,y:{type:"linear",display:!0,position:"left",ticks:{color:"#64748b"},grid:{color:"#e2e8f0"},title:{display:!0,text:x,color:"#64748b"}},y1:{type:"linear",display:!0,position:"right",ticks:{color:"#64748b"},grid:{drawOnChartArea:!1},title:{display:!0,text:z,color:"#64748b"}}}}});break}return()=>{m.current&&m.current.destroy()}},[n,e,i,a,r,u,c]),C.jsx("canvas",{ref:g})}),rl=({data:n})=>{if(!n||n.length===0)return C.jsx("p",{className:"text-slate-500",children:"No data to display."});const e=Object.keys(n[0]),i=a=>typeof a=="number"?a.toLocaleString(void 0,{maximumFractionDigits:2}):a;return C.jsx("div",{className:"w-full text-sm",children:C.jsxs("table",{className:"w-full text-left",children:[C.jsx("thead",{className:"bg-slate-100 text-slate-600",children:C.jsx("tr",{children:e.map(a=>C.jsx("th",{className:"p-2 font-semibold",children:a},a))})}),C.jsx("tbody",{className:"bg-white",children:n.map((a,r)=>C.jsx("tr",{className:"border-b border-slate-200 last:border-b-0",children:e.map(u=>C.jsx("td",{className:"p-2 text-slate-700",children:i(a[u])},`${r}-${u}`))},r))})]})})},pE=async(n,e)=>{try{const i=await htmlToImage.toPng(n,{backgroundColor:"#ffffff",pixelRatio:2}),a=document.createElement("a");a.download=`${e.replace(/ /g,"_")}.png`,a.href=i,a.click()}catch(i){console.error("Error exporting to PNG:",i)}},gE=(n,e)=>{try{const i=Papa.unparse(n),a=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.setAttribute("download",`${e.replace(/ /g,"_")}.csv`),r.click()}catch(i){console.error("Error exporting to CSV:",i)}},yE=async(n,e,i,a)=>{try{const r=n.querySelector("canvas");if(!r)throw new Error("Chart canvas not found for export.");const u=r.toDataURL("image/png"),c=`
      <table border="1" style="border-collapse: collapse; width: 100%; font-family: sans-serif; color: #333;">
        <thead>
          <tr style="background-color: #f2f2f2;">
            ${Object.keys(i[0]||{}).map(_=>`<th style="padding: 8px;">${_}</th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${i.map(_=>`
            <tr>
              ${Object.values(_).map(T=>`<td style="padding: 8px;">${T}</td>`).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `,p=a.replace(/\n/g,"<br>").replace("---","<hr>"),g=`
      <!DOCTYPE html>
      <html lang="en">
        <head>
          <meta charset="UTF-8">
          <title>${e}</title>
          <style> body { font-family: sans-serif; line-height: 1.6; padding: 20px; } h1, h2 { color: #111827; } .card { border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin-bottom: 20px; } </style>
        </head>
        <body>
          <h1>Analysis Report: ${e}</h1>
          <div class="card">
            <h2>Chart</h2>
            <img src="${u}" alt="Chart for ${e}" style="max-width: 100%; border: 1px solid #ddd; border-radius: 4px;">
          </div>
          <div class="card">
            <h2>AI Summary</h2>
            <p>${p}</p>
          </div>
          <div class="card">
            <h2>Data</h2>
            ${c}
          </div>
          <p style="font-size: 0.8em; color: #888;">Generated by CSV Data Analysis Agent on ${new Date().toLocaleString()}</p>
        </body>
      </html>
    `,m=new Blob([g],{type:"text/html;charset=utf-8;"}),v=document.createElement("a");v.href=URL.createObjectURL(m),v.setAttribute("download",`Report_${e.replace(/ /g,"_")}.html`),v.click()}catch(r){console.error("Error exporting to HTML:",r)}},vE=({type:n})=>{switch(n){case"bar":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M2 10a1 1 0 011-1h1a1 1 0 011 1v4a1 1 0 01-1 1H3a1 1 0 01-1-1v-4zM8 8a1 1 0 011-1h1a1 1 0 011 1v6a1 1 0 01-1 1H9a1 1 0 01-1-1V8zM14 4a1 1 0 011-1h1a1 1 0 011 1v10a1 1 0 01-1 1h-1a1 1 0 01-1-1V4z"})});case"line":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a1 1 0 001 1h12a1 1 0 100-2H5V3a1 1 0 00-2 0zm12.293 4.293a1 1 0 011.414 0l2 2a1 1 0 01-1.414 1.414L15 8.414l-2.293 2.293a1 1 0 01-1.414 0l-2-2a1 1 0 111.414-1.414L12 7.586l1.293-1.293z",clipRule:"evenodd"})});case"pie":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),C.jsx("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})]});case"doughnut":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 10a3 3 0 116 0 3 3 0 01-6 0z",clipRule:"evenodd"})});case"scatter":return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M5 3a2 2 0 100 4 2 2 0 000-4zM5 13a2 2 0 100 4 2 2 0 000-4zM15 3a2 2 0 100 4 2 2 0 000-4zM15 13a2 2 0 100 4 2 2 0 000-4zM8 8a2 2 0 100 4 2 2 0 000-4zM12 8a2 2 0 100 4 2 2 0 000-4z"})});case"combo":return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{opacity:"0.6",d:"M2 10a1 1 0 011-1h1a1 1 0 011 1v4a1 1 0 01-1 1H3a1 1 0 01-1-1v-4zM8 8a1 1 0 011-1h1a1 1 0 011 1v6a1 1 0 01-1 1H9a1 1 0 01-1-1V8zM14 4a1 1 0 011-1h1a1 1 0 011 1v10a1 1 0 01-1 1h-1a1 1 0 01-1-1V4z"}),C.jsx("path",{fillRule:"evenodd",d:"M3.293 11.293a1 1 0 011.414 0L8 14.586l2.293-2.293a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 15.414l-2.293 2.293a1 1 0 01-1.414 0L3.293 12.707a1 1 0 010-1.414z",clipRule:"evenodd"})]});default:return null}},_E=["bar","line","pie","doughnut","scatter","combo"],SE=({currentType:n,onChange:e})=>C.jsx("div",{className:"flex items-center space-x-1 bg-slate-200 p-1 rounded-md",children:_E.map(i=>C.jsx("button",{onClick:()=>e(i),title:`Switch to ${i} chart`,className:`p-1 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${n===i?"bg-blue-600 text-white":"text-slate-500 hover:bg-slate-300 hover:text-slate-700"}`,children:C.jsx(vE,{type:i})},i))}),TE=n=>typeof n=="string"&&n.startsWith("=")?`'${n}`:n,Si=n=>{if(n==null)return null;let e=String(n).trim();if(e==="")return null;let i=!1;e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1,e.length-1),i=!0),e=e.replace(/[$\s%]/g,"");const a=e.lastIndexOf(","),r=e.lastIndexOf(".");a>r?e=e.replace(/\./g,"").replace(",","."):e=e.replace(/,/g,"");const u=parseFloat(e);return isNaN(u)?null:i?-u:u},CE=n=>typeof n!="string"||!n?!1:!isNaN(new Date(n).getTime())&&/[0-9]{1,4}[-/][0-9]{1,2}[-/][0-9]{1,4}/.test(n),wv=/^Q([1-4])(?:\s*\/?\s*('?\d{2,4}))?$/i,Rv={january:1,jan:1,february:2,feb:2,march:3,mar:3,april:4,apr:4,may:5,june:6,jun:6,july:7,jul:7,august:8,aug:8,september:9,sep:9,october:10,oct:10,november:11,nov:11,december:12,dec:12},Nv={monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thu:4,friday:5,fri:5,saturday:6,sat:6,sunday:7,sun:7},ly=(n,e)=>{const i=String(n).toLowerCase().trim();switch(e){case"quarter":const a=i.match(wv);if(a){const r=parseInt(a[1],10);let u=0;if(a[2]){const c=a[2].replace("'","");u=parseInt(c,10),c.length===2&&(u+=u>50?1900:2e3)}return u*10+r}return 1/0;case"month":return Rv[i]||1/0;case"day":return Nv[i]||1/0}return 1/0},uy=(n,e)=>{if(n.length<2)return n;const i=n.slice(0,10).map(g=>String(g[e]).toLowerCase().trim());let a=null;const r=i.filter(g=>wv.test(g)).length,u=i.filter(g=>Rv[g]!==void 0).length,c=i.filter(g=>Nv[g]!==void 0).length,p=i.filter(CE).length;if(r/i.length>=.5)a="quarter";else if(u/i.length>=.5)a="month";else if(c/i.length>=.5)a="day";else if(p/i.length>=.5)return[...n].sort((g,m)=>new Date(String(g[e])).getTime()-new Date(String(m[e])).getTime());return a?[...n].sort((g,m)=>{const v=ly(String(g[e]),a),_=ly(String(m[e]),a);return v-_}):null},EE=(n,e,i,a)=>{if(n.length<=a)return n;const r=[...n].sort((p,g)=>(Number(g[i])||0)-(Number(p[i])||0)),u=r.slice(0,a-1),c=r.slice(a-1);if(c.length>0){const p=c.reduce((m,v)=>m+(Number(v[i])||0),0),g={[e]:"Others",[i]:p};return[...u,g]}return u},AE=n=>new Promise((e,i)=>{Papa.parse(n,{header:!1,skipEmptyLines:!0,worker:!0,complete:a=>{if(a.data.length===0){e({fileName:n.name,data:[]});return}const r=a.data.reduce((p,g)=>Math.max(p,g.length),0),u=Array.from({length:r},(p,g)=>`column_${g+1}`),c=a.data.map(p=>{const g={};return u.forEach((m,v)=>{const _=p[v]!==void 0?p[v]:"";g[m]=TE(String(_))}),g});e({fileName:n.name,data:c})},error:a=>{i(a)}})}),rd=n=>{if(!n||n.length===0)return[];const e=Object.keys(n[0]),i=[];for(const a of e){let r=!0;const u=n.map(p=>p[a]);let c=0;for(const p of u){const g=Si(p);if(p!==null&&String(p).trim()!==""){if(g===null){r=!1;break}c++}}if(r&&c>0){const p=u.map(Si).filter(g=>g!==null);i.push({name:a,type:"numerical",valueRange:[Math.min(...p),Math.max(...p)],missingPercentage:(1-p.length/n.length)*100})}else{const p=new Set(u.map(String));i.push({name:a,type:"categorical",uniqueValues:p.size,missingPercentage:u.filter(g=>g===null||String(g).trim()==="").length/n.length*100})}}return i},xE=n=>n?String(n).replace(/,(?=-?\d)/g,"|").split("|"):[],Mv=()=>({parseNumber:Si,splitNumericString:xE}),cy=(n,e)=>{try{const i=Mv(),r=new Function("data","_util",e)(n,i);if(!Array.isArray(r))throw console.error("AI-generated transform function returned a non-array value. This is likely due to a missing 'return' statement in the generated code.",{returnedValue:r,generatedCode:e}),new Error("AI-generated transform function did not return an array.");if(r.length>0&&typeof r[0]!="object")throw new Error("AI-generated transform function did not return an array of objects.");return r}catch(i){throw console.error("Error executing AI-generated JavaScript:",i),new Error(`AI-generated data transformation failed: ${i instanceof Error?i.message:String(i)}`)}},bE=(n,e)=>{try{const i=Mv(),r=new Function("data","_util",e)(n,i);if(!Array.isArray(r))throw new Error("AI-generated filter function did not return an array.");return r}catch(i){throw console.error("Error executing AI-generated JavaScript filter:",i),new Error(`AI-generated data filter failed: ${i instanceof Error?i.message:String(i)}`)}},ld=(n,e)=>{if(n.length===0)return 0;switch(e){case"sum":return n.reduce((a,r)=>a+r,0);case"count":return n.length;case"avg":return n.reduce((a,r)=>a+r,0)/n.length;default:throw new Error(`Unsupported aggregation type: ${e}`)}},Iv=(n,e)=>{if(e.chartType==="scatter"){const{xValueColumn:g,yValueColumn:m}=e;if(!g||!m)throw new Error("Scatter plot plan is missing xValueColumn or yValueColumn.");return n.data.map(v=>({[g]:Si(v[g]),[m]:Si(v[m])})).filter(v=>v[g]!==null&&v[m]!==null)}if(e.chartType==="combo"){const{groupByColumn:g,valueColumn:m,aggregation:v,secondaryValueColumn:_,secondaryAggregation:T}=e;if(!g||!m||!v||!_||!T)throw new Error("Combo chart plan is missing required aggregation fields.");const E={};n.data.forEach(N=>{const k=String(N[g]);if(k==="undefined"||k==="null")return;E[k]||(E[k]={primaryValues:[],secondaryValues:[]});const D=Si(N[m]);D!==null&&E[k].primaryValues.push(D);const U=Si(N[_]);U!==null&&E[k].secondaryValues.push(U)});const w=Object.keys(E).filter(N=>E[N].primaryValues.length>0||E[N].secondaryValues.length>0).map(N=>{const k=ld(E[N].primaryValues,v),D=ld(E[N].secondaryValues,T);return{[g]:N,[m]:k,[_]:D}});return uy(w,g)||w.sort((N,k)=>(Number(k[m])||0)-(Number(N[m])||0))}const{groupByColumn:i,valueColumn:a,aggregation:r}=e;if(!i||!r)throw new Error("Analysis plan is missing groupByColumn or aggregation type for non-scatter chart.");const u={};n.data.forEach(g=>{const m=String(g[i]);if(!(m==="undefined"||m==="null"))if(u[m]||(u[m]=[]),a){const v=Si(g[a]);v!==null&&u[m].push(v)}else r==="count"&&u[m].push(1)});const c=Object.keys(u).filter(g=>u[g].length>0).map(g=>{const m=ld(u[g],r),v=a||"count";return{[i]:g,[v]:m}}),p=uy(c,i);if(p)return p;{const g=a||"count";return c.sort((m,v)=>(Number(v[g])||0)-(Number(m[g])||0))}},dy=["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],wE=({data:n,total:e,groupByKey:i,valueKey:a,hiddenLabels:r,onLabelClick:u})=>{const c=p=>typeof p=="number"?p.toLocaleString(void 0,{maximumFractionDigits:2}):p;return C.jsx("div",{className:"text-sm space-y-1 max-h-48 overflow-y-auto pr-2",children:n.map((p,g)=>{const m=String(p[i]),v=Number(p[a])||0,_=e>0?(v/e*100).toFixed(1):"0.0",T=r.includes(m),E=dy[g%dy.length];return C.jsxs("button",{onClick:()=>u(m),className:`w-full flex items-center justify-between p-1.5 rounded-md transition-all duration-200 ${T?"opacity-50":"hover:bg-slate-100"}`,title:`Click to ${T?"show":"hide"} "${m}"`,children:[C.jsxs("div",{className:"flex items-center truncate mr-2",children:[C.jsx("span",{className:"w-3 h-3 rounded-sm mr-2 flex-shrink-0",style:{backgroundColor:T?"#9ca3af":E}}),C.jsx("span",{className:`truncate text-xs ${T?"line-through text-slate-400":"text-slate-700"}`,children:m})]}),C.jsxs("div",{className:"flex items-baseline ml-2 flex-shrink-0",children:[C.jsx("span",{className:`font-semibold text-xs ${T?"text-slate-400":"text-slate-800"}`,children:c(v)}),C.jsxs("span",{className:"text-xs text-slate-500 ml-1.5 w-12 text-right",children:["(",_,"%)"]})]})]},m)})})},RE={},fy=n=>{let e;const i=new Set,a=(v,_)=>{const T=typeof v=="function"?v(e):v;if(!Object.is(T,e)){const E=e;e=_??(typeof T!="object"||T===null)?T:Object.assign({},e,T),i.forEach(w=>w(e,E))}},r=()=>e,g={setState:a,getState:r,getInitialState:()=>m,subscribe:v=>(i.add(v),()=>i.delete(v)),destroy:()=>{(RE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},m=e=n(a,r,g);return g},NE=n=>n?fy(n):fy;var ud={exports:{}},cd={},dd={exports:{}},fd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function ME(){if(hy)return fd;hy=1;var n=mo();function e(_,T){return _===T&&(_!==0||1/_===1/T)||_!==_&&T!==T}var i=typeof Object.is=="function"?Object.is:e,a=n.useState,r=n.useEffect,u=n.useLayoutEffect,c=n.useDebugValue;function p(_,T){var E=T(),w=a({inst:{value:E,getSnapshot:T}}),x=w[0].inst,N=w[1];return u(function(){x.value=E,x.getSnapshot=T,g(x)&&N({inst:x})},[_,E,T]),r(function(){return g(x)&&N({inst:x}),_(function(){g(x)&&N({inst:x})})},[_]),c(E),E}function g(_){var T=_.getSnapshot;_=_.value;try{var E=T();return!i(_,E)}catch{return!0}}function m(_,T){return T()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:p;return fd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:v,fd}var my;function IE(){return my||(my=1,dd.exports=ME()),dd.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function DE(){if(py)return cd;py=1;var n=mo(),e=IE();function i(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var a=typeof Object.is=="function"?Object.is:i,r=e.useSyncExternalStore,u=n.useRef,c=n.useEffect,p=n.useMemo,g=n.useDebugValue;return cd.useSyncExternalStoreWithSelector=function(m,v,_,T,E){var w=u(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=p(function(){function k(F){if(!D){if(D=!0,U=F,F=T(F),E!==void 0&&x.hasValue){var I=x.value;if(E(I,F))return L=I}return L=F}if(I=L,a(U,F))return I;var Q=T(F);return E!==void 0&&E(I,Q)?(U=F,I):(U=F,L=Q)}var D=!1,U,L,G=_===void 0?null:_;return[function(){return k(v())},G===null?void 0:function(){return k(G())}]},[v,_,T,E]);var N=r(m,w[0],w[1]);return c(function(){x.hasValue=!0,x.value=N},[N]),g(N),N},cd}var gy;function PE(){return gy||(gy=1,ud.exports=DE()),ud.exports}var UE=PE();const LE=sf(UE),Dv={},{useDebugValue:kE}=bv,{useSyncExternalStoreWithSelector:qE}=LE;let yy=!1;const BE=n=>n;function VE(n,e=BE,i){(Dv?"production":void 0)!=="production"&&i&&!yy&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),yy=!0);const a=qE(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,i);return kE(a),a}const vy=n=>{(Dv?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?NE(n):n,i=(a,r)=>VE(e,a,r);return Object.assign(i,e),i},OE=n=>n?vy(n):vy;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let HE,GE;function FE(){return{geminiUrl:HE,vertexUrl:GE}}function zE(n,e,i,a){var r,u;if(!(n!=null&&n.baseUrl)){const c=FE();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(u=c.geminiUrl)!==null&&u!==void 0?u:a}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn{}function ne(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(a,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const u=e[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(n,e,i){for(let u=0;u<e.length-1;u++){const c=e[u];if(c.endsWith("[]")){const p=c.slice(0,-2);if(!(p in n))if(Array.isArray(i))n[p]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[p])){const g=n[p];if(Array.isArray(i))for(let m=0;m<g.length;m++){const v=g[m];f(v,e.slice(u+1),i[m])}else for(const m of g)f(m,e.slice(u+1),i)}return}else if(c.endsWith("[0]")){const p=c.slice(0,-3);p in n||(n[p]=[{}]);const g=n[p];f(g[0],e.slice(u+1),i);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const a=e[e.length-1],r=n[a];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[a]=i}function d(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let a=0;a<e.length;a++){if(typeof n!="object"||n===null)return i;const r=e[a];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in n){const c=n[u];return Array.isArray(c)?c.map(p=>d(p,e.slice(a+1),i)):i}else return i}else n=n[r]}return n}catch(a){if(a instanceof TypeError)return i;throw a}}function YE(n,e){for(const[i,a]of Object.entries(e)){const r=i.split("."),u=a.split("."),c=new Set;let p=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){p=g;break}if(p!==-1&&u.length>p)for(let g=p;g<u.length;g++){const m=u[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Nd(n,r,u,0,c)}}function Nd(n,e,i,a,r){if(a>=e.length||typeof n!="object"||n===null)return;const u=e[a];if(u.endsWith("[]")){const c=u.slice(0,-2),p=n;if(c in p&&Array.isArray(p[c]))for(const g of p[c])Nd(g,e,i,a+1,r)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,p=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of p)g[m]=c[m];for(const[m,v]of Object.entries(g)){const _=[];for(const T of i.slice(a))T==="*"?_.push(m):_.push(T);f(c,_,v)}for(const m of p)delete c[m]}}else{const c=n;u in c&&Nd(c[u],e,i,a+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function af(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JE(n){const e={},i=d(n,["operationName"]);i!=null&&f(e,["operationName"],i);const a=d(n,["resourceName"]);return a!=null&&f(e,["_url","resourceName"],a),e}function $E(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],XE(c)),e}function KE(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response"]);return c!=null&&f(e,["response"],QE(c)),e}function XE(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>ZE(c))),f(e,["generatedVideos"],u)}const a=d(n,["raiMediaFilteredCount"]);a!=null&&f(e,["raiMediaFilteredCount"],a);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function QE(n){const e={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>WE(c))),f(e,["generatedVideos"],u)}const a=d(n,["raiMediaFilteredCount"]);a!=null&&f(e,["raiMediaFilteredCount"],a);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function ZE(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],sA(i)),e}function WE(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],aA(i)),e}function jE(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function eA(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function tA(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response"]);return c!=null&&f(e,["response"],nA(c)),e}function nA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["parent"]);a!=null&&f(e,["parent"],a);const r=d(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function Pv(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response"]);return c!=null&&f(e,["response"],iA(c)),e}function iA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["parent"]);a!=null&&f(e,["parent"],a);const r=d(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function sA(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const a=d(n,["encodedVideo"]);a!=null&&f(e,["videoBytes"],af(a));const r=d(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function aA(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const a=d(n,["bytesBase64Encoded"]);a!=null&&f(e,["videoBytes"],af(a));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _y;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_y||(_y={}));var Sy;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Sy||(Sy={}));var Ty;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Ty||(Ty={}));var W;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(W||(W={}));var Cy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Cy||(Cy={}));var Ey;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ey||(Ey={}));var Ay;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Ay||(Ay={}));var xy;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(xy||(xy={}));var by;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(by||(by={}));var wy;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wy||(wy={}));var Ry;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Ry||(Ry={}));var Ny;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Ny||(Ny={}));var My;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(My||(My={}));var Iy;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Iy||(Iy={}));var Dy;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Dy||(Dy={}));var Py;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Py||(Py={}));var Uy;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Uy||(Uy={}));var Ly;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ly||(Ly={}));var ll;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ll||(ll={}));var ky;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ky||(ky={}));var qy;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(qy||(qy={}));var By;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(By||(By={}));var Md;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Md||(Md={}));var Vy;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Vy||(Vy={}));var Oy;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Oy||(Oy={}));var Hy;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Hy||(Hy={}));var Gy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Gy||(Gy={}));var Fy;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fy||(Fy={}));var zy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(zy||(zy={}));var Yy;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Yy||(Yy={}));var Jy;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Jy||(Jy={}));var $y;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})($y||($y={}));var Ky;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ky||(Ky={}));var Xy;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Xy||(Xy={}));var Qy;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Qy||(Qy={}));var Zy;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Zy||(Zy={}));var Wy;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Wy||(Wy={}));var jy;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(jy||(jy={}));var e0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(e0||(e0={}));var t0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(t0||(t0={}));var n0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(n0||(n0={}));var i0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(i0||(i0={}));var s0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(s0||(s0={}));var a0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(a0||(a0={}));var o0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(o0||(o0={}));var r0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(r0||(r0={}));var l0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(l0||(l0={}));var u0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(u0||(u0={}));var c0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(c0||(c0={}));var d0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(d0||(d0={}));var f0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(f0||(f0={}));var h0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(h0||(h0={}));var zs;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(zs||(zs={}));class Id{constructor(e){const i={};for(const a of e.headers.entries())i[a[0]]=a[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class eo{get text(){var e,i,a,r,u,c,p,g;if(((r=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(g=(p=(c=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[E,w]of Object.entries(T))E!=="text"&&E!=="thought"&&(w!==null||w!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,a,r,u,c,p,g;if(((r=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(g=(p=(c=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,a,r,u,c,p,g;if(((r=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(p=(c=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,a,r,u,c,p,g,m;if(((r=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(p=(c=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,a,r,u,c,p,g,m;if(((r=(a=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(p=(c=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class m0{}class p0{}class oA{}class rA{}class lA{}class uA{}class g0{}class y0{}class v0{}class cA{}class ul{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const a=new ul;let r;const u=e;return i?r=KE(u):r=$E(u),Object.assign(a,r),a}}class _0{}class S0{}class T0{}class dA{}class fA{}class hA{}class of{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const a=new of,u=tA(e);return Object.assign(a,u),a}}class mA{}class pA{}class gA{}class C0{}class yA{get text(){var e,i,a;let r="",u=!1;const c=[];for(const p of(a=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&a!==void 0?a:[]){for(const[g,m]of Object.entries(p))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,r+=p.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var e,i,a;let r="";const u=[];for(const c of(a=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&a!==void 0?a:[]){for(const[p,g]of Object.entries(c))p!=="inlineData"&&g!==null&&u.push(p);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class vA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const a=new rf,u=Pv(e);return Object.assign(a,u),a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Uv(n,e){const i=De(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Lv(n){return Array.isArray(n)?n.map(e=>cl(e)):[cl(n)]}function cl(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function kv(n){const e=cl(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qv(n){const e=cl(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function E0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Bv(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>E0(e)):[E0(n)]}function Dd(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function A0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function x0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Tt(n){if(n==null)throw new Error("ContentUnion is required");return Dd(n)?n:{role:"user",parts:Bv(n)}}function lf(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const a=Tt(i);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const i=Tt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Tt(i)):[Tt(e)]}function nn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(A0(n)||x0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tt(n)]}const e=[],i=[],a=Dd(n[0]);for(const r of n){const u=Dd(r);if(u!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(r);else{if(A0(r)||x0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return a||e.push({role:"user",parts:Bv(i)}),e}function _A(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(a=>a!=="null");if(i.length===1)e.type=Object.values(W).includes(i[0].toUpperCase())?i[0].toUpperCase():W.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of i)e.anyOf.push({type:Object.values(W).includes(a.toUpperCase())?a.toUpperCase():W.TYPE_UNSPECIFIED})}}function $s(n){const e={},i=["items"],a=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,n=u[1]):u[1].type==="null"&&(e.nullable=!0,n=u[0])),n.type instanceof Array&&_A(n.type,e);for(const[c,p]of Object.entries(n))if(p!=null)if(c=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(W).includes(p.toUpperCase())?p.toUpperCase():W.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=$s(p);else if(a.includes(c)){const g=[];for(const m of p){if(m.type=="null"){e.nullable=!0;continue}g.push($s(m))}e[c]=g}else if(r.includes(c)){const g={};for(const[m,v]of Object.entries(p))g[m]=$s(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=p}return e}function uf(n){return $s(n)}function cf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function df(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function js(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$s(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$s(e.response));return n}function ea(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function SA(n,e,i,a=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===a;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function Gn(n,e){if(typeof e!="string")throw new Error("name must be a string");return SA(n,e,"cachedContents")}function Vv(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ei(n){return af(n)}function TA(n){return n!=null&&typeof n=="object"&&"name"in n}function CA(n){return n!=null&&typeof n=="object"&&"video"in n}function EA(n){return n!=null&&typeof n=="object"&&"uri"in n}function Ov(n){var e;let i;if(TA(n)&&(i=n.name),!(EA(n)&&(i=n.uri,i===void 0))&&!(CA(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Hv(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Gv(n){for(const e of["models","tunedModels","publisherModels"])if(AA(n,e))return n[e];return[]}function AA(n,e){return n!==null&&typeof n=="object"&&e in n}function xA(n,e={}){const i=n,a={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(a.responseJsonSchema=i.outputSchema),e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function bA(n,e={}){const i=[],a=new Set;for(const r of n){const u=r.name;if(a.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);a.add(u);const c=xA(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function Fv(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const a=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function wA(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zv(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let u=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ta(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Yv(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RA(n){const e={},i=d(n,["responsesFile"]);i!=null&&f(e,["fileName"],i);const a=d(n,["inlinedResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>ax(c))),f(e,["inlinedResponses"],u)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["inlinedEmbedContentResponses"],u)}return e}function NA(n){const e={},i=d(n,["predictionsFormat"]);i!=null&&f(e,["format"],i);const a=d(n,["gcsDestination","outputUriPrefix"]);a!=null&&f(e,["gcsUri"],a);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function MA(n){const e={},i=d(n,["format"]);i!=null&&f(e,["predictionsFormat"],i);const a=d(n,["gcsUri"]);a!=null&&f(e,["gcsDestination","outputUriPrefix"],a);const r=d(n,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Wr(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata","displayName"]);a!=null&&f(e,["displayName"],a);const r=d(n,["metadata","state"]);r!=null&&f(e,["state"],Yv(r));const u=d(n,["metadata","createTime"]);u!=null&&f(e,["createTime"],u);const c=d(n,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const p=d(n,["metadata","updateTime"]);p!=null&&f(e,["updateTime"],p);const g=d(n,["metadata","model"]);g!=null&&f(e,["model"],g);const m=d(n,["metadata","output"]);return m!=null&&f(e,["dest"],RA(zv(m))),e}function Pd(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["displayName"]);a!=null&&f(e,["displayName"],a);const r=d(n,["state"]);r!=null&&f(e,["state"],Yv(r));const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["createTime"]);c!=null&&f(e,["createTime"],c);const p=d(n,["startTime"]);p!=null&&f(e,["startTime"],p);const g=d(n,["endTime"]);g!=null&&f(e,["endTime"],g);const m=d(n,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=d(n,["model"]);v!=null&&f(e,["model"],v);const _=d(n,["inputConfig"]);_!=null&&f(e,["src"],IA(_));const T=d(n,["outputConfig"]);T!=null&&f(e,["dest"],NA(zv(T)));const E=d(n,["completionStats"]);return E!=null&&f(e,["completionStats"],E),e}function IA(n){const e={},i=d(n,["instancesFormat"]);i!=null&&f(e,["format"],i);const a=d(n,["gcsSource","uris"]);a!=null&&f(e,["gcsUri"],a);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function DA(n,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=d(e,["fileName"]);a!=null&&f(i,["fileName"],a);const r=d(e,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>sx(n,c))),f(i,["requests","requests"],u)}return i}function PA(n){const e={},i=d(n,["format"]);i!=null&&f(e,["instancesFormat"],i);const a=d(n,["gcsUri"]);a!=null&&f(e,["gcsSource","uris"],a);const r=d(n,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function UA(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function LA(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],ta(n,a)),i}function kA(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],ta(n,a)),i}function qA(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const a=d(n,["citationMetadata"]);a!=null&&f(e,["citationMetadata"],BA(a));const r=d(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const u=d(n,["finishReason"]);u!=null&&f(e,["finishReason"],u);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const p=d(n,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const m=d(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>E)),f(e,["safetyRatings"],T)}const _=d(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function BA(n){const e={},i=d(n,["citationSources"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>r)),f(e,["citations"],a)}return e}function Jv(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>fx(u))),f(e,["parts"],r)}const a=d(n,["role"]);return a!=null&&f(e,["role"],a),e}function VA(n,e){const i={},a=d(n,["displayName"]);if(e!==void 0&&a!=null&&f(e,["batch","displayName"],a),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function OA(n,e){const i={},a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const r=d(n,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],MA(wA(r))),i}function b0(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["src"]);r!=null&&f(i,["batch","inputConfig"],DA(n,Fv(n,r)));const u=d(e,["config"]);return u!=null&&VA(u,i),i}function HA(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["model"],De(n,a));const r=d(e,["src"]);r!=null&&f(i,["inputConfig"],PA(Fv(n,r)));const u=d(e,["config"]);return u!=null&&OA(u,i),i}function GA(n,e){const i={},a=d(n,["displayName"]);return e!==void 0&&a!=null&&f(e,["batch","displayName"],a),i}function FA(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["src"]);r!=null&&f(i,["batch","inputConfig"],QA(n,r));const u=d(e,["config"]);return u!=null&&GA(u,i),i}function zA(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],ta(n,a)),i}function YA(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],ta(n,a)),i}function JA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["name"]);a!=null&&f(e,["name"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);return u!=null&&f(e,["error"],u),e}function $A(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["name"]);a!=null&&f(e,["name"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);return u!=null&&f(e,["error"],u),e}function KA(n,e){const i={},a=d(e,["contents"]);if(a!=null){let u=lf(n,a);Array.isArray(u)&&(u=u.map(c=>c)),f(i,["requests[]","request","content"],u)}const r=d(e,["config"]);return r!=null&&(f(i,["_self"],XA(r,i)),YE(i,{"requests[].*":"requests[].request.*"})),i}function XA(n,e){const i={},a=d(n,["taskType"]);e!==void 0&&a!=null&&f(e,["requests[]","taskType"],a);const r=d(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function QA(n,e){const i={},a=d(e,["fileName"]);a!=null&&f(i,["file_name"],a);const r=d(e,["inlinedRequests"]);return r!=null&&f(i,["requests"],KA(n,r)),i}function ZA(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function WA(n,e,i){const a={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&f(i,["systemInstruction"],Jv(Tt(r)));const u=d(e,["temperature"]);u!=null&&f(a,["temperature"],u);const c=d(e,["topP"]);c!=null&&f(a,["topP"],c);const p=d(e,["topK"]);p!=null&&f(a,["topK"],p);const g=d(e,["candidateCount"]);g!=null&&f(a,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(a,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(a,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&f(a,["logprobs"],T);const E=d(e,["presencePenalty"]);E!=null&&f(a,["presencePenalty"],E);const w=d(e,["frequencyPenalty"]);w!=null&&f(a,["frequencyPenalty"],w);const x=d(e,["seed"]);x!=null&&f(a,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&f(a,["responseMimeType"],N);const k=d(e,["responseSchema"]);k!=null&&f(a,["responseSchema"],uf(k));const D=d(e,["responseJsonSchema"]);if(D!=null&&f(a,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=d(e,["safetySettings"]);if(i!==void 0&&U!=null){let te=U;Array.isArray(te)&&(te=te.map(Te=>hx(Te))),f(i,["safetySettings"],te)}const L=d(e,["tools"]);if(i!==void 0&&L!=null){let te=ea(L);Array.isArray(te)&&(te=te.map(Te=>mx(js(Te)))),f(i,["tools"],te)}const G=d(e,["toolConfig"]);if(i!==void 0&&G!=null&&f(i,["toolConfig"],G),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=d(e,["cachedContent"]);i!==void 0&&F!=null&&f(i,["cachedContent"],Gn(n,F));const I=d(e,["responseModalities"]);I!=null&&f(a,["responseModalities"],I);const Q=d(e,["mediaResolution"]);Q!=null&&f(a,["mediaResolution"],Q);const z=d(e,["speechConfig"]);if(z!=null&&f(a,["speechConfig"],cf(z)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=d(e,["thinkingConfig"]);Z!=null&&f(a,["thinkingConfig"],Z);const X=d(e,["imageConfig"]);return X!=null&&f(a,["imageConfig"],X),a}function jA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(m=>qA(m))),f(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const u=d(n,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const p=d(n,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function ex(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],ta(n,a)),i}function tx(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],ta(n,a)),i}function nx(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function ix(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function sx(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["request","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let p=nn(r);Array.isArray(p)&&(p=p.map(g=>Jv(g))),f(i,["request","contents"],p)}const u=d(e,["metadata"]);u!=null&&f(i,["metadata"],u);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],WA(n,c,d(i,["request"],{}))),i}function ax(n){const e={},i=d(n,["response"]);i!=null&&f(e,["response"],jA(i));const a=d(n,["error"]);return a!=null&&f(e,["error"],a),e}function ox(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function rx(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const u=d(n,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),i}function lx(n){const e={},i=d(n,["config"]);return i!=null&&ox(i,e),e}function ux(n){const e={},i=d(n,["config"]);return i!=null&&rx(i,e),e}function cx(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>Wr(c))),f(e,["batchJobs"],u)}return e}function dx(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>Pd(c))),f(e,["batchJobs"],u)}return e}function fx(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const a=d(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const r=d(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&f(e,["fileData"],ZA(u));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const p=d(n,["inlineData"]);p!=null&&f(e,["inlineData"],UA(p));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function hx(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=d(n,["threshold"]);return a!=null&&f(e,["threshold"],a),e}function mx(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const r=d(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=d(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],nx(p));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],ix(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var On;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(On||(On={}));class Qi{constructor(e,i,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,a,r)}init(e,i,a){var r,u;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!a||Object.keys(a).length===0?c={config:{}}:typeof a=="object"?c=Object.assign({},a):c=a,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(u=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let px=class extends Hn{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new Qi(On.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=b0(this.apiClient,e),a=i._url,r=ne("{model}:batchGenerateContent",a),p=i.batch.inputConfig.requests,g=p.requests,m=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}m.push(_)}return p.requests=m,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const a=i?Object.assign({},i):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const u=this.getGcsUri(e),c=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?a.dest=`${u.slice(0,-6)}/dest`:a.dest=`${u}_dest_${r}`;else if(c)a.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=HA(this.apiClient,e);return p=ne("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Pd(v))}else{const m=b0(this.apiClient,e);return p=ne("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>Wr(v))}}async createEmbeddingsInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=FA(this.apiClient,e);return u=ne("{model}:asyncBatchEmbedContent",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>Wr(g))}}async get(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=tx(this.apiClient,e);return p=ne("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Pd(v))}else{const m=ex(this.apiClient,e);return p=ne("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>Wr(v))}}async cancel(e){var i,a,r,u;let c="",p={};if(this.apiClient.isVertexAI()){const g=kA(this.apiClient,e);c=ne("batchPredictionJobs/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const g=LA(this.apiClient,e);c=ne("batches/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=ux(e);return p=ne("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=dx(v),T=new C0;return Object.assign(T,_),T})}else{const m=lx(e);return p=ne("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=cx(v),T=new C0;return Object.assign(T,_),T})}}async delete(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=YA(this.apiClient,e);return p=ne("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>$A(v))}else{const m=zA(this.apiClient,e);return p=ne("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>JA(v))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gx(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function w0(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>qx(u))),f(e,["parts"],r)}const a=d(n,["role"]);return a!=null&&f(e,["role"],a),e}function yx(n,e){const i={},a=d(n,["ttl"]);e!==void 0&&a!=null&&f(e,["ttl"],a);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const u=d(n,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let v=nn(c);Array.isArray(v)&&(v=v.map(_=>w0(_))),f(e,["contents"],v)}const p=d(n,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],w0(Tt(p)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>Bx(_))),f(e,["tools"],v)}const m=d(n,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],m),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function vx(n,e){const i={},a=d(n,["ttl"]);e!==void 0&&a!=null&&f(e,["ttl"],a);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const u=d(n,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let _=nn(c);Array.isArray(_)&&(_=_.map(T=>T)),f(e,["contents"],_)}const p=d(n,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],Tt(p));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>Vx(T))),f(e,["tools"],_)}const m=d(n,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function _x(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["model"],Uv(n,a));const r=d(e,["config"]);return r!=null&&yx(r,i),i}function Sx(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["model"],Uv(n,a));const r=d(e,["config"]);return r!=null&&vx(r,i),i}function Tx(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],Gn(n,a)),i}function Cx(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],Gn(n,a)),i}function Ex(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Ax(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function xx(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function bx(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const a=d(n,["name"]);a!=null&&f(e,["name"],a);const r=d(n,["parameters"]);r!=null&&f(e,["parameters"],r);const u=d(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const p=d(n,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function wx(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],Gn(n,a)),i}function Rx(n,e){const i={},a=d(e,["name"]);return a!=null&&f(i,["_url","name"],Gn(n,a)),i}function Nx(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Mx(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Ix(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function Dx(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function Px(n){const e={},i=d(n,["config"]);return i!=null&&Ix(i,e),e}function Ux(n){const e={},i=d(n,["config"]);return i!=null&&Dx(i,e),e}function Lx(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["cachedContents"],u)}return e}function kx(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["cachedContents"],u)}return e}function qx(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const a=d(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const r=d(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&f(e,["fileData"],xx(u));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const p=d(n,["inlineData"]);p!=null&&f(e,["inlineData"],gx(p));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function Bx(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const r=d(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=d(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],Nx(p));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],Mx(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Vx(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>bx(T))),f(e,["functionDeclarations"],_)}const a=d(n,["retrieval"]);a!=null&&f(e,["retrieval"],a);const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const u=d(n,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const p=d(n,["enterpriseWebSearch"]);p!=null&&f(e,["enterpriseWebSearch"],p);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Ox(n,e){const i={},a=d(n,["ttl"]);e!==void 0&&a!=null&&f(e,["ttl"],a);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),i}function Hx(n,e){const i={},a=d(n,["ttl"]);e!==void 0&&a!=null&&f(e,["ttl"],a);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),i}function Gx(n,e){const i={},a=d(e,["name"]);a!=null&&f(i,["_url","name"],Gn(n,a));const r=d(e,["config"]);return r!=null&&Ox(r,i),i}function Fx(n,e){const i={},a=d(e,["name"]);a!=null&&f(i,["_url","name"],Gn(n,a));const r=d(e,["config"]);return r!=null&&Hx(r,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zx extends Hn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Qi(On.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(i),i)}async create(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Sx(this.apiClient,e);return p=ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=_x(this.apiClient,e);return p=ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Rx(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=wx(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Cx(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ax(v),T=new S0;return Object.assign(T,_),T})}else{const m=Tx(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ex(v),T=new S0;return Object.assign(T,_),T})}}async update(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Fx(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Gx(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Ux(e);return p=ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=kx(v),T=new T0;return Object.assign(T,_),T})}else{const m=Px(e);return p=ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Lx(v),T=new T0;return Object.assign(T,_),T})}}}function R0(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],a=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(n){return this instanceof ze?(this.v=n,this):new ze(n)}function Ks(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(n,e||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(E){return function(w){return Promise.resolve(w).then(E,_)}}function p(E,w){a[E]&&(r[E]=function(x){return new Promise(function(N,k){u.push([E,x,N,k])>1||g(E,x)})},w&&(r[E]=w(r[E])))}function g(E,w){try{m(a[E](w))}catch(x){T(u[0][3],x)}}function m(E){E.value instanceof ze?Promise.resolve(E.value.v).then(v,_):T(u[0][2],E)}function v(E){g("next",E)}function _(E){g("throw",E)}function T(E,w){E(w),u.shift(),u.length&&g(u[0][0],u[0][1])}}function lo(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof R0=="function"?R0(n):n[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(u){i[u]=n[u]&&function(c){return new Promise(function(p,g){c=n[u](c),r(p,g,c.done,c.value)})}}function r(u,c,p,g){Promise.resolve(g).then(function(m){u({value:m,done:p})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yx(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:$v(i)}function $v(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Jx(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function N0(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let a=0;for(;a<i;)if(n[a].role==="user")e.push(n[a]),a++;else{const r=[];let u=!0;for(;a<i&&n[a].role==="model";)r.push(n[a]),u&&!$v(n[a])&&(u=!1),a++;u?e.push(...r):e.pop()}return e}class $x{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Kx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let Kx=class{constructor(e,i,a,r={},u=[]){this.apiClient=e,this.modelsModule=i,this.model=a,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),Jx(u)}async sendMessage(e){var i;await this.sendPromise;const a=Tt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var u,c,p;const g=await r,m=(c=(u=g.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(p=v.slice(_))!==null&&p!==void 0?p:[]);const E=m?[m]:[];this.recordHistory(a,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const a=Tt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,a)}getHistory(e=!1){const i=e?N0(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var a,r;return Ks(this,arguments,function*(){var c,p,g,m;const v=[];try{for(var _=!0,T=lo(e),E;E=yield ze(T.next()),c=E.done,!c;_=!0){m=E.value,_=!1;const w=m;if(Yx(w)){const x=(r=(a=w.candidates)===null||a===void 0?void 0:a[0])===null||r===void 0?void 0:r.content;x!==void 0&&v.push(x)}yield yield ze(w)}}catch(w){p={error:w}}finally{try{!_&&!c&&(g=T.return)&&(yield ze(g.call(T)))}finally{if(p)throw p.error}}this.recordHistory(i,v)})}recordHistory(e,i,a){let r=[];i.length>0&&i.every(u=>u.role!==void 0)?r=i:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...N0(a)):this.history.push(e),this.history.push(...r)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _l extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_l.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xx(n){const e={},i=d(n,["file"]);return i!=null&&f(e,["file"],i),e}function Qx(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Zx(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],Ov(i)),e}function Wx(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function jx(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],Ov(i)),e}function eb(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function tb(n){const e={},i=d(n,["config"]);return i!=null&&eb(i,e),e}function nb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["files"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ib=class extends Hn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Qi(On.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tb(e);return u=ne("files",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=nb(g),v=new mA;return Object.assign(v,m),v})}}async createInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Xx(e);return u=ne("upload/v1beta/files",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Qx(g),v=new pA;return Object.assign(v,m),v})}}async get(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=jx(e);return u=ne("files/{file}",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Zx(e);return u=ne("files/{file}",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=Wx(g),v=new gA;return Object.assign(v,m),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jr(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function sb(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>_b(u))),f(e,["parts"],r)}const a=d(n,["role"]);return a!=null&&f(e,["role"],a),e}function ab(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function ob(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const a=d(n,["name"]);a!=null&&f(e,["name"],a);const r=d(n,["parameters"]);r!=null&&f(e,["parameters"],r);const u=d(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const p=d(n,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function rb(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const a=d(n,["responseJsonSchema"]);a!=null&&f(e,["responseJsonSchema"],a);const r=d(n,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const u=d(n,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const p=d(n,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(n,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const T=d(n,["responseLogprobs"]);T!=null&&f(e,["responseLogprobs"],T);const E=d(n,["responseMimeType"]);E!=null&&f(e,["responseMimeType"],E);const w=d(n,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const x=d(n,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const N=d(n,["routingConfig"]);N!=null&&f(e,["routingConfig"],N);const k=d(n,["seed"]);k!=null&&f(e,["seed"],k);const D=d(n,["speechConfig"]);D!=null&&f(e,["speechConfig"],Kv(D));const U=d(n,["stopSequences"]);U!=null&&f(e,["stopSequences"],U);const L=d(n,["temperature"]);L!=null&&f(e,["temperature"],L);const G=d(n,["thinkingConfig"]);G!=null&&f(e,["thinkingConfig"],G);const F=d(n,["topK"]);F!=null&&f(e,["topK"],F);const I=d(n,["topP"]);if(I!=null&&f(e,["topP"],I),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lb(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function ub(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function cb(n,e){const i={},a=d(n,["generationConfig"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig"],a);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=d(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const p=d(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],df(_));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const E=d(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);const w=d(n,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],sb(Tt(w)));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let F=ea(x);Array.isArray(F)&&(F=F.map(I=>Tb(js(I)))),f(e,["setup","tools"],F)}const N=d(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],Sb(N));const k=d(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);const D=d(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","outputAudioTranscription"],D);const U=d(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&f(e,["setup","realtimeInputConfig"],U);const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const G=d(n,["proactivity"]);return e!==void 0&&G!=null&&f(e,["setup","proactivity"],G),i}function db(n,e){const i={},a=d(n,["generationConfig"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig"],rb(a));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=d(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const p=d(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Kv(df(_)));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const E=d(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);const w=d(n,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],Tt(w));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let F=ea(x);Array.isArray(F)&&(F=F.map(I=>Cb(js(I)))),f(e,["setup","tools"],F)}const N=d(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],N);const k=d(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);const D=d(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","outputAudioTranscription"],D);const U=d(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&f(e,["setup","realtimeInputConfig"],U);const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const G=d(n,["proactivity"]);return e!==void 0&&G!=null&&f(e,["setup","proactivity"],G),i}function fb(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["setup","model"],De(n,a));const r=d(e,["config"]);return r!=null&&f(i,["config"],cb(r,i)),i}function hb(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["setup","model"],De(n,a));const r=d(e,["config"]);return r!=null&&f(i,["config"],db(r,i)),i}function mb(n){const e={},i=d(n,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function pb(n){const e={},i=d(n,["weightedPrompts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>r)),f(e,["weightedPrompts"],a)}return e}function gb(n){const e={},i=d(n,["media"]);if(i!=null){let m=Lv(i);Array.isArray(m)&&(m=m.map(v=>jr(v))),f(e,["mediaChunks"],m)}const a=d(n,["audio"]);a!=null&&f(e,["audio"],jr(qv(a)));const r=d(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const u=d(n,["video"]);u!=null&&f(e,["video"],jr(kv(u)));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const p=d(n,["activityStart"]);p!=null&&f(e,["activityStart"],p);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function yb(n){const e={},i=d(n,["media"]);if(i!=null){let m=Lv(i);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const a=d(n,["audio"]);a!=null&&f(e,["audio"],qv(a));const r=d(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const u=d(n,["video"]);u!=null&&f(e,["video"],kv(u));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const p=d(n,["activityStart"]);p!=null&&f(e,["activityStart"],p);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function vb(n){const e={},i=d(n,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const a=d(n,["serverContent"]);a!=null&&f(e,["serverContent"],a);const r=d(n,["toolCall"]);r!=null&&f(e,["toolCall"],r);const u=d(n,["toolCallCancellation"]);u!=null&&f(e,["toolCallCancellation"],u);const c=d(n,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],Eb(c));const p=d(n,["goAway"]);p!=null&&f(e,["goAway"],p);const g=d(n,["sessionResumptionUpdate"]);return g!=null&&f(e,["sessionResumptionUpdate"],g),e}function _b(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const a=d(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const r=d(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&f(e,["fileData"],ab(u));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const p=d(n,["inlineData"]);p!=null&&f(e,["inlineData"],jr(p));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function Sb(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Kv(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const a=d(n,["voiceConfig"]);if(a!=null&&f(e,["voiceConfig"],a),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Tb(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const r=d(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=d(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],lb(p));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],ub(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Cb(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>ob(T))),f(e,["functionDeclarations"],_)}const a=d(n,["retrieval"]);a!=null&&f(e,["retrieval"],a);const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const u=d(n,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const p=d(n,["enterpriseWebSearch"]);p!=null&&f(e,["enterpriseWebSearch"],p);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Eb(n){const e={},i=d(n,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const a=d(n,["cachedContentTokenCount"]);a!=null&&f(e,["cachedContentTokenCount"],a);const r=d(n,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const u=d(n,["toolUsePromptTokenCount"]);u!=null&&f(e,["toolUsePromptTokenCount"],u);const c=d(n,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const p=d(n,["totalTokenCount"]);p!=null&&f(e,["totalTokenCount"],p);const g=d(n,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(w=>w)),f(e,["promptTokensDetails"],E)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(w=>w)),f(e,["cacheTokensDetails"],E)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(w=>w)),f(e,["responseTokensDetails"],E)}const _=d(n,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>w)),f(e,["toolUsePromptTokensDetails"],E)}const T=d(n,["trafficType"]);return T!=null&&f(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ab(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function xb(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const a=d(n,["citationMetadata"]);a!=null&&f(e,["citationMetadata"],bb(a));const r=d(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const u=d(n,["finishReason"]);u!=null&&f(e,["finishReason"],u);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const p=d(n,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const m=d(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>E)),f(e,["safetyRatings"],T)}const _=d(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function bb(n){const e={},i=d(n,["citationSources"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>r)),f(e,["citations"],a)}return e}function wb(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let u=nn(r);Array.isArray(u)&&(u=u.map(c=>c)),f(i,["contents"],u)}return i}function Rb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["tokensInfo"],r)}return e}function Nb(n){const e={},i=d(n,["values"]);i!=null&&f(e,["values"],i);const a=d(n,["statistics"]);return a!=null&&f(e,["statistics"],Mb(a)),e}function Mb(n){const e={},i=d(n,["truncated"]);i!=null&&f(e,["truncated"],i);const a=d(n,["token_count"]);return a!=null&&f(e,["tokenCount"],a),e}function Sl(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Lw(u))),f(e,["parts"],r)}const a=d(n,["role"]);return a!=null&&f(e,["role"],a),e}function Ib(n){const e={},i=d(n,["controlType"]);i!=null&&f(e,["controlType"],i);const a=d(n,["enableControlImageComputation"]);return a!=null&&f(e,["computeControl"],a),e}function Db(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Pb(n,e){const i={},a=d(n,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Tt(a));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>jv(p))),f(e,["tools"],c)}const u=d(n,["generationConfig"]);return e!==void 0&&u!=null&&f(e,["generationConfig"],Cw(u)),i}function Ub(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let c=nn(r);Array.isArray(c)&&(c=c.map(p=>Sl(p))),f(i,["contents"],c)}const u=d(e,["config"]);return u!=null&&Db(u),i}function Lb(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let c=nn(r);Array.isArray(c)&&(c=c.map(p=>p)),f(i,["contents"],c)}const u=d(e,["config"]);return u!=null&&Pb(u,i),i}function kb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["totalTokens"]);a!=null&&f(e,["totalTokens"],a);const r=d(n,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function qb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["totalTokens"]);return a!=null&&f(e,["totalTokens"],a),e}function Bb(n,e){const i={},a=d(e,["model"]);return a!=null&&f(i,["_url","name"],De(n,a)),i}function Vb(n,e){const i={},a=d(e,["model"]);return a!=null&&f(i,["_url","name"],De(n,a)),i}function Ob(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Hb(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Gb(n,e){const i={},a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&f(e,["parameters","sampleCount"],u);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const p=d(n,["guidanceScale"]);e!==void 0&&p!=null&&f(e,["parameters","guidanceScale"],p);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const T=d(n,["includeRaiReason"]);e!==void 0&&T!=null&&f(e,["parameters","includeRaiReason"],T);const E=d(n,["language"]);e!==void 0&&E!=null&&f(e,["parameters","language"],E);const w=d(n,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const x=d(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const N=d(n,["addWatermark"]);e!==void 0&&N!=null&&f(e,["parameters","addWatermark"],N);const k=d(n,["labels"]);e!==void 0&&k!=null&&f(e,["labels"],k);const D=d(n,["editMode"]);e!==void 0&&D!=null&&f(e,["parameters","editMode"],D);const U=d(n,["baseSteps"]);return e!==void 0&&U!=null&&f(e,["parameters","editConfig","baseSteps"],U),i}function Fb(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["prompt"]);r!=null&&f(i,["instances[0]","prompt"],r);const u=d(e,["referenceImages"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>Hw(g))),f(i,["instances[0]","referenceImages"],p)}const c=d(e,["config"]);return c!=null&&Gb(c,i),i}function zb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Tl(u))),f(e,["generatedImages"],r)}return e}function Yb(n,e){const i={},a=d(n,["taskType"]);e!==void 0&&a!=null&&f(e,["requests[]","taskType"],a);const r=d(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Jb(n,e){const i={},a=d(n,["taskType"]);e!==void 0&&a!=null&&f(e,["instances[]","task_type"],a);const r=d(n,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const u=d(n,["outputDimensionality"]);e!==void 0&&u!=null&&f(e,["parameters","outputDimensionality"],u);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const p=d(n,["autoTruncate"]);return e!==void 0&&p!=null&&f(e,["parameters","autoTruncate"],p),i}function $b(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let p=lf(n,r);Array.isArray(p)&&(p=p.map(g=>g)),f(i,["requests[]","content"],p)}const u=d(e,["config"]);u!=null&&Yb(u,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],De(n,c)),i}function Kb(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let c=lf(n,r);Array.isArray(c)&&(c=c.map(p=>p)),f(i,["instances[]","content"],c)}const u=d(e,["config"]);return u!=null&&Jb(u,i),i}function Xb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["embeddings"],u)}const r=d(n,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function Qb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["predictions[]","embeddings"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>Nb(c))),f(e,["embeddings"],u)}const r=d(n,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function Zb(n){const e={},i=d(n,["endpoint"]);i!=null&&f(e,["name"],i);const a=d(n,["deployedModelId"]);return a!=null&&f(e,["deployedModelId"],a),e}function Wb(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function jb(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const a=d(n,["name"]);a!=null&&f(e,["name"],a);const r=d(n,["parameters"]);r!=null&&f(e,["parameters"],r);const u=d(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const p=d(n,["responseJsonSchema"]);return p!=null&&f(e,["responseJsonSchema"],p),e}function ew(n,e,i){const a={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&f(i,["systemInstruction"],Sl(Tt(r)));const u=d(e,["temperature"]);u!=null&&f(a,["temperature"],u);const c=d(e,["topP"]);c!=null&&f(a,["topP"],c);const p=d(e,["topK"]);p!=null&&f(a,["topK"],p);const g=d(e,["candidateCount"]);g!=null&&f(a,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(a,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(a,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&f(a,["logprobs"],T);const E=d(e,["presencePenalty"]);E!=null&&f(a,["presencePenalty"],E);const w=d(e,["frequencyPenalty"]);w!=null&&f(a,["frequencyPenalty"],w);const x=d(e,["seed"]);x!=null&&f(a,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&f(a,["responseMimeType"],N);const k=d(e,["responseSchema"]);k!=null&&f(a,["responseSchema"],uf(k));const D=d(e,["responseJsonSchema"]);if(D!=null&&f(a,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=d(e,["safetySettings"]);if(i!==void 0&&U!=null){let te=U;Array.isArray(te)&&(te=te.map(Te=>Gw(Te))),f(i,["safetySettings"],te)}const L=d(e,["tools"]);if(i!==void 0&&L!=null){let te=ea(L);Array.isArray(te)&&(te=te.map(Te=>Kw(js(Te)))),f(i,["tools"],te)}const G=d(e,["toolConfig"]);if(i!==void 0&&G!=null&&f(i,["toolConfig"],G),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=d(e,["cachedContent"]);i!==void 0&&F!=null&&f(i,["cachedContent"],Gn(n,F));const I=d(e,["responseModalities"]);I!=null&&f(a,["responseModalities"],I);const Q=d(e,["mediaResolution"]);Q!=null&&f(a,["mediaResolution"],Q);const z=d(e,["speechConfig"]);if(z!=null&&f(a,["speechConfig"],cf(z)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=d(e,["thinkingConfig"]);Z!=null&&f(a,["thinkingConfig"],Z);const X=d(e,["imageConfig"]);return X!=null&&f(a,["imageConfig"],X),a}function tw(n,e,i){const a={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&f(i,["systemInstruction"],Tt(r));const u=d(e,["temperature"]);u!=null&&f(a,["temperature"],u);const c=d(e,["topP"]);c!=null&&f(a,["topP"],c);const p=d(e,["topK"]);p!=null&&f(a,["topK"],p);const g=d(e,["candidateCount"]);g!=null&&f(a,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(a,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(a,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&f(a,["logprobs"],T);const E=d(e,["presencePenalty"]);E!=null&&f(a,["presencePenalty"],E);const w=d(e,["frequencyPenalty"]);w!=null&&f(a,["frequencyPenalty"],w);const x=d(e,["seed"]);x!=null&&f(a,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&f(a,["responseMimeType"],N);const k=d(e,["responseSchema"]);k!=null&&f(a,["responseSchema"],uf(k));const D=d(e,["responseJsonSchema"]);D!=null&&f(a,["responseJsonSchema"],D);const U=d(e,["routingConfig"]);U!=null&&f(a,["routingConfig"],U);const L=d(e,["modelSelectionConfig"]);L!=null&&f(a,["modelConfig"],L);const G=d(e,["safetySettings"]);if(i!==void 0&&G!=null){let V=G;Array.isArray(V)&&(V=V.map(j=>j)),f(i,["safetySettings"],V)}const F=d(e,["tools"]);if(i!==void 0&&F!=null){let V=ea(F);Array.isArray(V)&&(V=V.map(j=>jv(js(j)))),f(i,["tools"],V)}const I=d(e,["toolConfig"]);i!==void 0&&I!=null&&f(i,["toolConfig"],I);const Q=d(e,["labels"]);i!==void 0&&Q!=null&&f(i,["labels"],Q);const z=d(e,["cachedContent"]);i!==void 0&&z!=null&&f(i,["cachedContent"],Gn(n,z));const Z=d(e,["responseModalities"]);Z!=null&&f(a,["responseModalities"],Z);const X=d(e,["mediaResolution"]);X!=null&&f(a,["mediaResolution"],X);const te=d(e,["speechConfig"]);te!=null&&f(a,["speechConfig"],Wv(cf(te)));const Te=d(e,["audioTimestamp"]);Te!=null&&f(a,["audioTimestamp"],Te);const de=d(e,["thinkingConfig"]);de!=null&&f(a,["thinkingConfig"],de);const Pe=d(e,["imageConfig"]);return Pe!=null&&f(a,["imageConfig"],Pe),a}function M0(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let c=nn(r);Array.isArray(c)&&(c=c.map(p=>Sl(p))),f(i,["contents"],c)}const u=d(e,["config"]);return u!=null&&f(i,["generationConfig"],ew(n,u,i)),i}function I0(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["contents"]);if(r!=null){let c=nn(r);Array.isArray(c)&&(c=c.map(p=>p)),f(i,["contents"],c)}const u=d(e,["config"]);return u!=null&&f(i,["generationConfig"],tw(n,u,i)),i}function D0(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["candidates"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(m=>xb(m))),f(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const u=d(n,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const p=d(n,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function P0(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>v)),f(e,["candidates"],m)}const r=d(n,["createTime"]);r!=null&&f(e,["createTime"],r);const u=d(n,["modelVersion"]);u!=null&&f(e,["modelVersion"],u);const c=d(n,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const p=d(n,["responseId"]);p!=null&&f(e,["responseId"],p);const g=d(n,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function nw(n,e){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const u=d(n,["guidanceScale"]);if(e!==void 0&&u!=null&&f(e,["parameters","guidanceScale"],u),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const p=d(n,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const m=d(n,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const v=d(n,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&f(e,["parameters","outputOptions","compressionQuality"],T),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=d(n,["imageSize"]);if(e!==void 0&&E!=null&&f(e,["parameters","sampleImageSize"],E),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function iw(n,e){const i={},a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&f(e,["parameters","sampleCount"],u);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const p=d(n,["guidanceScale"]);e!==void 0&&p!=null&&f(e,["parameters","guidanceScale"],p);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const T=d(n,["includeRaiReason"]);e!==void 0&&T!=null&&f(e,["parameters","includeRaiReason"],T);const E=d(n,["language"]);e!==void 0&&E!=null&&f(e,["parameters","language"],E);const w=d(n,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const x=d(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const N=d(n,["addWatermark"]);e!==void 0&&N!=null&&f(e,["parameters","addWatermark"],N);const k=d(n,["labels"]);e!==void 0&&k!=null&&f(e,["labels"],k);const D=d(n,["imageSize"]);e!==void 0&&D!=null&&f(e,["parameters","sampleImageSize"],D);const U=d(n,["enhancePrompt"]);return e!==void 0&&U!=null&&f(e,["parameters","enhancePrompt"],U),i}function sw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["prompt"]);r!=null&&f(i,["instances[0]","prompt"],r);const u=d(e,["config"]);return u!=null&&nw(u,i),i}function aw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["prompt"]);r!=null&&f(i,["instances[0]","prompt"],r);const u=d(e,["config"]);return u!=null&&iw(u,i),i}function ow(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>vw(c))),f(e,["generatedImages"],u)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],Qv(r)),e}function rw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>Tl(c))),f(e,["generatedImages"],u)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],Zv(r)),e}function lw(n,e){const i={},a=d(n,["numberOfVideos"]);if(e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const c=d(n,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const p=d(n,["personGeneration"]);if(e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const m=d(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Cl(v));const _=d(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>r1(E))),f(e,["instances[0]","referenceImages"],T)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function uw(n,e){const i={},a=d(n,["numberOfVideos"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=d(n,["fps"]);e!==void 0&&u!=null&&f(e,["parameters","fps"],u);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const p=d(n,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const m=d(n,["resolution"]);e!==void 0&&m!=null&&f(e,["parameters","resolution"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(n,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const T=d(n,["negativePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","negativePrompt"],T);const E=d(n,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const w=d(n,["generateAudio"]);e!==void 0&&w!=null&&f(e,["parameters","generateAudio"],w);const x=d(n,["lastFrame"]);e!==void 0&&x!=null&&f(e,["instances[0]","lastFrame"],dn(x));const N=d(n,["referenceImages"]);if(e!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(L=>l1(L))),f(e,["instances[0]","referenceImages"],U)}const k=d(n,["mask"]);e!==void 0&&k!=null&&f(e,["instances[0]","mask"],o1(k));const D=d(n,["compressionQuality"]);return e!==void 0&&D!=null&&f(e,["parameters","compressionQuality"],D),i}function cw(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],mw(c)),e}function dw(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response"]);return c!=null&&f(e,["response"],pw(c)),e}function fw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["prompt"]);r!=null&&f(i,["instances[0]","prompt"],r);const u=d(e,["image"]);u!=null&&f(i,["instances[0]","image"],Cl(u));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],e_(c));const p=d(e,["source"]);p!=null&&gw(p,i);const g=d(e,["config"]);return g!=null&&lw(g,i),i}function hw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["prompt"]);r!=null&&f(i,["instances[0]","prompt"],r);const u=d(e,["image"]);u!=null&&f(i,["instances[0]","image"],dn(u));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],t_(c));const p=d(e,["source"]);p!=null&&yw(p,i);const g=d(e,["config"]);return g!=null&&uw(g,i),i}function mw(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>Sw(c))),f(e,["generatedVideos"],u)}const a=d(n,["raiMediaFilteredCount"]);a!=null&&f(e,["raiMediaFilteredCount"],a);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function pw(n){const e={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>Tw(c))),f(e,["generatedVideos"],u)}const a=d(n,["raiMediaFilteredCount"]);a!=null&&f(e,["raiMediaFilteredCount"],a);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function gw(n,e){const i={},a=d(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const r=d(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Cl(r));const u=d(n,["video"]);return e!==void 0&&u!=null&&f(e,["instances[0]","video"],e_(u)),i}function yw(n,e){const i={},a=d(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const r=d(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],dn(r));const u=d(n,["video"]);return e!==void 0&&u!=null&&f(e,["instances[0]","video"],t_(u)),i}function vw(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],ww(i));const a=d(n,["raiFilteredReason"]);a!=null&&f(e,["raiFilteredReason"],a);const r=d(n,["_self"]);return r!=null&&f(e,["safetyAttributes"],Qv(r)),e}function Tl(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],Xv(i));const a=d(n,["raiFilteredReason"]);a!=null&&f(e,["raiFilteredReason"],a);const r=d(n,["_self"]);r!=null&&f(e,["safetyAttributes"],Zv(r));const u=d(n,["prompt"]);return u!=null&&f(e,["enhancedPrompt"],u),e}function _w(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["mask"],Xv(i));const a=d(n,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["labels"],r)}return e}function Sw(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],s1(i)),e}function Tw(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],a1(i)),e}function Cw(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const a=d(n,["responseJsonSchema"]);a!=null&&f(e,["responseJsonSchema"],a);const r=d(n,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const u=d(n,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const p=d(n,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(n,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const T=d(n,["responseLogprobs"]);T!=null&&f(e,["responseLogprobs"],T);const E=d(n,["responseMimeType"]);E!=null&&f(e,["responseMimeType"],E);const w=d(n,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const x=d(n,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const N=d(n,["routingConfig"]);N!=null&&f(e,["routingConfig"],N);const k=d(n,["seed"]);k!=null&&f(e,["seed"],k);const D=d(n,["speechConfig"]);D!=null&&f(e,["speechConfig"],Wv(D));const U=d(n,["stopSequences"]);U!=null&&f(e,["stopSequences"],U);const L=d(n,["temperature"]);L!=null&&f(e,["temperature"],L);const G=d(n,["thinkingConfig"]);G!=null&&f(e,["thinkingConfig"],G);const F=d(n,["topK"]);F!=null&&f(e,["topK"],F);const I=d(n,["topP"]);if(I!=null&&f(e,["topP"],I),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ew(n,e){const i={},a=d(e,["model"]);return a!=null&&f(i,["_url","name"],De(n,a)),i}function Aw(n,e){const i={},a=d(e,["model"]);return a!=null&&f(i,["_url","name"],De(n,a)),i}function xw(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function bw(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ww(n){const e={},i=d(n,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ei(i));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Xv(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const a=d(n,["bytesBase64Encoded"]);a!=null&&f(e,["imageBytes"],Ei(a));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Cl(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ei(i));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function dn(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const a=d(n,["imageBytes"]);a!=null&&f(e,["bytesBase64Encoded"],Ei(a));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Rw(n,e,i){const a={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&f(i,["_query","pageSize"],r);const u=d(e,["pageToken"]);i!==void 0&&u!=null&&f(i,["_query","pageToken"],u);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const p=d(e,["queryBase"]);return i!==void 0&&p!=null&&f(i,["_url","models_url"],Hv(n,p)),a}function Nw(n,e,i){const a={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&f(i,["_query","pageSize"],r);const u=d(e,["pageToken"]);i!==void 0&&u!=null&&f(i,["_query","pageToken"],u);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const p=d(e,["queryBase"]);return i!==void 0&&p!=null&&f(i,["_url","models_url"],Hv(n,p)),a}function Mw(n,e){const i={},a=d(e,["config"]);return a!=null&&Rw(n,a,i),i}function Iw(n,e){const i={},a=d(e,["config"]);return a!=null&&Nw(n,a,i),i}function Dw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["_self"]);if(r!=null){let u=Gv(r);Array.isArray(u)&&(u=u.map(c=>Ud(c))),f(e,["models"],u)}return e}function Pw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["_self"]);if(r!=null){let u=Gv(r);Array.isArray(u)&&(u=u.map(c=>Ld(c))),f(e,["models"],u)}return e}function Uw(n){const e={},i=d(n,["maskMode"]);i!=null&&f(e,["maskMode"],i);const a=d(n,["segmentationClasses"]);a!=null&&f(e,["maskClasses"],a);const r=d(n,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function Ud(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["displayName"]);a!=null&&f(e,["displayName"],a);const r=d(n,["description"]);r!=null&&f(e,["description"],r);const u=d(n,["version"]);u!=null&&f(e,["version"],u);const c=d(n,["_self"]);c!=null&&f(e,["tunedModelInfo"],Xw(c));const p=d(n,["inputTokenLimit"]);p!=null&&f(e,["inputTokenLimit"],p);const g=d(n,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const m=d(n,["supportedGenerationMethods"]);return m!=null&&f(e,["supportedActions"],m),e}function Ld(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["displayName"]);a!=null&&f(e,["displayName"],a);const r=d(n,["description"]);r!=null&&f(e,["description"],r);const u=d(n,["versionId"]);u!=null&&f(e,["version"],u);const c=d(n,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>Zb(T))),f(e,["endpoints"],_)}const p=d(n,["labels"]);p!=null&&f(e,["labels"],p);const g=d(n,["_self"]);g!=null&&f(e,["tunedModelInfo"],Qw(g));const m=d(n,["defaultCheckpointId"]);m!=null&&f(e,["defaultCheckpointId"],m);const v=d(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),f(e,["checkpoints"],_)}return e}function Lw(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const a=d(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const r=d(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&f(e,["fileData"],Wb(u));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const p=d(n,["inlineData"]);p!=null&&f(e,["inlineData"],Ab(p));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function kw(n){const e={},i=d(n,["productImage"]);return i!=null&&f(e,["image"],dn(i)),e}function qw(n,e){const i={},a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","editConfig","baseSteps"],r);const u=d(n,["outputGcsUri"]);e!==void 0&&u!=null&&f(e,["parameters","storageUri"],u);const c=d(n,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const m=d(n,["addWatermark"]);e!==void 0&&m!=null&&f(e,["parameters","addWatermark"],m);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const T=d(n,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const E=d(n,["labels"]);return e!==void 0&&E!=null&&f(e,["labels"],E),i}function Bw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["source"]);r!=null&&Ow(r,i);const u=d(e,["config"]);return u!=null&&qw(u,i),i}function Vw(n){const e={},i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>Tl(r))),f(e,["generatedImages"],a)}return e}function Ow(n,e){const i={},a=d(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const r=d(n,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],dn(r));const u=d(n,["productImages"]);if(e!==void 0&&u!=null){let c=u;Array.isArray(c)&&(c=c.map(p=>kw(p))),f(e,["instances[0]","productImages"],c)}return i}function Hw(n){const e={},i=d(n,["referenceImage"]);i!=null&&f(e,["referenceImage"],dn(i));const a=d(n,["referenceId"]);a!=null&&f(e,["referenceId"],a);const r=d(n,["referenceType"]);r!=null&&f(e,["referenceType"],r);const u=d(n,["maskImageConfig"]);u!=null&&f(e,["maskImageConfig"],Uw(u));const c=d(n,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],Ib(c));const p=d(n,["styleImageConfig"]);p!=null&&f(e,["styleImageConfig"],p);const g=d(n,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function Qv(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const a=d(n,["safetyAttributes","scores"]);a!=null&&f(e,["scores"],a);const r=d(n,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Zv(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const a=d(n,["safetyAttributes","scores"]);a!=null&&f(e,["scores"],a);const r=d(n,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function Gw(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=d(n,["threshold"]);return a!=null&&f(e,["threshold"],a),e}function Fw(n){const e={},i=d(n,["image"]);return i!=null&&f(e,["image"],dn(i)),e}function zw(n,e){const i={},a=d(n,["mode"]);e!==void 0&&a!=null&&f(e,["parameters","mode"],a);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);const u=d(n,["confidenceThreshold"]);e!==void 0&&u!=null&&f(e,["parameters","confidenceThreshold"],u);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const p=d(n,["binaryColorThreshold"]);e!==void 0&&p!=null&&f(e,["parameters","binaryColorThreshold"],p);const g=d(n,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function Yw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["source"]);r!=null&&$w(r,i);const u=d(e,["config"]);return u!=null&&zw(u,i),i}function Jw(n){const e={},i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>_w(r))),f(e,["generatedMasks"],a)}return e}function $w(n,e){const i={},a=d(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const r=d(n,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],dn(r));const u=d(n,["scribbleImage"]);return e!==void 0&&u!=null&&f(e,["instances[0]","scribble"],Fw(u)),i}function Wv(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const a=d(n,["voiceConfig"]);if(a!=null&&f(e,["voiceConfig"],a),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Kw(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const r=d(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=d(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],xw(p));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],bw(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function jv(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>jb(T))),f(e,["functionDeclarations"],_)}const a=d(n,["retrieval"]);a!=null&&f(e,["retrieval"],a);const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const u=d(n,["computerUse"]);if(u!=null&&f(e,["computerUse"],u),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const p=d(n,["enterpriseWebSearch"]);p!=null&&f(e,["enterpriseWebSearch"],p);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Xw(n){const e={},i=d(n,["baseModel"]);i!=null&&f(e,["baseModel"],i);const a=d(n,["createTime"]);a!=null&&f(e,["createTime"],a);const r=d(n,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Qw(n){const e={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const a=d(n,["createTime"]);a!=null&&f(e,["createTime"],a);const r=d(n,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function Zw(n,e){const i={},a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const r=d(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&f(e,["defaultCheckpointId"],u),i}function Ww(n,e){const i={},a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const r=d(n,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&f(e,["defaultCheckpointId"],u),i}function jw(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","name"],De(n,a));const r=d(e,["config"]);return r!=null&&Zw(r,i),i}function e1(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["config"]);return r!=null&&Ww(r,i),i}function t1(n,e){const i={},a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const u=d(n,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const p=d(n,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const m=d(n,["enhanceInputImage"]);e!==void 0&&m!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(n,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const T=d(n,["numberOfImages"]);e!==void 0&&T!=null&&f(e,["parameters","sampleCount"],T);const E=d(n,["mode"]);return e!==void 0&&E!=null&&f(e,["parameters","mode"],E),i}function n1(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["_url","model"],De(n,a));const r=d(e,["image"]);r!=null&&f(i,["instances[0]","image"],dn(r));const u=d(e,["upscaleFactor"]);u!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],u);const c=d(e,["config"]);return c!=null&&t1(c,i),i}function i1(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>Tl(u))),f(e,["generatedImages"],r)}return e}function s1(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const a=d(n,["encodedVideo"]);a!=null&&f(e,["videoBytes"],Ei(a));const r=d(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function a1(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const a=d(n,["bytesBase64Encoded"]);a!=null&&f(e,["videoBytes"],Ei(a));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function o1(n){const e={},i=d(n,["image"]);i!=null&&f(e,["_self"],dn(i));const a=d(n,["maskMode"]);return a!=null&&f(e,["maskMode"],a),e}function r1(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],Cl(i));const a=d(n,["referenceType"]);return a!=null&&f(e,["referenceType"],a),e}function l1(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],dn(i));const a=d(n,["referenceType"]);return a!=null&&f(e,["referenceType"],a),e}function e_(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const a=d(n,["videoBytes"]);a!=null&&f(e,["encodedVideo"],Ei(a));const r=d(n,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function t_(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["gcsUri"],i);const a=d(n,["videoBytes"]);a!=null&&f(e,["bytesBase64Encoded"],Ei(a));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u1="Content-Type",c1="X-Server-Timeout",d1="User-Agent",kd="x-goog-api-client",f1="1.29.0",h1=`google-genai-sdk/${f1}`,m1="v1beta1",p1="v1beta",U0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class g1{constructor(e){var i,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:m1,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:p1,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,a){const r=[this.getRequestUrlInternal(i)];return a&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,a);if(e.queryParams)for(const[c,p]of Object.entries(e.queryParams))r.searchParams.append(c,String(p));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,i,r.toString(),e.abortSignal),this.unaryApiCall(r,u,e.httpMethod)}patchHttpOptions(e,i){const a=JSON.parse(JSON.stringify(e));for(const[r,u]of Object.entries(i))typeof u=="object"?a[r]=Object.assign(Object.assign({},a[r]),u):u!==void 0&&(a[r]=u);return a}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,i,r.toString(),e.abortSignal),this.streamApiCall(r,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,a,r){if(i&&i.timeout||r){const u=new AbortController,c=u.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const p=setTimeout(()=>u.abort(),i.timeout);p&&typeof p.unref=="function"&&p.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),e.signal=c}return i&&i.extraBody!==null&&y1(e,i.extraBody),e.headers=await this.getHeadersInternal(i,a),e}async unaryApiCall(e,i,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:a})).then(async r=>(await L0(r),new Id(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:a})).then(async r=>(await L0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var i;return Ks(this,arguments,function*(){const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:p,value:g}=yield ze(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=u.decode(g,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),E=T.status,w=T.code,x=`got status: ${E}. ${JSON.stringify(_)}`;if(w>=400&&w<600)throw new _l({message:x,status:w})}}catch(_){if(_.name==="ApiError")throw _}c+=m;let v=c.match(U0);for(;v;){const _=v[1];try{const T=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ze(new Id(T)),c=c.slice(v[0].length),v=c.match(U0)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},i=h1+" "+this.clientOptions.userAgentExtra;return e[d1]=i,e[kd]=i,e[u1]="application/json",e}async getHeadersInternal(e,i){const a=new Headers;if(e&&e.headers){for(const[r,u]of Object.entries(e.headers))a.append(r,u);e.timeout&&e.timeout>0&&a.append(c1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,i),a}getFileName(e){var i;let a="";return typeof e=="string"&&(a=e.replace(/[/\\]+$/,""),a=(i=a.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),a}async uploadFile(e,i){var a;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,c=await u.stat(e);r.sizeBytes=String(c.size);const p=(a=i==null?void 0:i.mimeType)!==null&&a!==void 0?a:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=p;const g={file:r},m=this.getFileName(e),v=ne("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,g,i==null?void 0:i.httpOptions);return u.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,a){var r;const u=this.clientOptions.uploader,c=await u.stat(i),p=String(c.size),g=(r=a==null?void 0:a.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};a!=null&&a.customMetadata&&(_.customMetadata=a.customMetadata),a!=null&&a.chunkingConfig&&(_.chunkingConfig=a.chunkingConfig);const T=await this.fetchUploadUrl(m,p,g,v,_,a==null?void 0:a.httpOptions);return u.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,a,r,u,c){var p;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${a}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=m==null?void 0:m.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function L0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let a;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(a);throw i>=400&&i<600?new _l({message:r,status:i}):new Error(r)}}function y1(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))i=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(u,c){const p=Object.assign({},u);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],v=p[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?p[g]=a(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),p[g]=m)}return p}const r=a(i,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v1="mcp_used/unknown";let _1=!1;function n_(n){for(const e of n)if(S1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return _1}function i_(n){var e;const i=(e=n[kd])!==null&&e!==void 0?e:"";n[kd]=(i+` ${v1}`).trimStart()}function S1(n){return n!==null&&typeof n=="object"&&n instanceof ff}function T1(n,e=100){return Ks(this,arguments,function*(){let a,r=0;for(;r<e;){const u=yield ze(n.listTools({cursor:a}));for(const c of u.tools)yield yield ze(c),r++;if(!u.nextCursor)break;a=u.nextCursor}})}class ff{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new ff(e,i)}async initialize(){var e,i,a,r;if(this.mcpTools.length>0)return;const u={},c=[];for(const v of this.mcpClients)try{for(var p=!0,g=(i=void 0,lo(T1(v))),m;m=await g.next(),e=m.done,!e;p=!0){r=m.value,p=!1;const _=r;c.push(_);const T=_.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=v}}catch(_){i={error:_}}finally{try{!p&&!e&&(a=g.return)&&await a.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),bA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const c=await r.callTool({name:a.name,arguments:a.args},void 0,u);i.push({functionResponse:{name:a.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function C1(n,e,i){const a=new vA;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(a,r),e(a)}class E1{constructor(e,i,a){this.apiClient=e,this.auth=i,this.webSocketFactory=a}async connect(e){var i,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),c=b1(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${p}`;let m=()=>{};const v=new Promise(U=>{m=U}),_=e.callbacks,T=function(){m({})},E=this.apiClient,w={onopen:T,onmessage:U=>{C1(E,_.onmessage,U)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(U){},onclose:(a=_==null?void 0:_.onclose)!==null&&a!==void 0?a:function(U){}},x=this.webSocketFactory.create(g,x1(c),w);x.connect(),await v;const D={setup:{model:De(this.apiClient,e.model)}};return x.send(JSON.stringify(D)),new A1(x,this.apiClient)}}class A1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=pb(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=mb(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(zs.PLAY)}pause(){this.sendPlaybackControl(zs.PAUSE)}stop(){this.sendPlaybackControl(zs.STOP)}resetContext(){this.sendPlaybackControl(zs.RESET_CONTEXT)}close(){this.conn.close()}}function x1(n){const e={};return n.forEach((i,a)=>{e[a]=i}),e}function b1(n){const e=new Headers;for(const[i,a]of Object.entries(n))e.append(i,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function R1(n,e,i){const a=new yA;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const u=JSON.parse(r);if(n.isVertexAI()){const c=vb(u);Object.assign(a,c)}else Object.assign(a,u);e(a)}class N1{constructor(e,i,a){this.apiClient=e,this.auth=i,this.webSocketFactory=a,this.music=new E1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,a,r,u,c,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&n_(e.config.tools)&&i_(_);const T=P1(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const z=this.apiClient.getApiKey();let Z="BidiGenerateContent",X="key";z!=null&&z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Z="BidiGenerateContentConstrained",X="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Z}?${X}=${z}`}let E=()=>{};const w=new Promise(z=>{E=z}),x=e.callbacks,N=function(){var z;(z=x==null?void 0:x.onopen)===null||z===void 0||z.call(x),E({})},k=this.apiClient,D={onopen:N,onmessage:z=>{R1(k,x.onmessage,z)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(z){},onclose:(a=x==null?void 0:x.onclose)!==null&&a!==void 0?a:function(z){}},U=this.webSocketFactory.create(v,D1(T),D);U.connect(),await w;let L=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const z=this.apiClient.getProject(),Z=this.apiClient.getLocation();L=`projects/${z}/locations/${Z}/`+L}let G={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ll.AUDIO]}:e.config.responseModalities=[ll.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(p=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[],I=[];for(const z of F)if(this.isCallableTool(z)){const Z=z;I.push(await Z.tool())}else I.push(z);I.length>0&&(e.config.tools=I);const Q={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=hb(this.apiClient,Q):G=fb(this.apiClient,Q),delete G.config,U.send(JSON.stringify(G)),new I1(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const M1={turnComplete:!0};class I1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let a=[];try{a=nn(i.turns),e.isVertexAI()||(a=a.map(r=>Sl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:a,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let a=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?a=i.functionResponses:a=[i.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const u of a){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(w1)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},M1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:yb(e)}:i={realtimeInput:gb(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function D1(n){const e={};return n.forEach((i,a)=>{e[a]=i}),e}function P1(n){const e=new Headers;for(const[i,a]of Object.entries(n))e.append(i,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k0=10;function q0(n){var e,i,a;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(Xs(c)){r=!0;break}if(!r)return!0;const u=(a=n==null?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Xs(n){return"callTool"in n&&typeof n.callTool=="function"}function U1(n){var e,i,a;return(a=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>Xs(r)))!==null&&a!==void 0?a:!1}function B0(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((a,r)=>{if(Xs(a))return;const u=a;u.functionDeclarations&&u.functionDeclarations.length>0&&i.push(r)}),i}function V0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let L1=class extends Hn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var a,r,u,c,p;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!U1(i)||q0(i.config))return await this.generateContentInternal(g);const m=B0(i);if(m.length>0){const x=m.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let v,_;const T=nn(g.contents),E=(u=(r=(a=g.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:k0;let w=0;for(;w<E&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const x=v.candidates[0].content,N=[];for(const k of(p=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[])if(Xs(k)){const U=await k.callTool(v.functionCalls);N.push(...U)}w++,_={role:"user",parts:N},g.contents=nn(g.contents),g.contents.push(x),g.contents.push(_),V0(g.config)&&(T.push(x),T.push(_))}return V0(g.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),q0(i.config)){const r=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(r)}const a=B0(i);if(a.length>0){const r=a.map(u=>`tools[${u}]`).join(", ");throw new Error(`Incompatible tools found at ${r}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(a=>{var r;let u;const c=[];if(a!=null&&a.generatedImages)for(const g of a.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=g==null?void 0:g.safetyAttributes:c.push(g);let p;return u?p={generatedImages:c,positivePromptSafetyAttributes:u,sdkHttpResponse:a.sdkHttpResponse}:p={generatedImages:c,sdkHttpResponse:a.sdkHttpResponse},p}),this.list=async i=>{var a;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((a=c.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Qi(On.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(c),c)},this.editImage=async i=>{const a={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(a.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async i=>{let a={numberOfImages:1,mode:"upscale"};i.config&&(a=Object.assign(Object.assign({},a),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var a,r,u,c,p,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=i.video)===null||a===void 0)&&a.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(u=i.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.uri&&(!((g=(p=i.source)===null||p===void 0?void 0:p.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,a,r;const u=(i=e.config)===null||i===void 0?void 0:i.tools;if(!u)return e;const c=await Promise.all(u.map(async g=>Xs(g)?await g.tool():g)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(p.config.tools=c,e.config&&e.config.tools&&n_(e.config.tools)){const g=(r=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),i_(m),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return p}async initAfcToolsMap(e){var i,a,r;const u=new Map;for(const c of(a=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(Xs(c)){const p=c,g=await p.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,p)}}return u}async processAfcStream(e){var i,a,r;const u=(r=(a=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:k0;let c=!1,p=0;const g=await this.initAfcToolsMap(e);return(function(m,v,_){var T,E;return Ks(this,arguments,function*(){for(var w,x,N,k;p<u;){c&&(p++,c=!1);const G=yield ze(m.processParamsMaybeAddMcpUsage(_)),F=yield ze(m.generateContentStreamInternal(G)),I=[],Q=[];try{for(var D=!0,U=(x=void 0,lo(F)),L;L=yield ze(U.next()),w=L.done,!w;D=!0){k=L.value,D=!1;const z=k;if(yield yield ze(z),z.candidates&&(!((T=z.candidates[0])===null||T===void 0)&&T.content)){Q.push(z.candidates[0].content);for(const Z of(E=z.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(p<u&&Z.functionCall){if(!Z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(Z.functionCall.name)){const X=yield ze(v.get(Z.functionCall.name).callTool([Z.functionCall]));I.push(...X)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${Z.functionCall.name}`)}}}}catch(z){x={error:z}}finally{try{!D&&!w&&(N=U.return)&&(yield ze(N.call(U)))}finally{if(x)throw x.error}}if(I.length>0){c=!0;const z=new eo;z.candidates=[{content:{role:"user",parts:I}}],yield yield ze(z);const Z=[];Z.push(...Q),Z.push({role:"user",parts:I});const X=nn(_.contents).concat(Z);_.contents=X}else break}})})(this,g,e)}async generateContentInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=I0(this.apiClient,e);return p=ne("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=P0(v),T=new eo;return Object.assign(T,_),T})}else{const m=M0(this.apiClient,e);return p=ne("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=D0(v),T=new eo;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=I0(this.apiClient,e);return p=ne("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(_){return Ks(this,arguments,function*(){var T,E,w,x;try{for(var N=!0,k=lo(_),D;D=yield ze(k.next()),T=D.done,!T;N=!0){x=D.value,N=!1;const U=x,L=P0(yield ze(U.json()));L.sdkHttpResponse={headers:U.headers};const G=new eo;Object.assign(G,L),yield yield ze(G)}}catch(U){E={error:U}}finally{try{!N&&!T&&(w=k.return)&&(yield ze(w.call(k)))}finally{if(E)throw E.error}}})})}else{const m=M0(this.apiClient,e);return p=ne("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),c.then(function(_){return Ks(this,arguments,function*(){var T,E,w,x;try{for(var N=!0,k=lo(_),D;D=yield ze(k.next()),T=D.done,!T;N=!0){x=D.value,N=!1;const U=x,L=D0(yield ze(U.json()));L.sdkHttpResponse={headers:U.headers};const G=new eo;Object.assign(G,L),yield yield ze(G)}}catch(U){E={error:U}}finally{try{!N&&!T&&(w=k.return)&&(yield ze(w.call(k)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Kb(this.apiClient,e);return p=ne("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Qb(v),T=new m0;return Object.assign(T,_),T})}else{const m=$b(this.apiClient,e);return p=ne("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Xb(v),T=new m0;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=aw(this.apiClient,e);return p=ne("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=rw(v),T=new p0;return Object.assign(T,_),T})}else{const m=sw(this.apiClient,e);return p=ne("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ow(v),T=new p0;return Object.assign(T,_),T})}}async editImageInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=Fb(this.apiClient,e);return u=ne("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=zb(g),v=new oA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=n1(this.apiClient,e);return u=ne("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=i1(g),v=new rA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=Bw(this.apiClient,e);return u=ne("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Vw(g),v=new lA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=Yw(this.apiClient,e);return u=ne("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Jw(g),v=new uA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Aw(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Ld(v))}else{const m=Ew(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>Ud(v))}}async listInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Iw(this.apiClient,e);return p=ne("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Pw(v),T=new g0;return Object.assign(T,_),T})}else{const m=Mw(this.apiClient,e);return p=ne("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Dw(v),T=new g0;return Object.assign(T,_),T})}}async update(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=e1(this.apiClient,e);return p=ne("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Ld(v))}else{const m=jw(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>Ud(v))}}async delete(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Vb(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Hb(v),T=new y0;return Object.assign(T,_),T})}else{const m=Bb(this.apiClient,e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ob(v),T=new y0;return Object.assign(T,_),T})}}async countTokens(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=Lb(this.apiClient,e);return p=ne("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=qb(v),T=new v0;return Object.assign(T,_),T})}else{const m=Ub(this.apiClient,e);return p=ne("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=kb(v),T=new v0;return Object.assign(T,_),T})}}async computeTokens(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=wb(this.apiClient,e);return u=ne("{model}:computeTokens",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=Rb(g),v=new cA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=hw(this.apiClient,e);return p=ne("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const _=dw(v),T=new ul;return Object.assign(T,_),T})}else{const m=fw(this.apiClient,e);return p=ne("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c.then(v=>{const _=cw(v),T=new ul;return Object.assign(T,_),T})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k1 extends Hn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,a=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:a});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,a=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let u;a&&"httpOptions"in a&&(u=a.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:a});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=eA(e);return p=ne("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}else{const m=jE(e);return p=ne("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=JE(e);return u=ne("{resourceName}:fetchPredictOperation",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q1(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function B1(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>J1(u))),f(e,["parts"],r)}const a=d(n,["role"]);return a!=null&&f(e,["role"],a),e}function V1(n,e,i){const a={},r=d(e,["expireTime"]);i!==void 0&&r!=null&&f(i,["expireTime"],r);const u=d(e,["newSessionExpireTime"]);i!==void 0&&u!=null&&f(i,["newSessionExpireTime"],u);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const p=d(e,["liveConnectConstraints"]);i!==void 0&&p!=null&&f(i,["bidiGenerateContentSetup"],Y1(n,p));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),a}function O1(n,e){const i={},a=d(e,["config"]);return a!=null&&f(i,["config"],V1(n,a,i)),i}function H1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function G1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function F1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function z1(n,e){const i={},a=d(n,["generationConfig"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig"],a);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=d(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const p=d(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],df(_));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const E=d(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);const w=d(n,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],B1(Tt(w)));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let F=ea(x);Array.isArray(F)&&(F=F.map(I=>K1(js(I)))),f(e,["setup","tools"],F)}const N=d(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],$1(N));const k=d(n,["inputAudioTranscription"]);e!==void 0&&k!=null&&f(e,["setup","inputAudioTranscription"],k);const D=d(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","outputAudioTranscription"],D);const U=d(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&f(e,["setup","realtimeInputConfig"],U);const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&f(e,["setup","contextWindowCompression"],L);const G=d(n,["proactivity"]);return e!==void 0&&G!=null&&f(e,["setup","proactivity"],G),i}function Y1(n,e){const i={},a=d(e,["model"]);a!=null&&f(i,["setup","model"],De(n,a));const r=d(e,["config"]);return r!=null&&f(i,["config"],z1(r,i)),i}function J1(n){const e={},i=d(n,["functionCall"]);i!=null&&f(e,["functionCall"],i);const a=d(n,["codeExecutionResult"]);a!=null&&f(e,["codeExecutionResult"],a);const r=d(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&f(e,["fileData"],H1(u));const c=d(n,["functionResponse"]);c!=null&&f(e,["functionResponse"],c);const p=d(n,["inlineData"]);p!=null&&f(e,["inlineData"],q1(p));const g=d(n,["text"]);g!=null&&f(e,["text"],g);const m=d(n,["thought"]);m!=null&&f(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const _=d(n,["videoMetadata"]);return _!=null&&f(e,["videoMetadata"],_),e}function $1(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function K1(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const r=d(n,["computerUse"]);r!=null&&f(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&f(e,["fileSearch"],u);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=d(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],G1(p));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],F1(g));const m=d(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X1(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const a=n[i];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(u=>`${i}.${u}`);e.push(...r)}else e.push(i)}return e.join(",")}function Q1(n,e){let i=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const u=a.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,i=u):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(i){const u=X1(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?n.fieldMask=u:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];r.length>0&&(p=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];u&&g.push(u),p.length>0&&g.push(...p),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Z1 extends Hn{constructor(e){super(),this.apiClient=e}async create(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=O1(this.apiClient,e);u=ne("auth_tokens",p._url),c=p._query,delete p.config,delete p._url,delete p._query;const g=Q1(p,e.config);return r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W1(n,e){const i={},a=d(n,["displayName"]);return e!==void 0&&a!=null&&f(e,["displayName"],a),i}function j1(n){const e={},i=d(n,["config"]);return i!=null&&W1(i,e),e}function eR(n,e){const i={},a=d(n,["force"]);return e!==void 0&&a!=null&&f(e,["_query","force"],a),i}function tR(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const a=d(n,["config"]);return a!=null&&eR(a,e),e}function nR(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function iR(n,e){const i={},a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["customMetadata"],u)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),i}function sR(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const a=d(n,["metadata"]);a!=null&&f(e,["metadata"],a);const r=d(n,["done"]);r!=null&&f(e,["done"],r);const u=d(n,["error"]);u!=null&&f(e,["error"],u);const c=d(n,["response"]);return c!=null&&f(e,["response"],oR(c)),e}function aR(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const a=d(n,["fileName"]);a!=null&&f(e,["fileName"],a);const r=d(n,["config"]);return r!=null&&iR(r,e),e}function oR(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["parent"]);a!=null&&f(e,["parent"],a);const r=d(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function rR(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function lR(n){const e={},i=d(n,["config"]);return i!=null&&rR(i,e),e}function uR(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["fileSearchStores"],u)}return e}function cR(n,e){const i={},a=d(n,["mimeType"]);e!==void 0&&a!=null&&f(e,["mimeType"],a);const r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=d(n,["customMetadata"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>g)),f(e,["customMetadata"],p)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function dR(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const a=d(n,["config"]);return a!=null&&cR(a,e),e}function fR(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hR(n,e){const i={},a=d(n,["force"]);return e!==void 0&&a!=null&&f(e,["_query","force"],a),i}function mR(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const a=d(n,["config"]);return a!=null&&hR(a,e),e}function pR(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function gR(n,e){const i={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function yR(n){const e={},i=d(n,["parent"]);i!=null&&f(e,["_url","parent"],i);const a=d(n,["config"]);return a!=null&&gR(a,e),e}function vR(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const a=d(n,["nextPageToken"]);a!=null&&f(e,["nextPageToken"],a);const r=d(n,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),f(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _R extends Hn{constructor(e){super(),this.apiClient=e,this.list=async i=>new Qi(On.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:i.parent,config:a.config}),await this.listInternal(i),i)}async get(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=pR(e);return u=ne("{name}",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var i,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mR(e);r=ne("{name}",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=yR(e);return u=ne("{parent}/documents",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=vR(g),v=new dA;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SR extends Hn{constructor(e,i=new _R(e)){super(),this.apiClient=e,this.documents=i,this.list=async(a={})=>new Qi(On.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(a),a)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=j1(e);return u=ne("fileSearchStores",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nR(e);return u=ne("{name}",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var i,a;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=tR(e);r=ne("{name}",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lR(e);return u=ne("fileSearchStores",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=uR(g),v=new fA;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=dR(e);return u=ne("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=fR(g),v=new hA;return Object.assign(v,m),v})}}async importFile(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aR(e);return u=ne("{file_search_store_name}:importFile",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),r.then(g=>{const m=sR(g),v=new of;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TR(n,e){const i={},a=d(n,["name"]);return a!=null&&f(i,["_url","name"],a),i}function CR(n,e){const i={},a=d(n,["name"]);return a!=null&&f(i,["_url","name"],a),i}function ER(n,e,i){const a={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=d(n,["epochCount"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","epochCount"],u);const c=d(n,["learningRateMultiplier"]);if(c!=null&&f(a,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=d(n,["batchSize"]);e!==void 0&&p!=null&&f(e,["tuningTask","hyperparameters","batchSize"],p);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return a}function AR(n,e,i){const a={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=d(n,["validationDataset"]);e!==void 0&&E!=null&&f(e,["supervisedTuningSpec"],O0(E))}else if(r==="PREFERENCE_TUNING"){const E=d(n,["validationDataset"]);e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec"],O0(E))}const u=d(n,["tunedModelDisplayName"]);e!==void 0&&u!=null&&f(e,["tunedModelDisplayName"],u);const c=d(n,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=d(n,["epochCount"]);e!==void 0&&E!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(p==="PREFERENCE_TUNING"){const E=d(n,["epochCount"]);e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const E=d(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(g==="PREFERENCE_TUNING"){const E=d(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let m=d(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=d(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(m==="PREFERENCE_TUNING"){const E=d(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const E=d(n,["adapterSize"]);e!==void 0&&E!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(v==="PREFERENCE_TUNING"){const E=d(n,["adapterSize"]);e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(n,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const T=d(n,["beta"]);return e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),a}function xR(n,e){const i={},a=d(n,["baseModel"]);a!=null&&f(i,["baseModel"],a);const r=d(n,["preTunedModel"]);r!=null&&f(i,["preTunedModel"],r);const u=d(n,["trainingDataset"]);u!=null&&kR(u);const c=d(n,["config"]);return c!=null&&ER(c,i),i}function bR(n,e){const i={},a=d(n,["baseModel"]);a!=null&&f(i,["baseModel"],a);const r=d(n,["preTunedModel"]);r!=null&&f(i,["preTunedModel"],r);const u=d(n,["trainingDataset"]);u!=null&&qR(u,i,e);const c=d(n,["config"]);return c!=null&&AR(c,i,e),i}function wR(n,e){const i={},a=d(n,["name"]);return a!=null&&f(i,["_url","name"],a),i}function RR(n,e){const i={},a=d(n,["name"]);return a!=null&&f(i,["_url","name"],a),i}function NR(n,e,i){const a={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const u=d(n,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),a}function MR(n,e,i){const a={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const u=d(n,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),a}function IR(n,e){const i={},a=d(n,["config"]);return a!=null&&NR(a,i),i}function DR(n,e){const i={},a=d(n,["config"]);return a!=null&&MR(a,i),i}function PR(n,e){const i={},a=d(n,["sdkHttpResponse"]);a!=null&&f(i,["sdkHttpResponse"],a);const r=d(n,["nextPageToken"]);r!=null&&f(i,["nextPageToken"],r);const u=d(n,["tunedModels"]);if(u!=null){let c=u;Array.isArray(c)&&(c=c.map(p=>s_(p))),f(i,["tuningJobs"],c)}return i}function UR(n,e){const i={},a=d(n,["sdkHttpResponse"]);a!=null&&f(i,["sdkHttpResponse"],a);const r=d(n,["nextPageToken"]);r!=null&&f(i,["nextPageToken"],r);const u=d(n,["tuningJobs"]);if(u!=null){let c=u;Array.isArray(c)&&(c=c.map(p=>qd(p))),f(i,["tuningJobs"],c)}return i}function LR(n,e){const i={},a=d(n,["name"]);a!=null&&f(i,["model"],a);const r=d(n,["name"]);return r!=null&&f(i,["endpoint"],r),i}function kR(n,e){const i={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=d(n,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(u=>u)),f(i,["examples","examples"],r)}return i}function qR(n,e,i){const a={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let u=d(i,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(u==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function s_(n,e){const i={},a=d(n,["sdkHttpResponse"]);a!=null&&f(i,["sdkHttpResponse"],a);const r=d(n,["name"]);r!=null&&f(i,["name"],r);const u=d(n,["state"]);u!=null&&f(i,["state"],Vv(u));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const p=d(n,["tuningTask","startTime"]);p!=null&&f(i,["startTime"],p);const g=d(n,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const m=d(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(n,["description"]);v!=null&&f(i,["description"],v);const _=d(n,["baseModel"]);_!=null&&f(i,["baseModel"],_);const T=d(n,["_self"]);return T!=null&&f(i,["tunedModel"],LR(T)),i}function qd(n,e){const i={},a=d(n,["sdkHttpResponse"]);a!=null&&f(i,["sdkHttpResponse"],a);const r=d(n,["name"]);r!=null&&f(i,["name"],r);const u=d(n,["state"]);u!=null&&f(i,["state"],Vv(u));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const p=d(n,["startTime"]);p!=null&&f(i,["startTime"],p);const g=d(n,["endTime"]);g!=null&&f(i,["endTime"],g);const m=d(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(n,["error"]);v!=null&&f(i,["error"],v);const _=d(n,["description"]);_!=null&&f(i,["description"],_);const T=d(n,["baseModel"]);T!=null&&f(i,["baseModel"],T);const E=d(n,["tunedModel"]);E!=null&&f(i,["tunedModel"],E);const w=d(n,["preTunedModel"]);w!=null&&f(i,["preTunedModel"],w);const x=d(n,["supervisedTuningSpec"]);x!=null&&f(i,["supervisedTuningSpec"],x);const N=d(n,["preferenceOptimizationSpec"]);N!=null&&f(i,["preferenceOptimizationSpec"],N);const k=d(n,["tuningDataStats"]);k!=null&&f(i,["tuningDataStats"],k);const D=d(n,["encryptionSpec"]);D!=null&&f(i,["encryptionSpec"],D);const U=d(n,["partnerModelTuningSpec"]);U!=null&&f(i,["partnerModelTuningSpec"],U);const L=d(n,["customBaseModel"]);L!=null&&f(i,["customBaseModel"],L);const G=d(n,["experiment"]);G!=null&&f(i,["experiment"],G);const F=d(n,["labels"]);F!=null&&f(i,["labels"],F);const I=d(n,["outputUri"]);I!=null&&f(i,["outputUri"],I);const Q=d(n,["pipelineJob"]);Q!=null&&f(i,["pipelineJob"],Q);const z=d(n,["serviceAccount"]);z!=null&&f(i,["serviceAccount"],z);const Z=d(n,["tunedModelDisplayName"]);Z!=null&&f(i,["tunedModelDisplayName"],Z);const X=d(n,["veoTuningSpec"]);return X!=null&&f(i,["veoTuningSpec"],X),i}function BR(n,e){const i={},a=d(n,["sdkHttpResponse"]);a!=null&&f(i,["sdkHttpResponse"],a);const r=d(n,["name"]);r!=null&&f(i,["name"],r);const u=d(n,["metadata"]);u!=null&&f(i,["metadata"],u);const c=d(n,["done"]);c!=null&&f(i,["done"],c);const p=d(n,["error"]);return p!=null&&f(i,["error"],p),i}function O0(n,e){const i={},a=d(n,["gcsUri"]);a!=null&&f(i,["validationDatasetUri"],a);const r=d(n,["vertexDatasetResource"]);return r!=null&&f(i,["validationDatasetUri"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VR extends Hn{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Qi(On.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(i),i),this.tune=async i=>{var a;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((a=i.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},i),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),u=await this.tuneMldevInternal(r);let c="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?c=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(c=u.name.split("/operations/")[0]),{name:c,state:Md.JOB_STATE_QUEUED}}}}async getInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=RR(e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>qd(v))}else{const m=wR(e);return p=ne("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>s_(v))}}async listInternal(e){var i,a,r,u;let c,p="",g={};if(this.apiClient.isVertexAI()){const m=DR(e);return p=ne("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=UR(v),T=new _0;return Object.assign(T,_),T})}else{const m=IR(e);return p=ne("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=PR(v),T=new _0;return Object.assign(T,_),T})}}async cancel(e){var i,a,r,u;let c="",p={};if(this.apiClient.isVertexAI()){const g=CR(e);c=ne("{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const g=TR(e);c=ne("{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async tuneInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI()){const p=bR(e,e);return u=ne("tuningJobs",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>qd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,a;let r,u="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=xR(e);return u=ne("tunedModels",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>BR(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OR{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HR=1024*1024*8,GR=3,FR=1e3,zR=2,dl="x-goog-upload-status";async function YR(n,e,i){var a;const r=await a_(n,e,i),u=await(r==null?void 0:r.json());if(((a=r==null?void 0:r.headers)===null||a===void 0?void 0:a[dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function JR(n,e,i){var a;const r=await a_(n,e,i),u=await(r==null?void 0:r.json());if(((a=r==null?void 0:r.headers)===null||a===void 0?void 0:a[dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Pv(u),p=new rf;return Object.assign(p,c),p}async function a_(n,e,i){var a,r;let u=0,c=0,p=new Id(new Response),g="upload";for(u=n.size;c<u;){const m=Math.min(HR,u-c),v=n.slice(c,c+m);c+m>=u&&(g+=", finalize");let _=0,T=FR;for(;_<GR&&(p=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((a=p==null?void 0:p.headers)===null||a===void 0)&&a[dl]));)_++,await KR(T),T=T*zR;if(c+=m,((r=p==null?void 0:p.headers)===null||r===void 0?void 0:r[dl])!=="active")break;if(u<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function $R(n){return{size:n.size,type:n.type}}function KR(n){return new Promise(e=>setTimeout(e,n))}class XR{async upload(e,i,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YR(e,i,a)}async uploadToFileSearchStore(e,i,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JR(e,i,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $R(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR{create(e,i,a){return new ZR(e,i,a)}}class ZR{constructor(e,i,a){this.url=e,this.headers=i,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H0="x-goog-api-key";class WR{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(H0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(H0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jR="gl-node/";class eN{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const a=zE(e.httpOptions,e.vertexai,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const r=new WR(this.apiKey);this.apiClient=new g1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:jR+"web",uploader:new XR,downloader:new OR}),this.models=new L1(this.apiClient),this.live=new N1(this.apiClient,r,new QR),this.batches=new px(this.apiClient),this.chats=new $x(this.models,this.apiClient),this.caches=new zx(this.apiClient),this.files=new ib(this.apiClient),this.operations=new k1(this.apiClient),this.authTokens=new Z1(this.apiClient),this.tunings=new VR(this.apiClient),this.fileSearchStores=new SR(this.apiClient)}}const Bd="RFC3986",Vd={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},tN="RFC1738",nN=Array.isArray,gn=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),hd=1024,iN=(n,e,i,a,r)=>{if(n.length===0)return n;let u=n;if(typeof n=="symbol"?u=Symbol.prototype.toString.call(n):typeof n!="string"&&(u=String(n)),i==="iso-8859-1")return escape(u).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});let c="";for(let p=0;p<u.length;p+=hd){const g=u.length>=hd?u.slice(p,p+hd):u,m=[];for(let v=0;v<g.length;++v){let _=g.charCodeAt(v);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||r===tN&&(_===40||_===41)){m[m.length]=g.charAt(v);continue}if(_<128){m[m.length]=gn[_];continue}if(_<2048){m[m.length]=gn[192|_>>6]+gn[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=gn[224|_>>12]+gn[128|_>>6&63]+gn[128|_&63];continue}v+=1,_=65536+((_&1023)<<10|g.charCodeAt(v)&1023),m[m.length]=gn[240|_>>18]+gn[128|_>>12&63]+gn[128|_>>6&63]+gn[128|_&63]}c+=m.join("")}return c};function sN(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function G0(n,e){if(nN(n)){const i=[];for(let a=0;a<n.length;a+=1)i.push(e(n[a]));return i}return e(n)}const aN=Object.prototype.hasOwnProperty,o_={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},yn=Array.isArray,oN=Array.prototype.push,r_=function(n,e){oN.apply(n,yn(e)?e:[e])},rN=Date.prototype.toISOString,ot={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:iN,encodeValuesOnly:!1,format:Bd,formatter:Vd[Bd],indices:!1,serializeDate(n){return rN.call(n)},skipNulls:!1,strictNullHandling:!1};function lN(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const md={};function l_(n,e,i,a,r,u,c,p,g,m,v,_,T,E,w,x,N,k){let D=n,U=k,L=0,G=!1;for(;(U=U.get(md))!==void 0&&!G;){const Z=U.get(n);if(L+=1,typeof Z<"u"){if(Z===L)throw new RangeError("Cyclic object value");G=!0}typeof U.get(md)>"u"&&(L=0)}if(typeof m=="function"?D=m(e,D):D instanceof Date?D=T==null?void 0:T(D):i==="comma"&&yn(D)&&(D=G0(D,function(Z){return Z instanceof Date?T==null?void 0:T(Z):Z})),D===null){if(u)return g&&!x?g(e,ot.encoder,N,"key",E):e;D=""}if(lN(D)||sN(D)){if(g){const Z=x?e:g(e,ot.encoder,N,"key",E);return[(w==null?void 0:w(Z))+"="+(w==null?void 0:w(g(D,ot.encoder,N,"value",E)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(D)))]}const F=[];if(typeof D>"u")return F;let I;if(i==="comma"&&yn(D))x&&g&&(D=G0(D,g)),I=[{value:D.length>0?D.join(",")||null:void 0}];else if(yn(m))I=m;else{const Z=Object.keys(D);I=v?Z.sort(v):Z}const Q=p?String(e).replace(/\./g,"%2E"):String(e),z=a&&yn(D)&&D.length===1?Q+"[]":Q;if(r&&yn(D)&&D.length===0)return z+"[]";for(let Z=0;Z<I.length;++Z){const X=I[Z],te=typeof X=="object"&&typeof X.value<"u"?X.value:D[X];if(c&&te===null)continue;const Te=_&&p?X.replace(/\./g,"%2E"):X,de=yn(D)?typeof i=="function"?i(z,Te):z:z+(_?"."+Te:"["+Te+"]");k.set(n,L);const Pe=new WeakMap;Pe.set(md,k),r_(F,l_(te,de,i,a,r,u,c,p,i==="comma"&&x&&yn(D)?null:g,m,v,_,T,E,w,x,N,Pe))}return F}function uN(n=ot){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||ot.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=Bd;if(typeof n.format<"u"){if(!aN.call(Vd,n.format))throw new TypeError("Unknown format option provided.");i=n.format}const a=Vd[i];let r=ot.filter;(typeof n.filter=="function"||yn(n.filter))&&(r=n.filter);let u;if(n.arrayFormat&&n.arrayFormat in o_?u=n.arrayFormat:"indices"in n?u=n.indices?"indices":"repeat":u=ot.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:ot.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:ot.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:ot.allowEmptyArrays,arrayFormat:u,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:ot.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?ot.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:ot.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:ot.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:ot.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:ot.encodeValuesOnly,filter:r,format:i,formatter:a,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:ot.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:ot.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:ot.strictNullHandling}}function cN(n,e={}){let i=n;const a=uN(e);let r,u;typeof a.filter=="function"?(u=a.filter,i=u("",i)):yn(a.filter)&&(u=a.filter,r=u);const c=[];if(typeof i!="object"||i===null)return"";const p=o_[a.arrayFormat],g=p==="comma"&&a.commaRoundTrip;r||(r=Object.keys(i)),a.sort&&r.sort(a.sort);const m=new WeakMap;for(let T=0;T<r.length;++T){const E=r[T];a.skipNulls&&i[E]===null||r_(c,l_(i[E],E,p,g,a.allowEmptyArrays,a.strictNullHandling,a.skipNulls,a.encodeDotInKeys,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,m))}const v=c.join(a.delimiter);let _=a.addQueryPrefix===!0?"?":"";return a.charsetSentinel&&(a.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""}const Hs="4.104.0";let F0=!1,uo,u_,c_,Od,d_,f_,h_,m_,p_;function dN(n,e={auto:!1}){if(F0)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(uo)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${uo}'\``);F0=e.auto,uo=n.kind,u_=n.fetch,c_=n.FormData,Od=n.File,d_=n.ReadableStream,f_=n.getMultipartRequestOptions,h_=n.getDefaultAgent,m_=n.fileFromPath,p_=n.isFsReadStream}class fN{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function hN({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let i,a,r,u;try{i=fetch,a=Request,r=Response,u=Headers}catch(c){throw new Error(`this environment is missing the following Web Fetch API type: ${c.message}. ${e}`)}return{kind:"web",fetch:i,Request:a,Response:r,Headers:u,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(c,p)=>({...p,body:new fN(c)}),getDefaultAgent:c=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:c=>!1}}const g_=()=>{uo||dN(hN(),{auto:!0})};g_();class fe extends Error{}class vt extends fe{constructor(e,i,a,r){super(`${vt.makeMessage(e,i,a)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"],this.error=i;const u=i;this.code=u==null?void 0:u.code,this.param=u==null?void 0:u.param,this.type=u==null?void 0:u.type}static makeMessage(e,i,a){const r=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):a;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,i,a,r){if(!e||!r)return new El({message:a,cause:Gd(i)});const u=i==null?void 0:i.error;return e===400?new y_(e,u,a,r):e===401?new v_(e,u,a,r):e===403?new __(e,u,a,r):e===404?new S_(e,u,a,r):e===409?new T_(e,u,a,r):e===422?new C_(e,u,a,r):e===429?new E_(e,u,a,r):e>=500?new A_(e,u,a,r):new vt(e,u,a,r)}}class tn extends vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class El extends vt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class hf extends El{constructor({message:e}={}){super({message:e??"Request timed out."})}}class y_ extends vt{}class v_ extends vt{}class __ extends vt{}class S_ extends vt{}class T_ extends vt{}class C_ extends vt{}class E_ extends vt{}class A_ extends vt{}class x_ extends fe{constructor(){super("Could not parse response content as the length limit was reached")}}class b_ extends fe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Hr=function(n,e,i,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(n,i):r?r.value=i:e.set(n,i),i},zi=function(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},Ft;class Al{constructor(){Ft.set(this,void 0),this.buffer=new Uint8Array,Hr(this,Ft,null,"f")}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let a=new Uint8Array(this.buffer.length+i.length);a.set(this.buffer),a.set(i,this.buffer.length),this.buffer=a;const r=[];let u;for(;(u=mN(this.buffer,zi(this,Ft,"f")))!=null;){if(u.carriage&&zi(this,Ft,"f")==null){Hr(this,Ft,u.index,"f");continue}if(zi(this,Ft,"f")!=null&&(u.index!==zi(this,Ft,"f")+1||u.carriage)){r.push(this.decodeText(this.buffer.slice(0,zi(this,Ft,"f")-1))),this.buffer=this.buffer.slice(zi(this,Ft,"f")),Hr(this,Ft,null,"f");continue}const c=zi(this,Ft,"f")!==null?u.preceding-1:u.preceding,p=this.decodeText(this.buffer.slice(0,c));r.push(p),this.buffer=this.buffer.slice(u.index),Hr(this,Ft,null,"f")}return r}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new fe(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new fe(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new fe("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ft=new WeakMap;Al.NEWLINE_CHARS=new Set([`
`,"\r"]);Al.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mN(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function pN(n){for(let a=0;a<n.length-1;a++){if(n[a]===10&&n[a+1]===10||n[a]===13&&n[a+1]===13)return a+2;if(n[a]===13&&n[a+1]===10&&a+3<n.length&&n[a+2]===13&&n[a+3]===10)return a+4}return-1}function w_(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class _n{constructor(e,i){this.iterator=e,this.controller=i}static fromSSEResponse(e,i){let a=!1;async function*r(){if(a)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let u=!1;try{for await(const c of gN(e,i))if(!u){if(c.data.startsWith("[DONE]")){u=!0;continue}if(c.event===null||c.event.startsWith("response.")||c.event.startsWith("transcript.")){let p;try{p=JSON.parse(c.data)}catch(g){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),g}if(p&&p.error)throw new vt(void 0,p.error,void 0,U_(e.headers));yield p}else{let p;try{p=JSON.parse(c.data)}catch(g){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),g}if(c.event=="error")throw new vt(void 0,p.error,p.message,void 0);yield{event:c.event,data:p}}}u=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{u||i.abort()}}return new _n(r,i)}static fromReadableStream(e,i){let a=!1;async function*r(){const c=new Al,p=w_(e);for await(const g of p)for(const m of c.decode(g))yield m;for(const g of c.flush())yield g}async function*u(){if(a)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let c=!1;try{for await(const p of r())c||p&&(yield JSON.parse(p));c=!0}catch(p){if(p instanceof Error&&p.name==="AbortError")return;throw p}finally{c||i.abort()}}return new _n(u,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],a=this.iterator(),r=u=>({next:()=>{if(u.length===0){const c=a.next();e.push(c),i.push(c)}return u.shift()}});return[new _n(()=>r(e),this.controller),new _n(()=>r(i),this.controller)]}toReadableStream(){const e=this;let i;const a=new TextEncoder;return new d_({async start(){i=e[Symbol.asyncIterator]()},async pull(r){try{const{value:u,done:c}=await i.next();if(c)return r.close();const p=a.encode(JSON.stringify(u)+`
`);r.enqueue(p)}catch(u){r.error(u)}},async cancel(){var r;await((r=i.return)==null?void 0:r.call(i))}})}}async function*gN(n,e){if(!n.body)throw e.abort(),new fe("Attempted to iterate over a response with no body");const i=new vN,a=new Al,r=w_(n.body);for await(const u of yN(r))for(const c of a.decode(u)){const p=i.decode(c);p&&(yield p)}for(const u of a.flush()){const c=i.decode(u);c&&(yield c)}}async function*yN(n){let e=new Uint8Array;for await(const i of n){if(i==null)continue;const a=i instanceof ArrayBuffer?new Uint8Array(i):typeof i=="string"?new TextEncoder().encode(i):i;let r=new Uint8Array(e.length+a.length);r.set(e),r.set(a,e.length),e=r;let u;for(;(u=pN(e))!==-1;)yield e.slice(0,u),e=e.slice(u)}e.length>0&&(yield e)}class vN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,a,r]=_N(e,":");return r.startsWith(" ")&&(r=r.substring(1)),i==="event"?this.event=r:i==="data"&&this.data.push(r),null}}function _N(n,e){const i=n.indexOf(e);return i!==-1?[n.substring(0,i),e,n.substring(i+e.length)]:[n,"",""]}const R_=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",N_=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&xl(n),xl=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",SN=n=>N_(n)||R_(n)||p_(n);async function M_(n,e,i){var r;if(n=await n,N_(n))return n;if(R_(n)){const u=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const c=xl(u)?[await u.arrayBuffer()]:[u];return new Od(c,e,i)}const a=await TN(n);if(e||(e=EN(n)??"unknown_file"),!(i!=null&&i.type)){const u=(r=a[0])==null?void 0:r.type;typeof u=="string"&&(i={...i,type:u})}return new Od(a,e,i)}async function TN(n){var i;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(xl(n))e.push(await n.arrayBuffer());else if(AN(n))for await(const a of n)e.push(a);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(i=n==null?void 0:n.constructor)==null?void 0:i.name}; props: ${CN(n)}`);return e}function CN(n){return`[${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}function EN(n){var e;return pd(n.name)||pd(n.filename)||((e=pd(n.path))==null?void 0:e.split(/[\\/]/).pop())}const pd=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},AN=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",z0=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Xi=async n=>{const e=await xN(n.body);return f_(e,n)},xN=async n=>{const e=new c_;return await Promise.all(Object.entries(n||{}).map(([i,a])=>Hd(e,i,a))),e},Hd=async(n,e,i)=>{if(i!==void 0){if(i==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")n.append(e,String(i));else if(SN(i)){const a=await M_(i);n.append(e,a)}else if(Array.isArray(i))await Promise.all(i.map(a=>Hd(n,e+"[]",a)));else if(typeof i=="object")await Promise.all(Object.entries(i).map(([a,r])=>Hd(n,`${e}[${a}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${i} instead`)}};var Qs={},bN=function(n,e,i,a,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,i),i},wN=function(n,e,i,a){if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},Gr;g_();async function I_(n){var c;const{response:e}=n;if(n.options.stream)return Ci("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):_n.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const i=e.headers.get("content-type"),a=(c=i==null?void 0:i.split(";")[0])==null?void 0:c.trim();if((a==null?void 0:a.includes("application/json"))||(a==null?void 0:a.endsWith("+json"))){const p=await e.json();return Ci("response",e.status,e.url,e.headers,p),D_(p,e)}const u=await e.text();return Ci("response",e.status,e.url,e.headers,u),u}function D_(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class bl extends Promise{constructor(e,i=I_){super(a=>{a(null)}),this.responsePromise=e,this.parseResponse=i}_thenUnwrap(e){return new bl(this.responsePromise,async i=>D_(e(await this.parseResponse(i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i,request_id:i.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class RN{constructor({baseURL:e,maxRetries:i=2,timeout:a=6e5,httpAgent:r,fetch:u}){this.baseURL=e,this.maxRetries=gd("maxRetries",i),this.timeout=gd("timeout",a),this.httpAgent=r,this.fetch=u??u_}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...PN(),...this.authHeaders(e)}}validateHeaders(e,i){}defaultIdempotencyKey(){return`stainless-node-retry-${qN()}`}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,a){return this.request(Promise.resolve(a).then(async r=>{const u=r&&xl(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:i,...r,body:u}}))}getAPIList(e,i,a){return this.requestAPIList(i,{method:"get",path:e,...a})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:i=0}={}){var x;const a={...e},{method:r,path:u,query:c,headers:p={}}=a,g=ArrayBuffer.isView(a.body)||a.__binaryRequest&&typeof a.body=="string"?a.body:z0(a.body)?a.body.body:a.body?JSON.stringify(a.body,null,2):null,m=this.calculateContentLength(g),v=this.buildURL(u,c);"timeout"in a&&gd("timeout",a.timeout),a.timeout=a.timeout??this.timeout;const _=a.httpAgent??this.httpAgent??h_(v),T=a.timeout+1e3;typeof((x=_==null?void 0:_.options)==null?void 0:x.timeout)=="number"&&T>(_.options.timeout??0)&&(_.options.timeout=T),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),p[this.idempotencyHeader]=e.idempotencyKey);const E=this.buildHeaders({options:a,headers:p,contentLength:m,retryCount:i});return{req:{method:r,...g&&{body:g},headers:E,..._&&{agent:_},signal:a.signal??null},url:v,timeout:a.timeout}}buildHeaders({options:e,headers:i,contentLength:a,retryCount:r}){const u={};a&&(u["content-length"]=a);const c=this.defaultHeaders(e);return K0(u,c),K0(u,i),z0(e.body)&&uo!=="node"&&delete u["content-type"],zr(c,"x-stainless-retry-count")===void 0&&zr(i,"x-stainless-retry-count")===void 0&&(u["x-stainless-retry-count"]=String(r)),zr(c,"x-stainless-timeout")===void 0&&zr(i,"x-stainless-timeout")===void 0&&e.timeout&&(u["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(u,i),u}async prepareOptions(e){}async prepareRequest(e,{url:i,options:a}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(i=>[...i])):{...e}:{}}makeStatusError(e,i,a,r){return vt.generate(e,i,a,r)}request(e,i=null){return new bl(this.makeRequest(e,i))}async makeRequest(e,i){var _,T;const a=await e,r=a.maxRetries??this.maxRetries;i==null&&(i=r),await this.prepareOptions(a);const{req:u,url:c,timeout:p}=this.buildRequest(a,{retryCount:r-i});if(await this.prepareRequest(u,{url:c,options:a}),Ci("request",c,a,u.headers),(_=a.signal)!=null&&_.aborted)throw new tn;const g=new AbortController,m=await this.fetchWithTimeout(c,u,p,g).catch(Gd);if(m instanceof Error){if((T=a.signal)!=null&&T.aborted)throw new tn;if(i)return this.retryRequest(a,i);throw m.name==="AbortError"?new hf:new El({cause:m})}const v=U_(m.headers);if(!m.ok){if(i&&this.shouldRetry(m)){const D=`retrying, ${i} attempts remaining`;return Ci(`response (error; ${D})`,m.status,c,v),this.retryRequest(a,i,v)}const E=await m.text().catch(D=>Gd(D).message),w=UN(E),x=w?void 0:E;throw Ci(`response (error; ${i?"(error; no more retries left)":"(error; not retryable)"})`,m.status,c,v,x),this.makeStatusError(m.status,w,x,v)}return{response:m,options:a,controller:g}}requestAPIList(e,i){const a=this.makeRequest(i,null);return new NN(this,a,e)}buildURL(e,i){const a=kN(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return L_(r)||(i={...r,...i}),typeof i=="object"&&i&&!Array.isArray(i)&&(a.search=this.stringifyQuery(i)),a.toString()}stringifyQuery(e){return Object.entries(e).filter(([i,a])=>typeof a<"u").map(([i,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(i)}=`;throw new fe(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,i,a,r){const{signal:u,...c}=i||{};u&&u.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),a),g={signal:r.signal,...c};return g.method&&(g.method=g.method.toUpperCase()),this.fetch.call(void 0,e,g).finally(()=>{clearTimeout(p)})}shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,a){let r;const u=a==null?void 0:a["retry-after-ms"];if(u){const p=parseFloat(u);Number.isNaN(p)||(r=p)}const c=a==null?void 0:a["retry-after"];if(c&&!r){const p=parseFloat(c);Number.isNaN(p)?r=Date.parse(c)-Date.now():r=p*1e3}if(!(r&&0<=r&&r<60*1e3)){const p=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(i,p)}return await po(r),this.makeRequest(e,i-1)}calculateDefaultRetryTimeoutMillis(e,i){const u=i-e,c=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return c*p*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Hs}`}}class P_{constructor(e,i,a,r){Gr.set(this,void 0),bN(this,Gr,e),this.options=r,this.response=i,this.body=a}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new fe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const i={...this.options};if("params"in e&&typeof i.query=="object")i.query={...i.query,...e.params};else if("url"in e){const a=[...Object.entries(i.query||{}),...e.url.searchParams.entries()];for(const[r,u]of a)e.url.searchParams.set(r,u);i.query=void 0,i.path=e.url.toString()}return await wN(this,Gr,"f").requestAPIList(this.constructor,i)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Gr=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const i of e.getPaginatedItems())yield i}}class NN extends bl{constructor(e,i,a){super(i,async r=>new a(e,r.response,await I_(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const i of e)yield i}}const U_=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,i){const a=i.toString();return e[a.toLowerCase()]||e[a]}}),MN={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},$e=n=>typeof n=="object"&&n!==null&&!L_(n)&&Object.keys(n).every(e=>k_(MN,e)),IN=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hs,"X-Stainless-OS":J0(Deno.build.os),"X-Stainless-Arch":Y0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hs,"X-Stainless-OS":J0(process.platform),"X-Stainless-Arch":Y0(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=DN();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DN(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of n){const a=i.exec(navigator.userAgent);if(a){const r=a[1]||0,u=a[2]||0,c=a[3]||0;return{browser:e,version:`${r}.${u}.${c}`}}}return null}const Y0=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",J0=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let $0;const PN=()=>$0??($0=IN()),UN=n=>{try{return JSON.parse(n)}catch{return}},LN=/^[a-z][a-z0-9+.-]*:/i,kN=n=>LN.test(n),po=n=>new Promise(e=>setTimeout(e,n)),gd=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fe(`${n} must be an integer`);if(e<0)throw new fe(`${n} must be a positive integer`);return e},Gd=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},Fr=n=>{var e,i,a,r;if(typeof process<"u")return((e=Qs==null?void 0:Qs[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(a=(i=Deno.env)==null?void 0:i.get)==null?void 0:a.call(i,n))==null?void 0:r.trim()};function L_(n){if(!n)return!0;for(const e in n)return!1;return!0}function k_(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function K0(n,e){for(const i in e){if(!k_(e,i))continue;const a=i.toLowerCase();if(!a)continue;const r=e[i];r===null?delete n[a]:r!==void 0&&(n[a]=r)}}const X0=new Set(["authorization","api-key"]);function Ci(n,...e){if(typeof process<"u"&&(Qs==null?void 0:Qs.DEBUG)==="true"){const i=e.map(a=>{if(!a)return a;if(a.headers){const u={...a,headers:{...a.headers}};for(const c in a.headers)X0.has(c.toLowerCase())&&(u.headers[c]="REDACTED");return u}let r=null;for(const u in a)X0.has(u.toLowerCase())&&(r??(r={...a}),r[u]="REDACTED");return r??a});console.log(`OpenAI:DEBUG:${n}`,...i)}}const qN=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),BN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",VN=n=>typeof(n==null?void 0:n.get)=="function",zr=(n,e)=>{var a;const i=e.toLowerCase();if(VN(n)){const r=((a=e[0])==null?void 0:a.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(u,c,p)=>c+p.toUpperCase());for(const u of[e,i,e.toUpperCase(),r]){const c=n.get(u);if(c)return c}}for(const[r,u]of Object.entries(n))if(r.toLowerCase()===i)return Array.isArray(u)?(u.length<=1||console.warn(`Received ${u.length} entries for the ${e} header, using the first entry.`),u[0]):u},ON=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),i=e.length,a=new Uint8Array(i);for(let r=0;r<i;r++)a[r]=e.charCodeAt(r);return Array.from(new Float32Array(a.buffer))}};function yd(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class wl extends P_{constructor(e,i,a,r){super(e,i,a,r),this.data=a.data||[],this.object=a.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class rt extends P_{constructor(e,i,a,r){super(e,i,a,r),this.data=a.data||[],this.has_more=a.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const i=Object.fromEntries(e.url.searchParams);return Object.keys(i).length?i:null}nextPageInfo(){var a;const e=this.getPaginatedItems();if(!e.length)return null;const i=(a=e[e.length-1])==null?void 0:a.id;return i?{params:{after:i}}:null}}class he{constructor(e){this._client=e}}let q_=class extends he{list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/chat/completions/${e}/messages`,HN,{query:i,...a})}},Rl=class extends he{constructor(){super(...arguments),this.messages=new q_(this._client)}create(e,i){return this._client.post("/chat/completions",{body:e,...i,stream:e.stream??!1})}retrieve(e,i){return this._client.get(`/chat/completions/${e}`,i)}update(e,i,a){return this._client.post(`/chat/completions/${e}`,{body:i,...a})}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/chat/completions",Nl,{query:e,...i})}del(e,i){return this._client.delete(`/chat/completions/${e}`,i)}};class Nl extends rt{}class HN extends rt{}Rl.ChatCompletionsPage=Nl;Rl.Messages=q_;let Ml=class extends he{constructor(){super(...arguments),this.completions=new Rl(this._client)}};Ml.Completions=Rl;Ml.ChatCompletionsPage=Nl;class B_ extends he{create(e,i){return this._client.post("/audio/speech",{body:e,...i,headers:{Accept:"application/octet-stream",...i==null?void 0:i.headers},__binaryResponse:!0})}}class V_ extends he{create(e,i){return this._client.post("/audio/transcriptions",Xi({body:e,...i,stream:e.stream??!1,__metadata:{model:e.model}}))}}class O_ extends he{create(e,i){return this._client.post("/audio/translations",Xi({body:e,...i,__metadata:{model:e.model}}))}}class go extends he{constructor(){super(...arguments),this.transcriptions=new V_(this._client),this.translations=new O_(this._client),this.speech=new B_(this._client)}}go.Transcriptions=V_;go.Translations=O_;go.Speech=B_;class mf extends he{create(e,i){return this._client.post("/batches",{body:e,...i})}retrieve(e,i){return this._client.get(`/batches/${e}`,i)}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/batches",pf,{query:e,...i})}cancel(e,i){return this._client.post(`/batches/${e}/cancel`,i)}}class pf extends rt{}mf.BatchesPage=pf;var ln=function(n,e,i,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(n,i):r?r.value=i:e.set(n,i),i},Je=function(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},Fd,el,tl,to,no,nl,io,Vn,so,fl,hl,Gs,H_;class gf{constructor(){Fd.add(this),this.controller=new AbortController,el.set(this,void 0),tl.set(this,()=>{}),to.set(this,()=>{}),no.set(this,void 0),nl.set(this,()=>{}),io.set(this,()=>{}),Vn.set(this,{}),so.set(this,!1),fl.set(this,!1),hl.set(this,!1),Gs.set(this,!1),ln(this,el,new Promise((e,i)=>{ln(this,tl,e,"f"),ln(this,to,i,"f")}),"f"),ln(this,no,new Promise((e,i)=>{ln(this,nl,e,"f"),ln(this,io,i,"f")}),"f"),Je(this,el,"f").catch(()=>{}),Je(this,no,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Je(this,Fd,"m",H_).bind(this))},0)}_connected(){this.ended||(Je(this,tl,"f").call(this),this._emit("connect"))}get ended(){return Je(this,so,"f")}get errored(){return Je(this,fl,"f")}get aborted(){return Je(this,hl,"f")}abort(){this.controller.abort()}on(e,i){return(Je(this,Vn,"f")[e]||(Je(this,Vn,"f")[e]=[])).push({listener:i}),this}off(e,i){const a=Je(this,Vn,"f")[e];if(!a)return this;const r=a.findIndex(u=>u.listener===i);return r>=0&&a.splice(r,1),this}once(e,i){return(Je(this,Vn,"f")[e]||(Je(this,Vn,"f")[e]=[])).push({listener:i,once:!0}),this}emitted(e){return new Promise((i,a)=>{ln(this,Gs,!0,"f"),e!=="error"&&this.once("error",a),this.once(e,i)})}async done(){ln(this,Gs,!0,"f"),await Je(this,no,"f")}_emit(e,...i){if(Je(this,so,"f"))return;e==="end"&&(ln(this,so,!0,"f"),Je(this,nl,"f").call(this));const a=Je(this,Vn,"f")[e];if(a&&(Je(this,Vn,"f")[e]=a.filter(r=>!r.once),a.forEach(({listener:r})=>r(...i))),e==="abort"){const r=i[0];!Je(this,Gs,"f")&&!(a!=null&&a.length)&&Promise.reject(r),Je(this,to,"f").call(this,r),Je(this,io,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=i[0];!Je(this,Gs,"f")&&!(a!=null&&a.length)&&Promise.reject(r),Je(this,to,"f").call(this,r),Je(this,io,"f").call(this,r),this._emit("end")}}_emitFinal(){}}el=new WeakMap,tl=new WeakMap,to=new WeakMap,no=new WeakMap,nl=new WeakMap,io=new WeakMap,Vn=new WeakMap,so=new WeakMap,fl=new WeakMap,hl=new WeakMap,Gs=new WeakMap,Fd=new WeakSet,H_=function(e){if(ln(this,fl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new tn),e instanceof tn)return ln(this,hl,!0,"f"),this._emit("abort",e);if(e instanceof fe)return this._emit("error",e);if(e instanceof Error){const i=new fe(e.message);return i.cause=e,this._emit("error",i)}return this._emit("error",new fe(String(e)))};var re=function(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},Gt=function(n,e,i,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(n,i):r?r.value=i:e.set(n,i),i},yt,zd,vn,il,un,Ji,Ys,Yi,ml,zt,sl,al,co,ao,oo,Q0,Z0,W0,j0,ev,tv,nv;class cn extends gf{constructor(){super(...arguments),yt.add(this),zd.set(this,[]),vn.set(this,{}),il.set(this,{}),un.set(this,void 0),Ji.set(this,void 0),Ys.set(this,void 0),Yi.set(this,void 0),ml.set(this,void 0),zt.set(this,void 0),sl.set(this,void 0),al.set(this,void 0),co.set(this,void 0)}[(zd=new WeakMap,vn=new WeakMap,il=new WeakMap,un=new WeakMap,Ji=new WeakMap,Ys=new WeakMap,Yi=new WeakMap,ml=new WeakMap,zt=new WeakMap,sl=new WeakMap,al=new WeakMap,co=new WeakMap,yt=new WeakSet,Symbol.asyncIterator)](){const e=[],i=[];let a=!1;return this.on("event",r=>{const u=i.shift();u?u.resolve(r):e.push(r)}),this.on("end",()=>{a=!0;for(const r of i)r.resolve(void 0);i.length=0}),this.on("abort",r=>{a=!0;for(const u of i)u.reject(r);i.length=0}),this.on("error",r=>{a=!0;for(const u of i)u.reject(r);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((u,c)=>i.push({resolve:u,reject:c})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const i=new cn;return i._run(()=>i._fromReadableStream(e)),i}async _fromReadableStream(e,i){var u;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=_n.fromReadableStream(e,this.controller);for await(const c of r)re(this,yt,"m",ao).call(this,c);if((u=r.controller.signal)!=null&&u.aborted)throw new tn;return this._addRun(re(this,yt,"m",oo).call(this))}toReadableStream(){return new _n(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,i,a,r,u){const c=new cn;return c._run(()=>c._runToolAssistantStream(e,i,a,r,{...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"stream"}})),c}async _createToolAssistantStream(e,i,a,r,u){var m;const c=u==null?void 0:u.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const p={...r,stream:!0},g=await e.submitToolOutputs(i,a,p,{...u,signal:this.controller.signal});this._connected();for await(const v of g)re(this,yt,"m",ao).call(this,v);if((m=g.controller.signal)!=null&&m.aborted)throw new tn;return this._addRun(re(this,yt,"m",oo).call(this))}static createThreadAssistantStream(e,i,a){const r=new cn;return r._run(()=>r._threadAssistantStream(e,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,i,a,r){const u=new cn;return u._run(()=>u._runAssistantStream(e,i,a,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),u}currentEvent(){return re(this,sl,"f")}currentRun(){return re(this,al,"f")}currentMessageSnapshot(){return re(this,un,"f")}currentRunStepSnapshot(){return re(this,co,"f")}async finalRunSteps(){return await this.done(),Object.values(re(this,vn,"f"))}async finalMessages(){return await this.done(),Object.values(re(this,il,"f"))}async finalRun(){if(await this.done(),!re(this,Ji,"f"))throw Error("Final run was not received.");return re(this,Ji,"f")}async _createThreadAssistantStream(e,i,a){var p;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},c=await e.createAndRun(u,{...a,signal:this.controller.signal});this._connected();for await(const g of c)re(this,yt,"m",ao).call(this,g);if((p=c.controller.signal)!=null&&p.aborted)throw new tn;return this._addRun(re(this,yt,"m",oo).call(this))}async _createAssistantStream(e,i,a,r){var g;const u=r==null?void 0:r.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const c={...a,stream:!0},p=await e.create(i,c,{...r,signal:this.controller.signal});this._connected();for await(const m of p)re(this,yt,"m",ao).call(this,m);if((g=p.controller.signal)!=null&&g.aborted)throw new tn;return this._addRun(re(this,yt,"m",oo).call(this))}static accumulateDelta(e,i){for(const[a,r]of Object.entries(i)){if(!e.hasOwnProperty(a)){e[a]=r;continue}let u=e[a];if(u==null){e[a]=r;continue}if(a==="index"||a==="type"){e[a]=r;continue}if(typeof u=="string"&&typeof r=="string")u+=r;else if(typeof u=="number"&&typeof r=="number")u+=r;else if(yd(u)&&yd(r))u=this.accumulateDelta(u,r);else if(Array.isArray(u)&&Array.isArray(r)){if(u.every(c=>typeof c=="string"||typeof c=="number")){u.push(...r);continue}for(const c of r){if(!yd(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const p=c.index;if(p==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof p!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${p}`);const g=u[p];g==null?u.push(c):u[p]=this.accumulateDelta(g,c)}continue}else throw Error(`Unhandled record type: ${a}, deltaValue: ${r}, accValue: ${u}`);e[a]=u}return e}_addRun(e){return e}async _threadAssistantStream(e,i,a){return await this._createThreadAssistantStream(i,e,a)}async _runAssistantStream(e,i,a,r){return await this._createAssistantStream(i,e,a,r)}async _runToolAssistantStream(e,i,a,r,u){return await this._createToolAssistantStream(a,e,i,r,u)}}ao=function(e){if(!this.ended)switch(Gt(this,sl,e,"f"),re(this,yt,"m",W0).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":re(this,yt,"m",nv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":re(this,yt,"m",Z0).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":re(this,yt,"m",Q0).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},oo=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");if(!re(this,Ji,"f"))throw Error("Final run has not been received");return re(this,Ji,"f")},Q0=function(e){const[i,a]=re(this,yt,"m",ev).call(this,e,re(this,un,"f"));Gt(this,un,i,"f"),re(this,il,"f")[i.id]=i;for(const r of a){const u=i.content[r.index];(u==null?void 0:u.type)=="text"&&this._emit("textCreated",u.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,i),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let u=r.text,c=i.content[r.index];if(c&&c.type=="text")this._emit("textDelta",u,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=re(this,Ys,"f")){if(re(this,Yi,"f"))switch(re(this,Yi,"f").type){case"text":this._emit("textDone",re(this,Yi,"f").text,re(this,un,"f"));break;case"image_file":this._emit("imageFileDone",re(this,Yi,"f").image_file,re(this,un,"f"));break}Gt(this,Ys,r.index,"f")}Gt(this,Yi,i.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(re(this,Ys,"f")!==void 0){const r=e.data.content[re(this,Ys,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,re(this,un,"f"));break;case"text":this._emit("textDone",r.text,re(this,un,"f"));break}}re(this,un,"f")&&this._emit("messageDone",e.data),Gt(this,un,void 0,"f")}},Z0=function(e){const i=re(this,yt,"m",j0).call(this,e);switch(Gt(this,co,i,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const a=e.data.delta;if(a.step_details&&a.step_details.type=="tool_calls"&&a.step_details.tool_calls&&i.step_details.type=="tool_calls")for(const u of a.step_details.tool_calls)u.index==re(this,ml,"f")?this._emit("toolCallDelta",u,i.step_details.tool_calls[u.index]):(re(this,zt,"f")&&this._emit("toolCallDone",re(this,zt,"f")),Gt(this,ml,u.index,"f"),Gt(this,zt,i.step_details.tool_calls[u.index],"f"),re(this,zt,"f")&&this._emit("toolCallCreated",re(this,zt,"f")));this._emit("runStepDelta",e.data.delta,i);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Gt(this,co,void 0,"f"),e.data.step_details.type=="tool_calls"&&re(this,zt,"f")&&(this._emit("toolCallDone",re(this,zt,"f")),Gt(this,zt,void 0,"f")),this._emit("runStepDone",e.data,i);break}},W0=function(e){re(this,zd,"f").push(e),this._emit("event",e)},j0=function(e){switch(e.event){case"thread.run.step.created":return re(this,vn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let i=re(this,vn,"f")[e.data.id];if(!i)throw Error("Received a RunStepDelta before creation of a snapshot");let a=e.data;if(a.delta){const r=cn.accumulateDelta(i,a.delta);re(this,vn,"f")[e.data.id]=r}return re(this,vn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":re(this,vn,"f")[e.data.id]=e.data;break}if(re(this,vn,"f")[e.data.id])return re(this,vn,"f")[e.data.id];throw new Error("No snapshot available")},ev=function(e,i){let a=[];switch(e.event){case"thread.message.created":return[e.data,a];case"thread.message.delta":if(!i)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const u of r.delta.content)if(u.index in i.content){let c=i.content[u.index];i.content[u.index]=re(this,yt,"m",tv).call(this,u,c)}else i.content[u.index]=u,a.push(u);return[i,a];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(i)return[i,a];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},tv=function(e,i){return cn.accumulateDelta(i,e)},nv=function(e){switch(Gt(this,al,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Gt(this,Ji,e.data,"f"),re(this,zt,"f")&&(this._emit("toolCallDone",re(this,zt,"f")),Gt(this,zt,void 0,"f"));break}};class yf extends he{create(e,i){return this._client.post("/assistants",{body:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,i){return this._client.get(`/assistants/${e}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,i,a){return this._client.post(`/assistants/${e}`,{body:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/assistants",vf,{query:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,i){return this._client.delete(`/assistants/${e}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class vf extends rt{}yf.AssistantsPage=vf;function iv(n){return typeof n.parse=="function"}const Zs=n=>(n==null?void 0:n.role)==="assistant",G_=n=>(n==null?void 0:n.role)==="function",F_=n=>(n==null?void 0:n.role)==="tool";function _f(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function yo(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function GN(n,e){return!e||!z_(e)?{...n,choices:n.choices.map(i=>({...i,message:{...i.message,parsed:null,...i.message.tool_calls?{tool_calls:i.message.tool_calls}:void 0}}))}:Sf(n,e)}function Sf(n,e){const i=n.choices.map(a=>{var r;if(a.finish_reason==="length")throw new x_;if(a.finish_reason==="content_filter")throw new b_;return{...a,message:{...a.message,...a.message.tool_calls?{tool_calls:((r=a.message.tool_calls)==null?void 0:r.map(u=>zN(e,u)))??void 0}:void 0,parsed:a.message.content&&!a.message.refusal?FN(e,a.message.content):null}}});return{...n,choices:i}}function FN(n,e){var i,a;return((i=n.response_format)==null?void 0:i.type)!=="json_schema"?null:((a=n.response_format)==null?void 0:a.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function zN(n,e){var a;const i=(a=n.tools)==null?void 0:a.find(r=>{var u;return((u=r.function)==null?void 0:u.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:yo(i)?i.$parseRaw(e.function.arguments):i!=null&&i.function.strict?JSON.parse(e.function.arguments):null}}}function YN(n,e){var a;if(!n)return!1;const i=(a=n.tools)==null?void 0:a.find(r=>{var u;return((u=r.function)==null?void 0:u.name)===e.function.name});return yo(i)||(i==null?void 0:i.function.strict)||!1}function z_(n){var e;return _f(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(i=>yo(i)||i.type==="function"&&i.function.strict===!0))??!1}function JN(n){for(const e of n??[]){if(e.type!=="function")throw new fe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new fe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var It=function(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},St,Yd,pl,Jd,$d,Kd,Y_,Xd;const sv=10;class J_ extends gf{constructor(){super(...arguments),St.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var a;this._chatCompletions.push(e),this._emit("chatCompletion",e);const i=(a=e.choices[0])==null?void 0:a.message;return i&&this._addMessage(i),e}_addMessage(e,i=!0){if("content"in e||(e.content=null),this.messages.push(e),i){if(this._emit("message",e),(G_(e)||F_(e))&&e.content)this._emit("functionCallResult",e.content);else if(Zs(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Zs(e)&&e.tool_calls)for(const a of e.tool_calls)a.type==="function"&&this._emit("functionCall",a.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),It(this,St,"m",Yd).call(this)}async finalMessage(){return await this.done(),It(this,St,"m",pl).call(this)}async finalFunctionCall(){return await this.done(),It(this,St,"m",Jd).call(this)}async finalFunctionCallResult(){return await this.done(),It(this,St,"m",$d).call(this)}async totalUsage(){return await this.done(),It(this,St,"m",Kd).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const i=It(this,St,"m",pl).call(this);i&&this._emit("finalMessage",i);const a=It(this,St,"m",Yd).call(this);a&&this._emit("finalContent",a);const r=It(this,St,"m",Jd).call(this);r&&this._emit("finalFunctionCall",r);const u=It(this,St,"m",$d).call(this);u!=null&&this._emit("finalFunctionCallResult",u),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",It(this,St,"m",Kd).call(this))}async _createChatCompletion(e,i,a){const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),It(this,St,"m",Y_).call(this,i);const u=await e.chat.completions.create({...i,stream:!1},{...a,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Sf(u,i))}async _runChatCompletion(e,i,a){for(const r of i.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,i,a)}async _runFunctions(e,i,a){var T;const r="function",{function_call:u="auto",stream:c,...p}=i,g=typeof u!="string"&&(u==null?void 0:u.name),{maxChatCompletions:m=sv}=a||{},v={};for(const E of i.functions)v[E.name||E.function.name]=E;const _=i.functions.map(E=>({name:E.name||E.function.name,parameters:E.parameters,description:E.description}));for(const E of i.messages)this._addMessage(E,!1);for(let E=0;E<m;++E){const x=(T=(await this._createChatCompletion(e,{...p,function_call:u,functions:_,messages:[...this.messages]},a)).choices[0])==null?void 0:T.message;if(!x)throw new fe("missing message in ChatCompletion response");if(!x.function_call)return;const{name:N,arguments:k}=x.function_call,D=v[N];if(D){if(g&&g!==N){const F=`Invalid function_call: ${JSON.stringify(N)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:r,name:N,content:F});continue}}else{const F=`Invalid function_call: ${JSON.stringify(N)}. Available options are: ${_.map(I=>JSON.stringify(I.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:N,content:F});continue}let U;try{U=iv(D)?await D.parse(k):k}catch(F){this._addMessage({role:r,name:N,content:F instanceof Error?F.message:String(F)});continue}const L=await D.function(U,this),G=It(this,St,"m",Xd).call(this,L);if(this._addMessage({role:r,name:N,content:G}),g)return}}async _runTools(e,i,a){var E,w,x;const r="tool",{tool_choice:u="auto",stream:c,...p}=i,g=typeof u!="string"&&((E=u==null?void 0:u.function)==null?void 0:E.name),{maxChatCompletions:m=sv}=a||{},v=i.tools.map(N=>{if(yo(N)){if(!N.$callback)throw new fe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:N.$callback,name:N.function.name,description:N.function.description||"",parameters:N.function.parameters,parse:N.$parseRaw,strict:!0}}}return N}),_={};for(const N of v)N.type==="function"&&(_[N.function.name||N.function.function.name]=N.function);const T="tools"in i?v.map(N=>N.type==="function"?{type:"function",function:{name:N.function.name||N.function.function.name,parameters:N.function.parameters,description:N.function.description,strict:N.function.strict}}:N):void 0;for(const N of i.messages)this._addMessage(N,!1);for(let N=0;N<m;++N){const D=(w=(await this._createChatCompletion(e,{...p,tool_choice:u,tools:T,messages:[...this.messages]},a)).choices[0])==null?void 0:w.message;if(!D)throw new fe("missing message in ChatCompletion response");if(!((x=D.tool_calls)!=null&&x.length))return;for(const U of D.tool_calls){if(U.type!=="function")continue;const L=U.id,{name:G,arguments:F}=U.function,I=_[G];if(I){if(g&&g!==G){const X=`Invalid tool_call: ${JSON.stringify(G)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:r,tool_call_id:L,content:X});continue}}else{const X=`Invalid tool_call: ${JSON.stringify(G)}. Available options are: ${Object.keys(_).map(te=>JSON.stringify(te)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:L,content:X});continue}let Q;try{Q=iv(I)?await I.parse(F):F}catch(X){const te=X instanceof Error?X.message:String(X);this._addMessage({role:r,tool_call_id:L,content:te});continue}const z=await I.function(Q,this),Z=It(this,St,"m",Xd).call(this,z);if(this._addMessage({role:r,tool_call_id:L,content:Z}),g)return}}}}St=new WeakSet,Yd=function(){return It(this,St,"m",pl).call(this).content??null},pl=function(){let e=this.messages.length;for(;e-- >0;){const i=this.messages[e];if(Zs(i)){const{function_call:a,...r}=i,u={...r,content:i.content??null,refusal:i.refusal??null};return a&&(u.function_call=a),u}}throw new fe("stream ended without producing a ChatCompletionMessage with role=assistant")},Jd=function(){var e,i;for(let a=this.messages.length-1;a>=0;a--){const r=this.messages[a];if(Zs(r)&&(r!=null&&r.function_call))return r.function_call;if(Zs(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(i=r.tool_calls.at(-1))==null?void 0:i.function}},$d=function(){for(let e=this.messages.length-1;e>=0;e--){const i=this.messages[e];if(G_(i)&&i.content!=null||F_(i)&&i.content!=null&&typeof i.content=="string"&&this.messages.some(a=>{var r;return a.role==="assistant"&&((r=a.tool_calls)==null?void 0:r.some(u=>u.type==="function"&&u.id===i.tool_call_id))}))return i.content}},Kd=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:i}of this._chatCompletions)i&&(e.completion_tokens+=i.completion_tokens,e.prompt_tokens+=i.prompt_tokens,e.total_tokens+=i.total_tokens);return e},Y_=function(e){if(e.n!=null&&e.n>1)throw new fe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Xd=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class fo extends J_{static runFunctions(e,i,a){const r=new fo,u={...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,i,u)),r}static runTools(e,i,a){const r=new fo,u={...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,i,u)),r}_addMessage(e,i=!0){super._addMessage(e,i),Zs(e)&&e.content&&this._emit("content",e.content)}}const $_=1,K_=2,X_=4,Q_=8,Z_=16,W_=32,j_=64,eS=128,tS=256,nS=eS|tS,iS=Z_|W_|nS|j_,sS=$_|K_|iS,aS=X_|Q_,$N=sS|aS,dt={STR:$_,NUM:K_,ARR:X_,OBJ:Q_,NULL:Z_,BOOL:W_,NAN:j_,INFINITY:eS,MINUS_INFINITY:tS,INF:nS,SPECIAL:iS,ATOM:sS,COLLECTION:aS,ALL:$N};class KN extends Error{}class XN extends Error{}function QN(n,e=dt.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return ZN(n.trim(),e)}const ZN=(n,e)=>{const i=n.length;let a=0;const r=T=>{throw new KN(`${T} at position ${a}`)},u=T=>{throw new XN(`${T} at position ${a}`)},c=()=>(_(),a>=i&&r("Unexpected end of input"),n[a]==='"'?p():n[a]==="{"?g():n[a]==="["?m():n.substring(a,a+4)==="null"||dt.NULL&e&&i-a<4&&"null".startsWith(n.substring(a))?(a+=4,null):n.substring(a,a+4)==="true"||dt.BOOL&e&&i-a<4&&"true".startsWith(n.substring(a))?(a+=4,!0):n.substring(a,a+5)==="false"||dt.BOOL&e&&i-a<5&&"false".startsWith(n.substring(a))?(a+=5,!1):n.substring(a,a+8)==="Infinity"||dt.INFINITY&e&&i-a<8&&"Infinity".startsWith(n.substring(a))?(a+=8,1/0):n.substring(a,a+9)==="-Infinity"||dt.MINUS_INFINITY&e&&1<i-a&&i-a<9&&"-Infinity".startsWith(n.substring(a))?(a+=9,-1/0):n.substring(a,a+3)==="NaN"||dt.NAN&e&&i-a<3&&"NaN".startsWith(n.substring(a))?(a+=3,NaN):v()),p=()=>{const T=a;let E=!1;for(a++;a<i&&(n[a]!=='"'||E&&n[a-1]==="\\");)E=n[a]==="\\"?!E:!1,a++;if(n.charAt(a)=='"')try{return JSON.parse(n.substring(T,++a-Number(E)))}catch(w){u(String(w))}else if(dt.STR&e)try{return JSON.parse(n.substring(T,a-Number(E))+'"')}catch{return JSON.parse(n.substring(T,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},g=()=>{a++,_();const T={};try{for(;n[a]!=="}";){if(_(),a>=i&&dt.OBJ&e)return T;const E=p();_(),a++;try{const w=c();Object.defineProperty(T,E,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(dt.OBJ&e)return T;throw w}_(),n[a]===","&&a++}}catch{if(dt.OBJ&e)return T;r("Expected '}' at end of object")}return a++,T},m=()=>{a++;const T=[];try{for(;n[a]!=="]";)T.push(c()),_(),n[a]===","&&a++}catch{if(dt.ARR&e)return T;r("Expected ']' at end of array")}return a++,T},v=()=>{if(a===0){n==="-"&&dt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(E){if(dt.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}u(String(E))}}const T=a;for(n[a]==="-"&&a++;n[a]&&!",]}".includes(n[a]);)a++;a==i&&!(dt.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(T,a))}catch{n.substring(T,a)==="-"&&dt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(T,n.lastIndexOf("e")))}catch(w){u(String(w))}}},_=()=>{for(;a<i&&` 
\r	`.includes(n[a]);)a++};return c()},av=n=>QN(n,dt.ALL^dt.NUM);var qs=function(n,e,i,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(n,i):r?r.value=i:e.set(n,i),i},Oe=function(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},at,Bn,Bs,yi,vd,Yr,_d,Sd,Td,Jr,Cd,ov;class ho extends J_{constructor(e){super(),at.add(this),Bn.set(this,void 0),Bs.set(this,void 0),yi.set(this,void 0),qs(this,Bn,e,"f"),qs(this,Bs,[],"f")}get currentChatCompletionSnapshot(){return Oe(this,yi,"f")}static fromReadableStream(e){const i=new ho(null);return i._run(()=>i._fromReadableStream(e)),i}static createChatCompletion(e,i,a){const r=new ho(i);return r._run(()=>r._runChatCompletion(e,{...i,stream:!0},{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,i,a){var c;super._createChatCompletion;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Oe(this,at,"m",vd).call(this);const u=await e.chat.completions.create({...i,stream:!0},{...a,signal:this.controller.signal});this._connected();for await(const p of u)Oe(this,at,"m",_d).call(this,p);if((c=u.controller.signal)!=null&&c.aborted)throw new tn;return this._addChatCompletion(Oe(this,at,"m",Jr).call(this))}async _fromReadableStream(e,i){var c;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),Oe(this,at,"m",vd).call(this),this._connected();const r=_n.fromReadableStream(e,this.controller);let u;for await(const p of r)u&&u!==p.id&&this._addChatCompletion(Oe(this,at,"m",Jr).call(this)),Oe(this,at,"m",_d).call(this,p),u=p.id;if((c=r.controller.signal)!=null&&c.aborted)throw new tn;return this._addChatCompletion(Oe(this,at,"m",Jr).call(this))}[(Bn=new WeakMap,Bs=new WeakMap,yi=new WeakMap,at=new WeakSet,vd=function(){this.ended||qs(this,yi,void 0,"f")},Yr=function(i){let a=Oe(this,Bs,"f")[i.index];return a||(a={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Oe(this,Bs,"f")[i.index]=a,a)},_d=function(i){var r,u,c,p,g,m,v,_,T,E,w,x,N,k,D;if(this.ended)return;const a=Oe(this,at,"m",ov).call(this,i);this._emit("chunk",i,a);for(const U of i.choices){const L=a.choices[U.index];U.delta.content!=null&&((r=L.message)==null?void 0:r.role)==="assistant"&&((u=L.message)!=null&&u.content)&&(this._emit("content",U.delta.content,L.message.content),this._emit("content.delta",{delta:U.delta.content,snapshot:L.message.content,parsed:L.message.parsed})),U.delta.refusal!=null&&((c=L.message)==null?void 0:c.role)==="assistant"&&((p=L.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:U.delta.refusal,snapshot:L.message.refusal}),((g=U.logprobs)==null?void 0:g.content)!=null&&((m=L.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(v=U.logprobs)==null?void 0:v.content,snapshot:((_=L.logprobs)==null?void 0:_.content)??[]}),((T=U.logprobs)==null?void 0:T.refusal)!=null&&((E=L.message)==null?void 0:E.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=U.logprobs)==null?void 0:w.refusal,snapshot:((x=L.logprobs)==null?void 0:x.refusal)??[]});const G=Oe(this,at,"m",Yr).call(this,L);L.finish_reason&&(Oe(this,at,"m",Td).call(this,L),G.current_tool_call_index!=null&&Oe(this,at,"m",Sd).call(this,L,G.current_tool_call_index));for(const F of U.delta.tool_calls??[])G.current_tool_call_index!==F.index&&(Oe(this,at,"m",Td).call(this,L),G.current_tool_call_index!=null&&Oe(this,at,"m",Sd).call(this,L,G.current_tool_call_index)),G.current_tool_call_index=F.index;for(const F of U.delta.tool_calls??[]){const I=(N=L.message.tool_calls)==null?void 0:N[F.index];I!=null&&I.type&&((I==null?void 0:I.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(k=I.function)==null?void 0:k.name,index:F.index,arguments:I.function.arguments,parsed_arguments:I.function.parsed_arguments,arguments_delta:((D=F.function)==null?void 0:D.arguments)??""}):(I==null||I.type,void 0))}}},Sd=function(i,a){var c,p,g;if(Oe(this,at,"m",Yr).call(this,i).done_tool_calls.has(a))return;const u=(c=i.message.tool_calls)==null?void 0:c[a];if(!u)throw new Error("no tool call snapshot");if(!u.type)throw new Error("tool call snapshot missing `type`");if(u.type==="function"){const m=(g=(p=Oe(this,Bn,"f"))==null?void 0:p.tools)==null?void 0:g.find(v=>v.type==="function"&&v.function.name===u.function.name);this._emit("tool_calls.function.arguments.done",{name:u.function.name,index:a,arguments:u.function.arguments,parsed_arguments:yo(m)?m.$parseRaw(u.function.arguments):m!=null&&m.function.strict?JSON.parse(u.function.arguments):null})}else u.type},Td=function(i){var r,u;const a=Oe(this,at,"m",Yr).call(this,i);if(i.message.content&&!a.content_done){a.content_done=!0;const c=Oe(this,at,"m",Cd).call(this);this._emit("content.done",{content:i.message.content,parsed:c?c.$parseRaw(i.message.content):null})}i.message.refusal&&!a.refusal_done&&(a.refusal_done=!0,this._emit("refusal.done",{refusal:i.message.refusal})),(r=i.logprobs)!=null&&r.content&&!a.logprobs_content_done&&(a.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:i.logprobs.content})),(u=i.logprobs)!=null&&u.refusal&&!a.logprobs_refusal_done&&(a.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:i.logprobs.refusal}))},Jr=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const i=Oe(this,yi,"f");if(!i)throw new fe("request ended without sending any chunks");return qs(this,yi,void 0,"f"),qs(this,Bs,[],"f"),WN(i,Oe(this,Bn,"f"))},Cd=function(){var a;const i=(a=Oe(this,Bn,"f"))==null?void 0:a.response_format;return _f(i)?i:null},ov=function(i){var a,r,u,c;let p=Oe(this,yi,"f");const{choices:g,...m}=i;p?Object.assign(p,m):p=qs(this,yi,{...m,choices:[]},"f");for(const{delta:v,finish_reason:_,index:T,logprobs:E=null,...w}of i.choices){let x=p.choices[T];if(x||(x=p.choices[T]={finish_reason:_,index:T,message:{},logprobs:E,...w}),E)if(!x.logprobs)x.logprobs=Object.assign({},E);else{const{content:F,refusal:I,...Q}=E;Object.assign(x.logprobs,Q),F&&((a=x.logprobs).content??(a.content=[]),x.logprobs.content.push(...F)),I&&((r=x.logprobs).refusal??(r.refusal=[]),x.logprobs.refusal.push(...I))}if(_&&(x.finish_reason=_,Oe(this,Bn,"f")&&z_(Oe(this,Bn,"f")))){if(_==="length")throw new x_;if(_==="content_filter")throw new b_}if(Object.assign(x,w),!v)continue;const{content:N,refusal:k,function_call:D,role:U,tool_calls:L,...G}=v;if(Object.assign(x.message,G),k&&(x.message.refusal=(x.message.refusal||"")+k),U&&(x.message.role=U),D&&(x.message.function_call?(D.name&&(x.message.function_call.name=D.name),D.arguments&&((u=x.message.function_call).arguments??(u.arguments=""),x.message.function_call.arguments+=D.arguments)):x.message.function_call=D),N&&(x.message.content=(x.message.content||"")+N,!x.message.refusal&&Oe(this,at,"m",Cd).call(this)&&(x.message.parsed=av(x.message.content))),L){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:F,id:I,type:Q,function:z,...Z}of L){const X=(c=x.message.tool_calls)[F]??(c[F]={});Object.assign(X,Z),I&&(X.id=I),Q&&(X.type=Q),z&&(X.function??(X.function={name:z.name??"",arguments:""})),z!=null&&z.name&&(X.function.name=z.name),z!=null&&z.arguments&&(X.function.arguments+=z.arguments,YN(Oe(this,Bn,"f"),X)&&(X.function.parsed_arguments=av(X.function.arguments)))}}}return p},Symbol.asyncIterator)](){const e=[],i=[];let a=!1;return this.on("chunk",r=>{const u=i.shift();u?u.resolve(r):e.push(r)}),this.on("end",()=>{a=!0;for(const r of i)r.resolve(void 0);i.length=0}),this.on("abort",r=>{a=!0;for(const u of i)u.reject(r);i.length=0}),this.on("error",r=>{a=!0;for(const u of i)u.reject(r);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((u,c)=>i.push({resolve:u,reject:c})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new _n(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function WN(n,e){const{id:i,choices:a,created:r,model:u,system_fingerprint:c,...p}=n,g={...p,id:i,choices:a.map(({message:m,finish_reason:v,index:_,logprobs:T,...E})=>{if(!v)throw new fe(`missing finish_reason for choice ${_}`);const{content:w=null,function_call:x,tool_calls:N,...k}=m,D=m.role;if(!D)throw new fe(`missing role for choice ${_}`);if(x){const{arguments:U,name:L}=x;if(U==null)throw new fe(`missing function_call.arguments for choice ${_}`);if(!L)throw new fe(`missing function_call.name for choice ${_}`);return{...E,message:{content:w,function_call:{arguments:U,name:L},role:D,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}return N?{...E,index:_,finish_reason:v,logprobs:T,message:{...k,role:D,content:w,refusal:m.refusal??null,tool_calls:N.map((U,L)=>{const{function:G,type:F,id:I,...Q}=U,{arguments:z,name:Z,...X}=G||{};if(I==null)throw new fe(`missing choices[${_}].tool_calls[${L}].id
${$r(n)}`);if(F==null)throw new fe(`missing choices[${_}].tool_calls[${L}].type
${$r(n)}`);if(Z==null)throw new fe(`missing choices[${_}].tool_calls[${L}].function.name
${$r(n)}`);if(z==null)throw new fe(`missing choices[${_}].tool_calls[${L}].function.arguments
${$r(n)}`);return{...Q,id:I,type:F,function:{...X,name:Z,arguments:z}}})}}:{...E,message:{...k,content:w,role:D,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}),created:r,model:u,object:"chat.completion",...c?{system_fingerprint:c}:{}};return GN(g,e)}function $r(n){return JSON.stringify(n)}class Ws extends ho{static fromReadableStream(e){const i=new Ws(null);return i._run(()=>i._fromReadableStream(e)),i}static runFunctions(e,i,a){const r=new Ws(null),u={...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,i,u)),r}static runTools(e,i,a){const r=new Ws(i),u={...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,i,u)),r}}let oS=class extends he{parse(e,i){return JN(e.tools),this._client.chat.completions.create(e,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(a=>Sf(a,e))}runFunctions(e,i){return e.stream?Ws.runFunctions(this._client,e,i):fo.runFunctions(this._client,e,i)}runTools(e,i){return e.stream?Ws.runTools(this._client,e,i):fo.runTools(this._client,e,i)}stream(e,i){return ho.createChatCompletion(this._client,e,i)}};class Qd extends he{constructor(){super(...arguments),this.completions=new oS(this._client)}}(function(n){n.Completions=oS})(Qd||(Qd={}));class rS extends he{create(e,i){return this._client.post("/realtime/sessions",{body:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class lS extends he{create(e,i){return this._client.post("/realtime/transcription_sessions",{body:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Il extends he{constructor(){super(...arguments),this.sessions=new rS(this._client),this.transcriptionSessions=new lS(this._client)}}Il.Sessions=rS;Il.TranscriptionSessions=lS;class Tf extends he{create(e,i,a){return this._client.post(`/threads/${e}/messages`,{body:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}retrieve(e,i,a){return this._client.get(`/threads/${e}/messages/${i}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}update(e,i,a,r){return this._client.post(`/threads/${e}/messages/${i}`,{body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/threads/${e}/messages`,Cf,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}del(e,i,a){return this._client.delete(`/threads/${e}/messages/${i}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}}class Cf extends rt{}Tf.MessagesPage=Cf;class Ef extends he{retrieve(e,i,a,r={},u){return $e(r)?this.retrieve(e,i,a,{},r):this._client.get(`/threads/${e}/runs/${i}/steps/${a}`,{query:r,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}list(e,i,a={},r){return $e(a)?this.list(e,i,{},a):this._client.getAPIList(`/threads/${e}/runs/${i}/steps`,Af,{query:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Af extends rt{}Ef.RunStepsPage=Af;let vo=class extends he{constructor(){super(...arguments),this.steps=new Ef(this._client)}create(e,i,a){const{include:r,...u}=i;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:u,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers},stream:i.stream??!1})}retrieve(e,i,a){return this._client.get(`/threads/${e}/runs/${i}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}update(e,i,a,r){return this._client.post(`/threads/${e}/runs/${i}`,{body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/threads/${e}/runs`,xf,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}cancel(e,i,a){return this._client.post(`/threads/${e}/runs/${i}/cancel`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}async createAndPoll(e,i,a){const r=await this.create(e,i,a);return await this.poll(e,r.id,a)}createAndStream(e,i,a){return cn.createAssistantStream(e,this._client.beta.threads.runs,i,a)}async poll(e,i,a){const r={...a==null?void 0:a.headers,"X-Stainless-Poll-Helper":"true"};for(a!=null&&a.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=a.pollIntervalMs.toString());;){const{data:u,response:c}=await this.retrieve(e,i,{...a,headers:{...a==null?void 0:a.headers,...r}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let p=5e3;if(a!=null&&a.pollIntervalMs)p=a.pollIntervalMs;else{const g=c.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(p=m)}}await po(p);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(e,i,a){return cn.createAssistantStream(e,this._client.beta.threads.runs,i,a)}submitToolOutputs(e,i,a,r){return this._client.post(`/threads/${e}/runs/${i}/submit_tool_outputs`,{body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:a.stream??!1})}async submitToolOutputsAndPoll(e,i,a,r){const u=await this.submitToolOutputs(e,i,a,r);return await this.poll(e,u.id,r)}submitToolOutputsStream(e,i,a,r){return cn.createToolAssistantStream(e,i,this._client.beta.threads.runs,a,r)}};class xf extends rt{}vo.RunsPage=xf;vo.Steps=Ef;vo.RunStepsPage=Af;class na extends he{constructor(){super(...arguments),this.runs=new vo(this._client),this.messages=new Tf(this._client)}create(e={},i){return $e(e)?this.create({},e):this._client.post("/threads",{body:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,i){return this._client.get(`/threads/${e}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,i,a){return this._client.post(`/threads/${e}`,{body:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}del(e,i){return this._client.delete(`/threads/${e}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}createAndRun(e,i){return this._client.post("/threads/runs",{body:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:e.stream??!1})}async createAndRunPoll(e,i){const a=await this.createAndRun(e,i);return await this.runs.poll(a.thread_id,a.id,i)}createAndRunStream(e,i){return cn.createThreadAssistantStream(e,this._client.beta.threads,i)}}na.Runs=vo;na.RunsPage=xf;na.Messages=Tf;na.MessagesPage=Cf;class ia extends he{constructor(){super(...arguments),this.realtime=new Il(this._client),this.chat=new Qd(this._client),this.assistants=new yf(this._client),this.threads=new na(this._client)}}ia.Realtime=Il;ia.Assistants=yf;ia.AssistantsPage=vf;ia.Threads=na;class uS extends he{create(e,i){return this._client.post("/completions",{body:e,...i,stream:e.stream??!1})}}class cS extends he{retrieve(e,i,a){return this._client.get(`/containers/${e}/files/${i}/content`,{...a,headers:{Accept:"application/binary",...a==null?void 0:a.headers},__binaryResponse:!0})}}let Dl=class extends he{constructor(){super(...arguments),this.content=new cS(this._client)}create(e,i,a){return this._client.post(`/containers/${e}/files`,Xi({body:i,...a}))}retrieve(e,i,a){return this._client.get(`/containers/${e}/files/${i}`,a)}list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/containers/${e}/files`,bf,{query:i,...a})}del(e,i,a){return this._client.delete(`/containers/${e}/files/${i}`,{...a,headers:{Accept:"*/*",...a==null?void 0:a.headers}})}};class bf extends rt{}Dl.FileListResponsesPage=bf;Dl.Content=cS;class _o extends he{constructor(){super(...arguments),this.files=new Dl(this._client)}create(e,i){return this._client.post("/containers",{body:e,...i})}retrieve(e,i){return this._client.get(`/containers/${e}`,i)}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/containers",wf,{query:e,...i})}del(e,i){return this._client.delete(`/containers/${e}`,{...i,headers:{Accept:"*/*",...i==null?void 0:i.headers}})}}class wf extends rt{}_o.ContainerListResponsesPage=wf;_o.Files=Dl;_o.FileListResponsesPage=bf;class dS extends he{create(e,i){const a=!!e.encoding_format;let r=a?e.encoding_format:"base64";a&&Ci("Request","User defined encoding_format:",e.encoding_format);const u=this._client.post("/embeddings",{body:{...e,encoding_format:r},...i});return a?u:(Ci("response","Decoding base64 embeddings to float32 array"),u._thenUnwrap(c=>(c&&c.data&&c.data.forEach(p=>{const g=p.embedding;p.embedding=ON(g)}),c)))}}class Rf extends he{retrieve(e,i,a,r){return this._client.get(`/evals/${e}/runs/${i}/output_items/${a}`,r)}list(e,i,a={},r){return $e(a)?this.list(e,i,{},a):this._client.getAPIList(`/evals/${e}/runs/${i}/output_items`,Nf,{query:a,...r})}}class Nf extends rt{}Rf.OutputItemListResponsesPage=Nf;class So extends he{constructor(){super(...arguments),this.outputItems=new Rf(this._client)}create(e,i,a){return this._client.post(`/evals/${e}/runs`,{body:i,...a})}retrieve(e,i,a){return this._client.get(`/evals/${e}/runs/${i}`,a)}list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/evals/${e}/runs`,Mf,{query:i,...a})}del(e,i,a){return this._client.delete(`/evals/${e}/runs/${i}`,a)}cancel(e,i,a){return this._client.post(`/evals/${e}/runs/${i}`,a)}}class Mf extends rt{}So.RunListResponsesPage=Mf;So.OutputItems=Rf;So.OutputItemListResponsesPage=Nf;class To extends he{constructor(){super(...arguments),this.runs=new So(this._client)}create(e,i){return this._client.post("/evals",{body:e,...i})}retrieve(e,i){return this._client.get(`/evals/${e}`,i)}update(e,i,a){return this._client.post(`/evals/${e}`,{body:i,...a})}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/evals",If,{query:e,...i})}del(e,i){return this._client.delete(`/evals/${e}`,i)}}class If extends rt{}To.EvalListResponsesPage=If;To.Runs=So;To.RunListResponsesPage=Mf;let Df=class extends he{create(e,i){return this._client.post("/files",Xi({body:e,...i}))}retrieve(e,i){return this._client.get(`/files/${e}`,i)}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/files",Pf,{query:e,...i})}del(e,i){return this._client.delete(`/files/${e}`,i)}content(e,i){return this._client.get(`/files/${e}/content`,{...i,headers:{Accept:"application/binary",...i==null?void 0:i.headers},__binaryResponse:!0})}retrieveContent(e,i){return this._client.get(`/files/${e}/content`,i)}async waitForProcessing(e,{pollInterval:i=5e3,maxWait:a=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),u=Date.now();let c=await this.retrieve(e);for(;!c.status||!r.has(c.status);)if(await po(i),c=await this.retrieve(e),Date.now()-u>a)throw new hf({message:`Giving up on waiting for file ${e} to finish processing after ${a} milliseconds.`});return c}};class Pf extends rt{}Df.FileObjectsPage=Pf;class fS extends he{}let hS=class extends he{run(e,i){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...i})}validate(e,i){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...i})}};class Uf extends he{constructor(){super(...arguments),this.graders=new hS(this._client)}}Uf.Graders=hS;class Lf extends he{create(e,i,a){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,kf,{body:i,method:"post",...a})}retrieve(e,i={},a){return $e(i)?this.retrieve(e,{},i):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:i,...a})}del(e,i,a){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${i}`,a)}}class kf extends wl{}Lf.PermissionCreateResponsesPage=kf;let Pl=class extends he{constructor(){super(...arguments),this.permissions=new Lf(this._client)}};Pl.Permissions=Lf;Pl.PermissionCreateResponsesPage=kf;class qf extends he{list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Bf,{query:i,...a})}}class Bf extends rt{}qf.FineTuningJobCheckpointsPage=Bf;class sa extends he{constructor(){super(...arguments),this.checkpoints=new qf(this._client)}create(e,i){return this._client.post("/fine_tuning/jobs",{body:e,...i})}retrieve(e,i){return this._client.get(`/fine_tuning/jobs/${e}`,i)}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Vf,{query:e,...i})}cancel(e,i){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,i)}listEvents(e,i={},a){return $e(i)?this.listEvents(e,{},i):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Of,{query:i,...a})}pause(e,i){return this._client.post(`/fine_tuning/jobs/${e}/pause`,i)}resume(e,i){return this._client.post(`/fine_tuning/jobs/${e}/resume`,i)}}class Vf extends rt{}class Of extends rt{}sa.FineTuningJobsPage=Vf;sa.FineTuningJobEventsPage=Of;sa.Checkpoints=qf;sa.FineTuningJobCheckpointsPage=Bf;class Ai extends he{constructor(){super(...arguments),this.methods=new fS(this._client),this.jobs=new sa(this._client),this.checkpoints=new Pl(this._client),this.alpha=new Uf(this._client)}}Ai.Methods=fS;Ai.Jobs=sa;Ai.FineTuningJobsPage=Vf;Ai.FineTuningJobEventsPage=Of;Ai.Checkpoints=Pl;Ai.Alpha=Uf;class mS extends he{}class Hf extends he{constructor(){super(...arguments),this.graderModels=new mS(this._client)}}Hf.GraderModels=mS;class pS extends he{createVariation(e,i){return this._client.post("/images/variations",Xi({body:e,...i}))}edit(e,i){return this._client.post("/images/edits",Xi({body:e,...i}))}generate(e,i){return this._client.post("/images/generations",{body:e,...i})}}class Gf extends he{retrieve(e,i){return this._client.get(`/models/${e}`,i)}list(e){return this._client.getAPIList("/models",Ff,e)}del(e,i){return this._client.delete(`/models/${e}`,i)}}class Ff extends wl{}Gf.ModelsPage=Ff;class gS extends he{create(e,i){return this._client.post("/moderations",{body:e,...i})}}function jN(n,e){return!e||!tM(e)?{...n,output_parsed:null,output:n.output.map(i=>i.type==="function_call"?{...i,parsed_arguments:null}:i.type==="message"?{...i,content:i.content.map(a=>({...a,parsed:null}))}:i)}:yS(n,e)}function yS(n,e){const i=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:sM(e,r)};if(r.type==="message"){const u=r.content.map(c=>c.type==="output_text"?{...c,parsed:eM(e,c.text)}:c);return{...r,content:u}}return r}),a=Object.assign({},n,{output:i});return Object.getOwnPropertyDescriptor(n,"output_text")||vS(a),Object.defineProperty(a,"output_parsed",{enumerable:!0,get(){for(const r of a.output)if(r.type==="message"){for(const u of r.content)if(u.type==="output_text"&&u.parsed!==null)return u.parsed}return null}}),a}function eM(n,e){var i,a,r,u;return((a=(i=n.text)==null?void 0:i.format)==null?void 0:a.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((u=n.text)==null?void 0:u.format).$parseRaw(e):JSON.parse(e)}function tM(n){var e;return!!_f((e=n.text)==null?void 0:e.format)}function nM(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function iM(n,e){return n.find(i=>i.type==="function"&&i.name===e)}function sM(n,e){const i=iM(n.tools??[],e.name);return{...e,...e,parsed_arguments:nM(i)?i.$parseRaw(e.arguments):i!=null&&i.strict?JSON.parse(e.arguments):null}}function vS(n){const e=[];for(const i of n.output)if(i.type==="message")for(const a of i.content)a.type==="output_text"&&e.push(a.text);n.output_text=e.join("")}class _S extends he{list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/responses/${e}/input_items`,oM,{query:i,...a})}}var Vs=function(n,e,i,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(n,i):r?r.value=i:e.set(n,i),i},vi=function(n,e,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(n):a?a.value:e.get(n)},Os,Kr,_i,Xr,rv,lv,uv,cv;class zf extends gf{constructor(e){super(),Os.add(this),Kr.set(this,void 0),_i.set(this,void 0),Xr.set(this,void 0),Vs(this,Kr,e,"f")}static createResponse(e,i,a){const r=new zf(i);return r._run(()=>r._createOrRetrieveResponse(e,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,i,a){var p;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),vi(this,Os,"m",rv).call(this);let u,c=null;"response_id"in i?(u=await e.responses.retrieve(i.response_id,{stream:!0},{...a,signal:this.controller.signal,stream:!0}),c=i.starting_after??null):u=await e.responses.create({...i,stream:!0},{...a,signal:this.controller.signal}),this._connected();for await(const g of u)vi(this,Os,"m",lv).call(this,g,c);if((p=u.controller.signal)!=null&&p.aborted)throw new tn;return vi(this,Os,"m",uv).call(this)}[(Kr=new WeakMap,_i=new WeakMap,Xr=new WeakMap,Os=new WeakSet,rv=function(){this.ended||Vs(this,_i,void 0,"f")},lv=function(i,a){if(this.ended)return;const r=(c,p)=>{(a==null||p.sequence_number>a)&&this._emit(c,p)},u=vi(this,Os,"m",cv).call(this,i);switch(r("event",i),i.type){case"response.output_text.delta":{const c=u.output[i.output_index];if(!c)throw new fe(`missing output at index ${i.output_index}`);if(c.type==="message"){const p=c.content[i.content_index];if(!p)throw new fe(`missing content at index ${i.content_index}`);if(p.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${p.type}`);r("response.output_text.delta",{...i,snapshot:p.text})}break}case"response.function_call_arguments.delta":{const c=u.output[i.output_index];if(!c)throw new fe(`missing output at index ${i.output_index}`);c.type==="function_call"&&r("response.function_call_arguments.delta",{...i,snapshot:c.arguments});break}default:r(i.type,i);break}},uv=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const i=vi(this,_i,"f");if(!i)throw new fe("request ended without sending any events");Vs(this,_i,void 0,"f");const a=aM(i,vi(this,Kr,"f"));return Vs(this,Xr,a,"f"),a},cv=function(i){let a=vi(this,_i,"f");if(!a){if(i.type!=="response.created")throw new fe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${i.type}`);return a=Vs(this,_i,i.response,"f"),a}switch(i.type){case"response.output_item.added":{a.output.push(i.item);break}case"response.content_part.added":{const r=a.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);r.type==="message"&&r.content.push(i.part);break}case"response.output_text.delta":{const r=a.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);if(r.type==="message"){const u=r.content[i.content_index];if(!u)throw new fe(`missing content at index ${i.content_index}`);if(u.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${u.type}`);u.text+=i.delta}break}case"response.function_call_arguments.delta":{const r=a.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);r.type==="function_call"&&(r.arguments+=i.delta);break}case"response.completed":{Vs(this,_i,i.response,"f");break}}return a},Symbol.asyncIterator)](){const e=[],i=[];let a=!1;return this.on("event",r=>{const u=i.shift();u?u.resolve(r):e.push(r)}),this.on("end",()=>{a=!0;for(const r of i)r.resolve(void 0);i.length=0}),this.on("abort",r=>{a=!0;for(const u of i)u.reject(r);i.length=0}),this.on("error",r=>{a=!0;for(const u of i)u.reject(r);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((u,c)=>i.push({resolve:u,reject:c})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=vi(this,Xr,"f");if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}}function aM(n,e){return jN(n,e)}class Yf extends he{constructor(){super(...arguments),this.inputItems=new _S(this._client)}create(e,i){return this._client.post("/responses",{body:e,...i,stream:e.stream??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&vS(a),a))}retrieve(e,i={},a){return this._client.get(`/responses/${e}`,{query:i,...a,stream:(i==null?void 0:i.stream)??!1})}del(e,i){return this._client.delete(`/responses/${e}`,{...i,headers:{Accept:"*/*",...i==null?void 0:i.headers}})}parse(e,i){return this._client.responses.create(e,i)._thenUnwrap(a=>yS(a,e))}stream(e,i){return zf.createResponse(this._client,e,i)}cancel(e,i){return this._client.post(`/responses/${e}/cancel`,{...i,headers:{Accept:"*/*",...i==null?void 0:i.headers}})}}class oM extends rt{}Yf.InputItems=_S;class SS extends he{create(e,i,a){return this._client.post(`/uploads/${e}/parts`,Xi({body:i,...a}))}}class Jf extends he{constructor(){super(...arguments),this.parts=new SS(this._client)}create(e,i){return this._client.post("/uploads",{body:e,...i})}cancel(e,i){return this._client.post(`/uploads/${e}/cancel`,i)}complete(e,i,a){return this._client.post(`/uploads/${e}/complete`,{body:i,...a})}}Jf.Parts=SS;const rM=async n=>{const e=await Promise.allSettled(n),i=e.filter(r=>r.status==="rejected");if(i.length){for(const r of i)console.error(r.reason);throw new Error(`${i.length} promise(s) failed - see the above errors`)}const a=[];for(const r of e)r.status==="fulfilled"&&a.push(r.value);return a};class Ul extends he{create(e,i,a){return this._client.post(`/vector_stores/${e}/files`,{body:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}retrieve(e,i,a){return this._client.get(`/vector_stores/${e}/files/${i}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}update(e,i,a,r){return this._client.post(`/vector_stores/${e}/files/${i}`,{body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,i={},a){return $e(i)?this.list(e,{},i):this._client.getAPIList(`/vector_stores/${e}/files`,Ll,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}del(e,i,a){return this._client.delete(`/vector_stores/${e}/files/${i}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}async createAndPoll(e,i,a){const r=await this.create(e,i,a);return await this.poll(e,r.id,a)}async poll(e,i,a){const r={...a==null?void 0:a.headers,"X-Stainless-Poll-Helper":"true"};for(a!=null&&a.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=a.pollIntervalMs.toString());;){const u=await this.retrieve(e,i,{...a,headers:r}).withResponse(),c=u.data;switch(c.status){case"in_progress":let p=5e3;if(a!=null&&a.pollIntervalMs)p=a.pollIntervalMs;else{const g=u.response.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(p=m)}}await po(p);break;case"failed":case"completed":return c}}}async upload(e,i,a){const r=await this._client.files.create({file:i,purpose:"assistants"},a);return this.create(e,{file_id:r.id},a)}async uploadAndPoll(e,i,a){const r=await this.upload(e,i,a);return await this.poll(e,r.id,a)}content(e,i,a){return this._client.getAPIList(`/vector_stores/${e}/files/${i}/content`,$f,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}}class Ll extends rt{}class $f extends wl{}Ul.VectorStoreFilesPage=Ll;Ul.FileContentResponsesPage=$f;class TS extends he{create(e,i,a){return this._client.post(`/vector_stores/${e}/file_batches`,{body:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}retrieve(e,i,a){return this._client.get(`/vector_stores/${e}/file_batches/${i}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}cancel(e,i,a){return this._client.post(`/vector_stores/${e}/file_batches/${i}/cancel`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}async createAndPoll(e,i,a){const r=await this.create(e,i);return await this.poll(e,r.id,a)}listFiles(e,i,a={},r){return $e(a)?this.listFiles(e,i,{},a):this._client.getAPIList(`/vector_stores/${e}/file_batches/${i}/files`,Ll,{query:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,i,a){const r={...a==null?void 0:a.headers,"X-Stainless-Poll-Helper":"true"};for(a!=null&&a.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=a.pollIntervalMs.toString());;){const{data:u,response:c}=await this.retrieve(e,i,{...a,headers:r}).withResponse();switch(u.status){case"in_progress":let p=5e3;if(a!=null&&a.pollIntervalMs)p=a.pollIntervalMs;else{const g=c.headers.get("openai-poll-after-ms");if(g){const m=parseInt(g);isNaN(m)||(p=m)}}await po(p);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(e,{files:i,fileIds:a=[]},r){if(i==null||i.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const u=(r==null?void 0:r.maxConcurrency)??5,c=Math.min(u,i.length),p=this._client,g=i.values(),m=[...a];async function v(T){for(let E of T){const w=await p.files.create({file:E,purpose:"assistants"},r);m.push(w.id)}}const _=Array(c).fill(g).map(v);return await rM(_),await this.createAndPoll(e,{file_ids:m})}}class xi extends he{constructor(){super(...arguments),this.files=new Ul(this._client),this.fileBatches=new TS(this._client)}create(e,i){return this._client.post("/vector_stores",{body:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,i){return this._client.get(`/vector_stores/${e}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,i,a){return this._client.post(`/vector_stores/${e}`,{body:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e={},i){return $e(e)?this.list({},e):this._client.getAPIList("/vector_stores",Kf,{query:e,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,i){return this._client.delete(`/vector_stores/${e}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}search(e,i,a){return this._client.getAPIList(`/vector_stores/${e}/search`,Xf,{body:i,method:"post",...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}}class Kf extends rt{}class Xf extends wl{}xi.VectorStoresPage=Kf;xi.VectorStoreSearchResponsesPage=Xf;xi.Files=Ul;xi.VectorStoreFilesPage=Ll;xi.FileContentResponsesPage=$f;xi.FileBatches=TS;var CS;class ye extends RN{constructor({baseURL:e=Fr("OPENAI_BASE_URL"),apiKey:i=Fr("OPENAI_API_KEY"),organization:a=Fr("OPENAI_ORG_ID")??null,project:r=Fr("OPENAI_PROJECT_ID")??null,...u}={}){if(i===void 0)throw new fe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const c={apiKey:i,organization:a,project:r,...u,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&BN())throw new fe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:c.baseURL,timeout:c.timeout??6e5,httpAgent:c.httpAgent,maxRetries:c.maxRetries,fetch:c.fetch}),this.completions=new uS(this),this.chat=new Ml(this),this.embeddings=new dS(this),this.files=new Df(this),this.images=new pS(this),this.audio=new go(this),this.moderations=new gS(this),this.models=new Gf(this),this.fineTuning=new Ai(this),this.graders=new Hf(this),this.vectorStores=new xi(this),this.beta=new ia(this),this.batches=new mf(this),this.uploads=new Jf(this),this.responses=new Yf(this),this.evals=new To(this),this.containers=new _o(this),this._options=c,this.apiKey=i,this.organization=a,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return cN(e,{arrayFormat:"brackets"})}}CS=ye;ye.OpenAI=CS;ye.DEFAULT_TIMEOUT=6e5;ye.OpenAIError=fe;ye.APIError=vt;ye.APIConnectionError=El;ye.APIConnectionTimeoutError=hf;ye.APIUserAbortError=tn;ye.NotFoundError=S_;ye.ConflictError=T_;ye.RateLimitError=E_;ye.BadRequestError=y_;ye.AuthenticationError=v_;ye.InternalServerError=A_;ye.PermissionDeniedError=__;ye.UnprocessableEntityError=C_;ye.toFile=M_;ye.fileFromPath=m_;ye.Completions=uS;ye.Chat=Ml;ye.ChatCompletionsPage=Nl;ye.Embeddings=dS;ye.Files=Df;ye.FileObjectsPage=Pf;ye.Images=pS;ye.Audio=go;ye.Moderations=gS;ye.Models=Gf;ye.ModelsPage=Ff;ye.FineTuning=Ai;ye.Graders=Hf;ye.VectorStores=xi;ye.VectorStoresPage=Kf;ye.VectorStoreSearchResponsesPage=Xf;ye.Beta=ia;ye.Batches=mf;ye.BatchesPage=pf;ye.Uploads=Jf;ye.Responses=Yf;ye.Evals=To;ye.EvalListResponsesPage=If;ye.Containers=_o;ye.ContainerListResponsesPage=wf;const ES=async(n,e=2,i)=>{let a;for(let r=0;r<e;r++){if(i!=null&&i.aborted)throw new DOMException("Aborted","AbortError");try{return await n()}catch(u){if(a=u,i!=null&&i.aborted||r===e-1)throw a;console.warn(`API call failed, retrying... (${r+1}/${e})`,u),await new Promise(c=>setTimeout(c,500))}}throw a},gl=n=>{let e=n.trim();const i=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/);i&&i[1]&&(e=i[1]);try{const a=JSON.parse(e);if(Array.isArray(a))return a;if(typeof a=="object"&&a!==null){const r=Object.values(a).find(u=>Array.isArray(u));if(r&&Array.isArray(r))return r;if("chartType"in a&&"title"in a)return[a]}}catch(a){throw console.error("Failed to parse AI response as JSON:",a,"Content:",e),new Error(`AI response could not be parsed as JSON. Content starts with: "${e.substring(0,150)}..."`)}throw new Error("Response did not contain a recognizable JSON array or object of plans.")},Fn=async(n,e,i,a)=>{if(!n.openAIApiKey)throw new Error("OpenAI API key is not set.");const r=new ye({apiKey:n.openAIApiKey,dangerouslyAllowBrowser:!0}),c=(await ES(()=>r.chat.completions.create({model:n.model,messages:e,response_format:i?{type:"json_object"}:void 0},a?{signal:a}:void 0),2,a)).choices[0].message.content;if(!c)throw new Error("OpenAI returned an empty response.");return c},zn=async(n,e,i,a)=>{if(!n.geminiApiKey)throw new Error("Gemini API key is not set.");const r=new eN({apiKey:n.geminiApiKey}),u=`${e}
${i?"Your response must be a valid JSON object adhering to the provided schema.":""}`;return(await ES(()=>r.models.generateContent({model:n.model,contents:u,config:i?{responseMimeType:"application/json",responseSchema:i}:void 0},a?{signal:a}:void 0),2,a)).text.trim()},AS={type:W.ARRAY,items:{type:W.OBJECT,properties:{chartType:{type:W.STRING,enum:["bar","line","pie","doughnut","scatter","combo"],description:"Type of chart to generate."},title:{type:W.STRING,description:"A concise title for the analysis."},description:{type:W.STRING,description:"A brief explanation of what the analysis shows."},aggregation:{type:W.STRING,enum:["sum","count","avg"],description:"The aggregation function to apply. Omit for scatter plots."},groupByColumn:{type:W.STRING,description:"The column to group data by (categorical). Omit for scatter plots."},valueColumn:{type:W.STRING,description:'The column for aggregation (numerical). Not needed for "count".'},xValueColumn:{type:W.STRING,description:"The column for the X-axis of a scatter plot (numerical). Required for scatter plots."},yValueColumn:{type:W.STRING,description:"The column for the Y-axis of a scatter plot (numerical). Required for scatter plots."},secondaryValueColumn:{type:W.STRING,description:"For combo charts, the secondary column for aggregation (numerical)."},secondaryAggregation:{type:W.STRING,enum:["sum","count","avg"],description:"For combo charts, the aggregation for the secondary value column."},defaultTopN:{type:W.INTEGER,description:"Optional. If the analysis has many categories, this suggests a default Top N view (e.g., 8)."},defaultHideOthers:{type:W.BOOLEAN,description:'Optional. If using defaultTopN, suggests whether to hide the "Others" category by default.'}},required:["chartType","title","description"]}},lM={type:W.OBJECT,properties:{name:{type:W.STRING,description:"The column name."},type:{type:W.STRING,enum:["numerical","categorical","date","time","currency","percentage"],description:"The data type of the column. Identify specific types like 'date', 'currency', etc., where possible."}},required:["name","type"]},uM={type:W.OBJECT,properties:{explanation:{type:W.STRING,description:"A brief, user-facing explanation of the transformations that will be applied to the data (e.g., 'Removed 3 summary rows and reshaped the data from a cross-tab format')."},jsFunctionBody:{type:W.STRING,description:"The body of a JavaScript function that takes two arguments `data` (an array of objects) and `_util` (a helper object) and returns the transformed array of objects. This code will be executed to clean and reshape the data. If no transformation is needed, this should be null."},outputColumns:{type:W.ARRAY,description:"A list of column profiles describing the structure of the data AFTER the transformation. If no transformation is performed, this should be the same as the input column profiles.",items:lM}},required:["explanation","outputColumns"]},cM={type:W.OBJECT,properties:{explanation:{type:W.STRING,description:"A brief, user-facing explanation of the filter that was created from the natural language query."},jsFunctionBody:{type:W.STRING,description:"The body of a JavaScript function that takes 'data' and '_util' as arguments and returns a filtered array of objects. It should be a single line starting with 'return data.filter(...);'."}},required:["explanation","jsFunctionBody"]},dM={type:W.OBJECT,properties:{insight:{type:W.STRING,description:"A concise, user-facing message describing the single most important finding."},cardId:{type:W.STRING,description:"The ID of the card where this insight was observed."}},required:["insight","cardId"]},fM={type:W.OBJECT,properties:{chartType:{type:W.STRING,enum:["bar","line","pie","doughnut","scatter","combo"],description:"Type of chart to generate."},title:{type:W.STRING,description:"A concise title for the analysis."},description:{type:W.STRING,description:"A brief explanation of what the analysis shows."},aggregation:{type:W.STRING,enum:["sum","count","avg"],description:"The aggregation function to apply. Omit for scatter plots."},groupByColumn:{type:W.STRING,description:"The column to group data by (categorical). Omit for scatter plots."},valueColumn:{type:W.STRING,description:'The column for aggregation (numerical). Not needed for "count".'},xValueColumn:{type:W.STRING,description:"The column for the X-axis of a scatter plot (numerical). Required for scatter plots."},yValueColumn:{type:W.STRING,description:"The column for the Y-axis of a scatter plot (numerical). Required for scatter plots."},secondaryValueColumn:{type:W.STRING,description:"For combo charts, the secondary column for aggregation (numerical)."},secondaryAggregation:{type:W.STRING,enum:["sum","count","avg"],description:"For combo charts, the aggregation for the secondary value column."},defaultTopN:{type:W.INTEGER,description:"Optional. If the analysis has many categories, this suggests a default Top N view (e.g., 8)."},defaultHideOthers:{type:W.BOOLEAN,description:'Optional. If using defaultTopN, suggests whether to hide the "Others" category by default.'}},required:["chartType","title","description"]},hM={type:W.OBJECT,properties:{question:{type:W.STRING,description:"The clear, user-facing question to ask for clarification."},options:{type:W.ARRAY,items:{type:W.OBJECT,properties:{label:{type:W.STRING,description:"The user-friendly text for the option button."},value:{type:W.STRING,description:"The exact column name (case-sensitive) or literal value that should be assigned to the plan when this option is selected. Do not invent new names."}},required:["label","value"]}},pendingPlan:{type:W.OBJECT,description:"The partial analysis plan that is waiting for the user's input. It should contain all known parameters.",properties:{chartType:{type:W.STRING,enum:["bar","line","pie","doughnut","scatter","combo"]},title:{type:W.STRING},description:{type:W.STRING},aggregation:{type:W.STRING,enum:["sum","count","avg"]},groupByColumn:{type:W.STRING},valueColumn:{type:W.STRING},xValueColumn:{type:W.STRING},yValueColumn:{type:W.STRING},secondaryValueColumn:{type:W.STRING},secondaryAggregation:{type:W.STRING,enum:["sum","count","avg"]},defaultTopN:{type:W.INTEGER},defaultHideOthers:{type:W.BOOLEAN}}},targetProperty:{type:W.STRING,description:"The name of the property in the 'pendingPlan' that the user's selected value should be assigned to."}},required:["question","options","pendingPlan","targetProperty"]},mM={type:W.OBJECT,properties:{actions:{type:W.ARRAY,description:"A sequence of actions for the assistant to perform.",items:{type:W.OBJECT,properties:{thought:{type:W.STRING,description:"The AI's reasoning or thought process before performing the action. This explains *why* this action is being taken. This is a mandatory part of the ReAct pattern."},responseType:{type:W.STRING,enum:["text_response","plan_creation","dom_action","execute_js_code","proceed_to_analysis","filter_spreadsheet","clarification_request"]},text:{type:W.STRING,description:"A conversational text response to the user. Required for 'text_response'."},cardId:{type:W.STRING,description:"Optional. The ID of the card this text response refers to. Used to link text to a specific chart."},plan:{...fM,description:"Analysis plan object. Required for 'plan_creation'."},domAction:{type:W.OBJECT,description:"A DOM manipulation action for the frontend to execute. Required for 'dom_action'.",properties:{toolName:{type:W.STRING,enum:["highlightCard","changeCardChartType","showCardData","filterCard"]},args:{type:W.OBJECT,description:'Arguments for the tool. e.g., { cardId: "..." }',properties:{cardId:{type:W.STRING,description:"The ID of the target analysis card."},newType:{type:W.STRING,enum:["bar","line","pie","doughnut","scatter","combo"],description:"For 'changeCardChartType'."},visible:{type:W.BOOLEAN,description:"For 'showCardData'."},column:{type:W.STRING,description:"For 'filterCard', the column to filter on."},values:{type:W.ARRAY,items:{type:W.STRING},description:"For 'filterCard', the values to include."}},required:["cardId"]}},required:["toolName","args"]},code:{type:W.OBJECT,description:"For 'execute_js_code', the code to run.",properties:{explanation:{type:W.STRING,description:"A brief, user-facing explanation of what the code will do."},jsFunctionBody:{type:W.STRING,description:"The body of a JavaScript function that takes 'data' and returns the transformed 'data'."}},required:["explanation","jsFunctionBody"]},args:{type:W.OBJECT,description:"Arguments for other tools, like 'filter_spreadsheet'.",properties:{query:{type:W.STRING,description:"The natural language query to filter the spreadsheet by."}}},clarification:{...hM,description:"The clarification request object. Required for 'clarification_request'."}},required:["responseType","thought"]}}},required:["actions"]},ol={numberParsing:'- **CRITICAL RULE on NUMBER PARSING**: This is the most common source of errors. To handle numbers that might be formatted as strings (e.g., "$1,234.56", "50%"), you are provided with a safe utility function: `_util.parseNumber(value)`.\n    - **YOU MUST use `_util.parseNumber(value)` for ALL numeric conversions.**\n    - **DO NOT use `parseInt()`, `parseFloat()`, or `Number()` directly.** The provided utility is guaranteed to handle various formats correctly.',splitNumeric:"- **CRITICAL RULE on SPLITTING NUMERIC STRINGS**: If you encounter a single string field that contains multiple comma-separated numbers (which themselves may contain commas as thousand separators, e.g., \"1,234.50,5,678.00,-9,123.45\"), you are provided a utility `_util.splitNumericString(value)` to correctly split the string into an array of number strings.\n    - **YOU MUST use this utility for this specific case.**\n    - **DO NOT use a simple `string.split(',')`**, as this will incorrectly break up numbers.\n    - **Example**: To parse a field 'MonthlyValues' containing \"1,500.00,2,000.00\", your code should be: `const values = _util.splitNumericString(row.MonthlyValues);` This will correctly return `['1,500.00', '2,000.00']`.",dataVsSummaries:`- **Distinguishing Data from Summaries**: Your most critical task is to differentiate between valid data rows and non-data rows (like summaries or metadata).
    - A row is likely **valid data** if it has a value in its primary identifier column(s) (e.g., 'Account Code', 'Product ID') and in its metric columns.
    - **CRITICAL: Do not confuse hierarchical data with summary rows.** Look for patterns in identifier columns where one code is a prefix of another (e.g., '50' is a parent to '5010'). These hierarchical parent rows are **valid data** representing a higher level of aggregation and MUST be kept. Your role is to reshape the data, not to pre-summarize it by removing these levels.
    - A row is likely **non-data** and should be removed if it's explicitly a summary (e.g., contains 'Total', 'Subtotal' in a descriptive column) OR if it's metadata (e.g., the primary identifier column is empty but other columns contain text, like a section header).`},pM=(n,e,i)=>`
    You are an expert data engineer. Your task is to analyze a raw dataset and, if necessary, provide a JavaScript function to clean and reshape it into a tidy, analysis-ready format. CRITICALLY, you must also provide the schema of the NEW, transformed data with detailed data types.
    A tidy format has: 1. Each variable as a column. 2. Each observation as a row.
    
    Common problems to fix:
    ${ol.numberParsing}
    ${ol.splitNumeric}
    ${ol.dataVsSummaries}
    - **Crosstab/Wide Format**: Unpivot data where column headers are values (e.g., years, regions).
    - **Multi-header Rows**: Skip initial junk rows.

    Dataset Columns (Initial Schema):
    ${JSON.stringify(n,null,2)}
    Sample Data (up to 20 rows):
    ${JSON.stringify(e,null,2)}
    ${i?`On the previous attempt, your generated code failed with this error: "${i.message}". Please analyze the error and the data, then provide a corrected response.`:""}
    
    Your task:
    1.  **Analyze**: Look at the initial schema and sample data.
    2.  **Plan Transformation**: Decide if cleaning or reshaping is needed. If you identify date or time columns as strings, your function should attempt to parse them into a standard format (e.g., 'YYYY-MM-DD' for dates).
    3.  **Define Output Schema**: Determine the exact column names and types of the data AFTER your transformation. This is the MOST important step. Be as specific as possible with the types. Use 'categorical' for text labels, 'numerical' for general numbers, but you MUST identify and use the more specific types where they apply:
        - **'date'**: For columns containing dates (e.g., "2023-10-26", "10/26/2023").
        - **'time'**: For columns with time values (e.g., "14:30:00").
        - **'currency'**: For columns representing money, especially if they contain symbols like '$' or ','.
        - **'percentage'**: For columns with '%' symbols or values that are clearly percentages.
    4.  **Write Code**: If transformation is needed, write the body of a JavaScript function. This function receives two arguments, \`data\` and \`_util\`, and must return the transformed array of objects.
    5.  **Explain**: Provide a concise 'explanation' of what you did.

    **CRITICAL REQUIREMENTS:**
    - You MUST provide the \`outputColumns\` array. If you don't transform the data, \`outputColumns\` should be identical to the initial schema (but with more specific types if you identified them). If you do transform it, it must accurately reflect the new structure your code creates.
    - Your JavaScript code MUST include a \`return\` statement as its final operation.

    **Example: Reshaping and identifying types using the utility**
    - Initial Data: [{'Product': 'A', 'DateStr': 'Oct 26 2023', 'Revenue': '$1,500.00'}]
    - Explanation: "Standardized the date format and converted the revenue column to a number."
    - jsFunctionBody: "return data.map(row => ({ ...row, DateStr: new Date(row.DateStr).toISOString().split('T')[0], Revenue: _util.parseNumber(row.Revenue) }));"
    - outputColumns: [{'name': 'Product', 'type': 'categorical'}, {'name': 'DateStr', 'type': 'date'}, {'name': 'Revenue', 'type': 'currency'}]
`,gM=(n,e,i)=>`
    You are an expert data analyst. Your task is to convert a user's natural language query into a JavaScript filter function body for a dataset.
    
    **User Query:** "${n}"
    
    **Dataset Columns (Schema):**
    ${JSON.stringify(e,null,2)}
    
    **Sample Data (first 5 rows):**
    ${JSON.stringify(i,null,2)}
    
    **CRITICAL Rules for Code Generation:**
    ${ol.numberParsing}
    - When comparing strings, convert both the data and the comparison value to the same case (e.g., lower case) using \`.toLowerCase()\` to ensure case-insensitive matching.
    - For date comparisons, you can use \`new Date(row.date_column) > new Date('YYYY-MM-DD')\`.
    - The function you write will be the body of a new Function that receives 'data' (the full array of objects) and '_util'.
    - Your function body MUST start with \`return data.filter(row => ...);\`.
    
    **Your Task:**
    1.  **Analyze Query:** Understand the user's intent. Identify columns, values, and operators (e.g., >, <, =, contains).
    2.  **Write JS Code:** Write a single line of JavaScript that filters the data array.
    3.  **Explain:** Briefly explain the filter you created in plain language.
    
    **Example:**
    - User Query: "show me all rows where sales > 5000 and region is North America"
    - Columns: [{ name: 'sales', type: 'currency' }, { name: 'region', type: 'categorical' }]
    - Your Response (JSON):
    {
      "explanation": "Filtering for rows where 'sales' is greater than 5000 and 'region' is 'North America'.",
      "jsFunctionBody": "return data.filter(row => _util.parseNumber(row.sales) > 5000 && row.region.toLowerCase() === 'north america');"
    }
`,yM=(n,e,i,a)=>`
    You are a senior business intelligence analyst specializing in ERP and financial data. Your task is to generate a diverse list of insightful analysis plan candidates for a given dataset by identifying common data patterns.
    
    Dataset columns:
    - Categorical: ${n.join(", ")}
    - Numerical: ${e.join(", ")}
    Sample Data (first 5 rows):
    ${JSON.stringify(i,null,2)}
    
    Please generate up to ${a} diverse analysis plans.
    
    **CRITICAL: Think like a Business/ERP Analyst.**
    1.  **Identify Key Metrics**: First, find the columns that represent measurable values. Look for names like 'VALUE', 'AMOUNT', 'SALES', 'COST', 'QUANTITY', 'PRICE'. These are almost always the columns you should be aggregating (e.g., using 'sum' or 'avg').
    2.  **Identify Dimensions**: Next, find columns that describe the data. Look for names ending in 'CODE', 'ID', 'TYPE', 'CATEGORY', or containing 'NAME', 'DESCRIPTION', 'PROJECT', 'REGION'. These are your primary grouping columns (dimensions).
    3.  **Find Relationships**: Codes and descriptions often go together (e.g., 'PROJECT_CODE' and 'PROJECT_DESCRIPTION'). A very valuable analysis is to group by a description column (which is more human-readable for a chart) and sum a value column.
    4.  **Prioritize High-Value Aggregations**: Focus on creating plans that answer common business questions like 'What are our top revenue sources?', 'Where are the biggest costs?', or 'How are items distributed across categories?'. A simple 'count' is less valuable than a 'sum' of a 'VALUE' or 'AMOUNT' column.
    
    **Example Task**: Given columns ['CODE', 'DESCRIPTION', 'PROJECT_CODE', 'VALUE'], a HIGH-QUALITY plan would be:
    - Title: "Sum of VALUE by DESCRIPTION"
    - Aggregation: 'sum'
    - groupByColumn: 'DESCRIPTION'
    - valueColumn: 'VALUE'
    - Chart Type: 'bar'
    
    For each plan, choose the most appropriate chartType ('bar', 'line', 'pie', 'doughnut', 'scatter', 'combo'). 
    - Use 'line' for time series trends.
    - Use 'bar' for most categorical comparisons, especially for "top X" style reports.
    - Use 'pie' or 'doughnut' for compositions with few categories.
    - Use 'scatter' to show the relationship between two numerical variables.
    - **Use 'combo' (bar + line) to compare two different metrics against the same category (e.g., sum of 'Sales' as bars and average of 'Profit' as a line). You MUST provide both a primary and secondary value column and aggregation for combo charts.**
    
    Rules:
    - For 'scatter' plots, you MUST provide 'xValueColumn' and 'yValueColumn' (both numerical) and you MUST NOT provide 'aggregation' or 'groupByColumn'.
    - For 'combo' charts, you MUST provide 'groupByColumn', 'valueColumn', 'aggregation', 'secondaryValueColumn', and 'secondaryAggregation'.
    - **CRITICAL**: Only use one of the following aggregation types: 'sum', 'count', 'avg'. Do NOT use other statistical measures like 'stddev', 'variance', 'median', etc.
    - Do not create plans that are too granular (e.g., grouping by a unique ID column if there are thousands of them).
`,vM=n=>`
    You are a Quality Review Data Analyst. Your job is to review a list of proposed analysis plans and their data samples. Your goal is to select ONLY the most insightful and readable charts for the end-user, and configure them for the best default view.
    
    **Review Criteria & Rules:**
    1.  **Discard Low-Value Charts**: This is your most important task. You MUST discard any plan that is not genuinely insightful.
        - **Example of a low-value chart**: A bar chart where all values are nearly identical (e.g., [77, 77, 77, 76, 78]). This shows uniformity but is not a useful visualization. DISCARD IT.
        - **Example of another low-value chart**: A pie/doughnut chart where one category makes up over 95% of the total. This is not insightful. DISCARD IT.
    2.  **Discard Unreadable Charts**: If a chart groups by a high-cardinality column resulting in too many categories to be readable (e.g., more than 50 tiny bars), discard it unless it's a clear time-series line chart.
    3.  **Configure for Readability**: For good, insightful charts that have a moderate number of categories (e.g., 15 to 50), you MUST add default settings to make them readable. Set \`defaultTopN\` to 8 and \`defaultHideOthers\` to \`true\`.
    4.  **Keep Good Charts**: If a chart is insightful and has a reasonable number of categories (e.g., under 15), keep it as is without adding default settings.
    5.  **Return the Result**: Your final output must be an array of ONLY the good, configured plan objects. Do not include the discarded plans.
    
    **Proposed Plans and Data Samples:**
    ${JSON.stringify(n,null,2)}
`,_M=(n,e,i)=>{const a=i==="Mandarin"?`Provide a concise, insightful summary in two languages, separated by '---'.
Format: English Summary --- Mandarin Summary`:`Provide a concise, insightful summary in ${i}.`;return`
        You are a business intelligence analyst.
        The following data is for a chart titled "${n}".
        Data:
        ${JSON.stringify(e.slice(0,10),null,2)} 
        ${e.length>10?`(...and ${e.length-10} more rows)`:""}
        ${a}
        The summary should highlight key trends, outliers, or business implications. Do not just describe the data; interpret its meaning.
        For example, instead of "Region A has 500 sales", say "Region A is the top performer, contributing the majority of sales, which suggests a strong market presence there."
    `},SM=(n,e,i)=>`
    You are a senior data analyst. After performing an initial automated analysis of a dataset, your task is to create a concise "Core Analysis Briefing". This briefing will be shown to the user and will serve as the shared foundation of understanding for your conversation.
    Based on the columns and the analysis cards you have just generated, summarize the dataset's primary characteristics.
    Your briefing should cover:
    1.  **Primary Subject**: What is this data fundamentally about? (e.g., "This dataset appears to be about online sales transactions...")
    2.  **Key Metrics**: What are the most important numerical columns? (e.g., "...where the key metrics are 'Sale_Amount' and 'Profit'.")
    3.  **Core Dimensions**: What are the main categorical columns used for analysis? (e.g., "The data is primarily broken down by 'Region' and 'Product_Category'.")
    4.  **Suggested Focus**: Based on the initial charts, what should be the focus of further analysis? (e.g., "Future analysis should focus on identifying the most profitable regions and product categories.")
    
    **Available Information:**
    - **Dataset Columns**: ${JSON.stringify(e.map(a=>a.name))}
    - **Generated Analysis Cards**: ${JSON.stringify(n,null,2)}
    
    Produce a single, concise paragraph in ${i}. This is your initial assessment that you will share with your human counterpart.
`,TM=(n,e)=>`
    You are a proactive data analyst. Review the following summaries of data visualizations you have created. Your task is to identify the single most commercially significant or surprising insight. This could be a major trend, a key outlier, or a dominant category that has clear business implications.
    
    **Generated Analysis Cards & Data Samples:**
    ${JSON.stringify(n,null,2)}

    Your Task:
    1.  **Analyze**: Review all the cards provided.
    2.  **Identify**: Find the ONE most important finding. Don't list everything, just the top insight.
    3.  **Formulate**: Write a concise, user-facing message in ${e} that explains this insight (e.g., "I noticed that sales in August were unusually high, you might want to investigate what caused this spike.").
    4.  **Respond**: Return a JSON object containing this message and the ID of the card it relates to.
`,CM=(n,e)=>`
    You are a senior business strategist. You have been provided with several automated data analyses.
    Your task is to synthesize these individual findings into a single, high-level executive summary in ${e}.
    Here are the individual analysis summaries (they are in English):
    ${n}
    Please provide a concise, overarching summary that connects the dots between these analyses. 
    Identify the most critical business insights, potential opportunities, or risks revealed by the data as a whole.
    Do not just repeat the individual summaries. Create a new, synthesized narrative.
    Your response should be a single paragraph of insightful business analysis.
`,EM=(n,e,i,a,r,u,c,p,g)=>{const m=n.filter(T=>T.type==="categorical"||T.type==="date"||T.type==="time").map(T=>T.name),v=n.filter(T=>T.type==="numerical"||T.type==="currency"||T.type==="percentage").map(T=>T.name),_=e.slice(-10).map(T=>`${T.sender==="ai"?"You":"User"}: ${T.text}`).join(`
`);return`
        You are an expert data analyst and business strategist, required to operate using a Reason-Act (ReAct) framework. For every action you take, you must first explain your reasoning in the 'thought' field, and then define the action itself. Your goal is to respond to the user by providing insightful analysis and breaking down your response into a sequence of these thought-action pairs. Your final conversational responses should be in ${r}.
        
        **CORE ANALYSIS BRIEFING (Your Internal Summary):**
        ---
        ${u||"No core analysis has been performed yet."}
        ---
        **DATA PREPARATION LOG (How the raw data was initially cleaned):**
        ---
        ${g?`Explanation: ${g.explanation}
Code Executed: \`\`\`javascript
${g.jsFunctionBody}
\`\`\``:"No AI-driven data preparation was performed."}
        ---
        **LONG-TERM MEMORY (Relevant past context, ordered by relevance):**
        ---
        ${p.length>0?p.join(`
---
`):"No specific long-term memories seem relevant to this query."}
        ---
        **Your Knowledge Base (Real-time Info):**
        - **Dataset Columns**:
            - Categorical: ${m.join(", ")}
            - Numerical: ${v.join(", ")}
        - **Analysis Cards on Screen (Sample of up to 100 rows each)**:
            ${a.length>0?JSON.stringify(a,null,2):"No cards yet."}
        - **Raw Data Sample (first 20 rows):**
            ${c.length>0?JSON.stringify(c,null,2):"No raw data available."}

        **Recent Conversation (for flow):**
        ${_}

        **The user's latest message is:** "${i}"

        **Your Available Actions & Tools:**
        You MUST respond by creating a sequence of one or more actions in a JSON object.
        1.  **text_response**: For conversation. If your text explains a specific card, you MUST include its 'cardId'.
        2.  **plan_creation**: To create a NEW chart. Use a 'defaultTopN' of 8 for readability on high-cardinality columns.
        3.  **dom_action**: To INTERACT with an EXISTING card ('highlightCard', 'changeCardChartType', 'showCardData', 'filterCard').
        4.  **execute_js_code**: For PERMANENT data transformations (creating new columns, deleting rows). This action WILL modify the main dataset and cause ALL charts to regenerate. Use it for requests like "Remove all data from the USA".
        5.  **filter_spreadsheet**: For TEMPORARY, exploratory filtering of the Raw Data Explorer view. This action does NOT modify the main dataset and does NOT affect the analysis cards. Use it for requests like "show me record ORD1001" or "find all entries for Hannah".
        6.  **clarification_request**: To ask the user for more information when their request is ambiguous.
            - **Use Case**: The user says "show sales" but there are multiple sales-related columns ('Sales_USD', 'Sales_Units'). DO NOT GUESS. Ask for clarification.
            - **Auto-Resolve Rule**: If there is only ONE reasonable column/dimension that fits the request (e.g., the dataset only contains a single revenue column), you must confidently pick it yourself and continue without asking the user.
            - **Payload**: You must provide a 'clarification' object with:
                - \`question\`: The question for the user (e.g., "Which sales metric do you mean?").
                - \`options\`: Provide user-friendly \`label\` text, but the \`value\` MUST match a real column name exactly (including case/underscores) so the UI can plug it directly into the plan. Never invent or paraphrase column ids.
                - \`pendingPlan\`: The partial plan you have constructed so far. **You MUST fill out the other fields of the plan with your best guess.** For example, when asking about the \`valueColumn\`, you must still provide a sensible \`groupByColumn\`, \`aggregation\` (e.g., 'sum'), and \`chartType\` (e.g., 'bar'). The user is only clarifying one missing piece.
                - \`targetProperty\`: The name of the property in the plan that the user's choice will fill (e.g., "valueColumn").

        **Decision-Making Process (Observe  Think  Act):**
        - **OBSERVE**: Begin every response by explicitly noting what you see in the dataset, the existing cards, and the user's prompt. Observe before you plan. When creating a new plan, OBSERVE the relevant raw data sample (up to 20 rows) and any existing cards to understand context.
        - **THINK (Reason)**: After observing, reason about the user's request. What is their goal? Can it be answered from memory, or does it require new analysis? What is the first logical step? Formulate this reasoning and place it in the 'thought' field of your action. This field is MANDATORY for every action and must reference what you just observed.
        - **ACT**: Based on your thought, choose the most appropriate action from your toolset and define its parameters in the same action object.
        - **CRITICAL RULE ON AMBIGUITY**: If the user's request is ambiguous, you must either resolve it yourself (when there is only one reasonable interpretation) or use the \`clarification_request\` action. For example, if they ask to group by "category" and there is a "Product_Category" and a "Customer_Category" column, you must ask them to clarify which one they intend to use. But if there is only one "category" column, proceed without asking. When you do ask, ensure every option's \`value\` is an actual column name from the dataset (case-sensitive, including underscores).
        **Multi-Step Task Planning:** For complex requests that require multiple steps (e.g., "compare X and Y, then summarize"), you MUST adopt a planner persona.
        1.  **Formulate a Plan**: In the \`thought\` of your VERY FIRST action, outline your step-by-step plan. For example: \`thought: "Okay, this is a multi-step request. My plan is: 1. Isolate the data for X. 2. Create an analysis for X. 3. Isolate the data for Y. 4. Create an analysis for Y. 5. Summarize the findings from both analyses."\`
        2.  **Execute the Plan**: Decompose your plan into a sequence of \`actions\`. Each action should have its own \`thought\` explaining that specific step. This allows you to chain tools together to solve the problem.
        - **CRITICAL**: If the user asks where a specific data value comes from (like 'Software Product 10') or how the data was cleaned, you MUST consult the **DATA PREPARATION LOG**. Use a 'text_response' to explain the transformation in simple, non-technical language. You can include snippets of the code using markdown formatting to illustrate your point.
        - **Suggest Next Steps**: After successfully answering the user's request, you should add one final \`text_response\` action to proactively suggest a logical next step or a relevant follow-up question. This guides the user and makes the analysis more conversational. Example: "Now that we've seen the regional breakdown, would you like to explore the top-performing product categories within the East region?"
        - **EXAMPLE of Chaining**:
          1.  Action 1: { thought: "The user is asking for profit margin, but that column doesn't exist. I need to calculate it from 'Revenue' and 'Cost'.", responseType: 'execute_js_code', code: { ... } }
          2.  Action 2: { thought: "Now that I have the 'Profit Margin' column, I need to create a chart to find the product with the highest average margin.", responseType: 'plan_creation', plan: { ... } }
          3.  Action 3: { thought: "The chart is created. I can now see the result and answer the user's question, explaining what I did.", responseType: 'text_response', text: "I've calculated the profit margin and created a new chart. It looks like 'Product A' has the highest margin." }
        - Always be conversational. Use 'text_response' actions to acknowledge the user and explain what you are doing, especially after a complex series of actions.
    `},AM=async(n,e,i,a)=>{var u,c;let r;for(let p=0;p<3;p++){if((u=a==null?void 0:a.signal)!=null&&u.aborted)throw new DOMException("Aborted","AbortError");try{let g;const m=pM(n,e,r);if(i.provider==="openai"){if(!i.openAIApiKey)return{explanation:"No transformation needed as API key is not set.",jsFunctionBody:null,outputColumns:n};g=await Fn(i,[{role:"system",content:`You are an expert data engineer. Your task is to analyze a raw dataset and, if necessary, provide a JavaScript function to clean and reshape it into a tidy, analysis-ready format. CRITICALLY, you must also provide the schema of the NEW, transformed data with detailed data types.
You MUST respond with a single valid JSON object, and nothing else. The JSON object must adhere to the provided schema.`},{role:"user",content:m}],!0,a==null?void 0:a.signal)}else{if(!i.geminiApiKey)return{explanation:"No transformation needed as Gemini API key is not set.",jsFunctionBody:null,outputColumns:n};g=await zn(i,m,uM,a==null?void 0:a.signal)}const v=JSON.parse(g);if(v.jsFunctionBody)try{const _={parseNumber:w=>parseFloat(String(w).replace(/[$,%]/g,""))||0,splitNumericString:w=>w.split(",")},E=new Function("data","_util",v.jsFunctionBody)(e,_);if(!Array.isArray(E))throw new Error("Generated function did not return an array.");return v}catch(_){r=_,console.warn(`AI self-correction attempt ${p+1} failed due to JS execution error. Retrying...`,r);continue}return!v.jsFunctionBody&&(!v.outputColumns||v.outputColumns.length===0)&&(v.outputColumns=n),v}catch(g){if((c=a==null?void 0:a.signal)!=null&&c.aborted)throw g;console.error(`Error in data preparation plan generation (Attempt ${p+1}):`,g),r=g}}throw new Error(`AI failed to generate a valid data preparation plan after multiple attempts. Last error: ${r==null?void 0:r.message}`)},xM=new Set(["sum","count","avg"]),xS=n=>{if(!n||typeof n!="object"||!n.chartType||!n.title)return console.warn("Skipping invalid plan: missing chartType or title.",n),!1;if(n.chartType==="scatter"){if(!n.xValueColumn||!n.yValueColumn)return console.warn("Skipping invalid scatter plot plan: missing xValueColumn or yValueColumn.",n),!1}else{if(!n.aggregation||!n.groupByColumn)return console.warn(`Skipping invalid plan: missing aggregation or groupByColumn for chart type ${n.chartType}.`,n),!1;if(!xM.has(n.aggregation))return console.warn(`Skipping invalid plan: unsupported aggregation type "${n.aggregation}".`,n),!1;if(n.aggregation!=="count"&&!n.valueColumn)return console.warn("Skipping invalid plan: missing valueColumn for sum/avg aggregation.",n),!1}return!0},dv=async(n,e,i,a,r)=>{const u=n.filter(m=>m.type==="categorical"||m.type==="date"||m.type==="time").map(m=>m.name),c=n.filter(m=>m.type==="numerical"||m.type==="currency"||m.type==="percentage").map(m=>m.name);let p;const g=yM(u,c,e,a);if(i.provider==="openai"){const _=await Fn(i,[{role:"system",content:`You are a senior business intelligence analyst specializing in ERP and financial data. Your task is to generate a diverse list of insightful analysis plan candidates for a given dataset by identifying common data patterns.
You MUST respond with a single valid JSON object with a single key "plans" that contains an array of plan objects, and nothing else. The JSON object must adhere to the provided schema.`},{role:"user",content:g}],!0,r);p=gl(_)}else{const m=await zn(i,g,AS,r);p=gl(m)}return p.filter(xS)},bM=async(n,e,i)=>{let a;const r=vM(n);if(e.provider==="openai"){const g=await Fn(e,[{role:"system",content:`You are a Quality Review Data Analyst. Your job is to review a list of proposed analysis plans and their data samples. Your goal is to select ONLY the most insightful and readable charts for the end-user, and configure them for the best default view.
You MUST respond with a single valid JSON object with a single key "plans" that contains an array of ONLY the good, configured plan objects. Do not include the discarded plans. The JSON object must adhere to the provided schema.`},{role:"user",content:r}],!0,i);a=gl(g)}else{const c=await zn(e,r,AS,i);a=gl(c)}return a.map(c=>c&&c.plan&&typeof c.plan=="object"?c.plan:c).filter(xS)},wM=async(n,e,i,a)=>{if(!(i.provider==="google"&&!!i.geminiApiKey||i.provider==="openai"&&!!i.openAIApiKey))throw new Error("API Key not provided.");try{const u=await dv(n,e,i,12,a==null?void 0:a.signal);if(u.length===0)return[];const c={fileName:"sample",data:e},p=u.map(v=>{try{const _=Iv(c,v);return _.length>0?{plan:v,aggregatedSample:_.slice(0,20)}:null}catch(_){return console.warn(`Execution of plan "${v.title}" failed during review stage:`,_),null}}).filter(v=>v!==null);if(p.length===0)return console.warn("No candidate plans produced data for AI review, returning initial valid candidates."),u.slice(0,4);let m=await bM(p,i,a==null?void 0:a.signal);if(m.length<4&&u.length>m.length){const v=new Set(m.map(E=>E.title)),_=u.filter(E=>!v.has(E.title)),T=4-m.length;m.push(..._.slice(0,T))}return m.slice(0,12)}catch(u){console.error("Error during two-step analysis plan generation:",u);try{return await dv(n,e,i,8,a==null?void 0:a.signal)}catch(c){throw console.error("Fallback plan generation also failed:",c),new Error("Failed to generate any analysis plans from AI.")}}},RM=async(n,e,i,a,r,u,c,p,g,m,v)=>{if(!(r.provider==="google"&&!!r.geminiApiKey||r.provider==="openai"&&!!r.openAIApiKey))return{actions:[{responseType:"text_response",text:"Cloud AI is disabled. API Key not provided.",thought:"API key is missing, so I must inform the user."}]};try{let T;const E=EM(n,e,i,a,r.language,u,p,g,m);if(r.provider==="openai"){const N=[{role:"system",content:`You are an expert data analyst and business strategist, required to operate using a Reason-Act (ReAct) framework. For every action you take, you must first explain your reasoning in the 'thought' field, and then define the action itself. Your goal is to respond to the user by providing insightful analysis and breaking down your response into a sequence of these thought-action pairs. Your final conversational responses should be in ${r.language}.
Your output MUST be a single JSON object with an "actions" key containing an array of action objects.`},{role:"user",content:E}];T=await Fn(r,N,!0,v==null?void 0:v.signal)}else T=await zn(r,E,mM,v==null?void 0:v.signal);const w=JSON.parse(T);if(!w.actions||!Array.isArray(w.actions))throw new Error("Invalid response structure from AI: 'actions' array not found.");return w}catch(T){throw console.error("Error generating chat response:",T),new Error(`Failed to get a valid response from the AI. ${T instanceof Error?T.message:""}`)}},NM=async(n,e,i,a,r)=>{var c,p;let u;for(let g=0;g<2;g++){if((c=r==null?void 0:r.signal)!=null&&c.aborted)throw new DOMException("Aborted","AbortError");try{let m;const v=gM(n,e,i);a.provider==="openai"?m=await Fn(a,[{role:"system",content:"You are an expert data analyst. Your task is to convert a user's natural language query into a JavaScript filter function body for a dataset. You MUST respond with a single valid JSON object, and nothing else. The JSON object must adhere to the provided schema."},{role:"user",content:v}],!0,r==null?void 0:r.signal):m=await zn(a,v,cM,r==null?void 0:r.signal);const _=JSON.parse(m);if(_.jsFunctionBody&&_.explanation)return _;throw new Error("AI response was missing required fields 'jsFunctionBody' or 'explanation'.")}catch(m){if((p=r==null?void 0:r.signal)!=null&&p.aborted)throw m;console.error(`Error in filter function generation (Attempt ${g+1}):`,m),u=m}}throw new Error(`AI failed to generate a valid filter function. Last error: ${u==null?void 0:u.message}`)},MM=async(n,e,i,a)=>{if(!(i.provider==="google"&&!!i.geminiApiKey||i.provider==="openai"&&!!i.openAIApiKey))return"AI Summaries are disabled. No API Key provided.";try{const u=_M(n,e,i.language);return i.provider==="openai"?await Fn(i,[{role:"system",content:'You are a business intelligence analyst. Your response must be only the summary text in the specified format. The summary should highlight key trends, outliers, or business implications. Do not just describe the data; interpret its meaning. For example, instead of "Region A has 500 sales", say "Region A is the top performer, contributing the majority of sales, which suggests a strong market presence there."'},{role:"user",content:u}],!1,a==null?void 0:a.signal)||"No summary generated.":await zn(i,u,void 0,a==null?void 0:a.signal)}catch(u){return console.error("Error generating summary:",u),"Failed to generate AI summary."}},IM=async(n,e,i,a)=>{if(!(i.provider==="google"&&!!i.geminiApiKey||i.provider==="openai"&&!!i.openAIApiKey)||n.length===0)return"Could not generate an initial analysis summary.";try{const u=SM(n,e,i.language);if(i.provider==="openai"){const p=[{role:"system",content:`You are a senior data analyst. After performing an initial automated analysis of a dataset, your task is to create a concise "Core Analysis Briefing". This briefing will be shown to the user and will serve as the shared foundation of understanding for your conversation.
Your briefing should cover:
1.  **Primary Subject**: What is this data fundamentally about? (e.g., "This dataset appears to be about online sales transactions...")
2.  **Key Metrics**: What are the most important numerical columns? (e.g., "...where the key metrics are 'Sale_Amount' and 'Profit'.")
3.  **Core Dimensions**: What are the main categorical columns used for analysis? (e.g., "The data is primarily broken down by 'Region' and 'Product_Category'.")
4.  **Suggested Focus**: Based on the initial charts, what should be the focus of further analysis? (e.g., "Future analysis should focus on identifying the most profitable regions and product categories.")
Produce a single, concise paragraph in ${i.language}. This is your initial assessment that you will share with your human counterpart.`},{role:"user",content:u}];return await Fn(i,p,!1,a==null?void 0:a.signal)||"No summary generated."}else return await zn(i,u,void 0,a==null?void 0:a.signal)}catch(u){return console.error("Error generating core analysis summary:",u),"An error occurred while the AI was forming its initial analysis."}},DM=async(n,e,i)=>{if(!(e.provider==="google"&&!!e.geminiApiKey||e.provider==="openai"&&!!e.openAIApiKey)||n.length===0)return null;try{let r;const u=TM(n,e.language);return e.provider==="openai"?r=await Fn(e,[{role:"system",content:"You are a proactive data analyst. Review the following summaries of data visualizations. Your task is to identify the single most commercially significant or surprising insight. This could be a major trend, a key outlier, or a dominant category that has clear business implications. Your response must be a single JSON object with 'insight' and 'cardId' keys."},{role:"user",content:u}],!0,i==null?void 0:i.signal):r=await zn(e,u,dM,i==null?void 0:i.signal),JSON.parse(r)}catch(r){return console.error("Error generating proactive insight:",r),null}},fv=async(n,e,i)=>{if(!(e.provider==="google"&&!!e.geminiApiKey||e.provider==="openai"&&!!e.openAIApiKey))return"AI Summaries are disabled. No API Key provided.";const r=n.map(u=>{const c=u.summary.split("---")[0];return`Chart Title: ${u.plan.title}
Summary: ${c}`}).join(`

`);try{const u=CM(r,e.language);if(e.provider==="openai"){const p=[{role:"system",content:`You are a senior business strategist. You have been provided with several automated data analyses.
Your task is to synthesize these individual findings into a single, high-level executive summary in ${e.language}.
Please provide a concise, overarching summary that connects the dots between these analyses. 
Identify the most critical business insights, potential opportunities, or risks revealed by the data as a whole.
Do not just repeat the individual summaries. Create a new, synthesized narrative.
Your response should be a single paragraph of insightful business analysis.`},{role:"user",content:u}];return await Fn(e,p,!1,i==null?void 0:i.signal)||"No final summary generated."}else return await zn(e,u,void 0,i==null?void 0:i.signal)}catch(u){return console.error("Error generating final summary:",u),"Failed to generate the final AI summary."}},Zd=(n,e)=>e.some(i=>n instanceof i);let hv,mv;function PM(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UM(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wd=new WeakMap,Ed=new WeakMap,kl=new WeakMap;function LM(n){const e=new Promise((i,a)=>{const r=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{i($i(n.result)),r()},c=()=>{a(n.error),r()};n.addEventListener("success",u),n.addEventListener("error",c)});return kl.set(e,n),e}function kM(n){if(Wd.has(n))return;const e=new Promise((i,a)=>{const r=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{i(),r()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});Wd.set(n,e)}let jd={get(n,e,i){if(n instanceof IDBTransaction){if(e==="done")return Wd.get(n);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return $i(n[e])},set(n,e,i){return n[e]=i,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bS(n){jd=n(jd)}function qM(n){return UM().includes(n)?function(...e){return n.apply(ef(this),e),$i(this.request)}:function(...e){return $i(n.apply(ef(this),e))}}function BM(n){return typeof n=="function"?qM(n):(n instanceof IDBTransaction&&kM(n),Zd(n,PM())?new Proxy(n,jd):n)}function $i(n){if(n instanceof IDBRequest)return LM(n);if(Ed.has(n))return Ed.get(n);const e=BM(n);return e!==n&&(Ed.set(n,e),kl.set(e,n)),e}const ef=n=>kl.get(n);function VM(n,e,{blocked:i,upgrade:a,blocking:r,terminated:u}={}){const c=indexedDB.open(n,e),p=$i(c);return a&&c.addEventListener("upgradeneeded",g=>{a($i(c.result),g.oldVersion,g.newVersion,$i(c.transaction),g)}),i&&c.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}const OM=["get","getKey","getAll","getAllKeys","count"],HM=["put","add","delete","clear"],Ad=new Map;function pv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,r=HM.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(r||OM.includes(i)))return;const u=async function(c,...p){const g=this.transaction(c,r?"readwrite":"readonly");let m=g.store;return a&&(m=m.index(p.shift())),(await Promise.all([m[i](...p),r&&g.done]))[0]};return Ad.set(e,u),u}bS(n=>({...n,get:(e,i,a)=>pv(e,i)||n.get(e,i,a),has:(e,i)=>!!pv(e,i)||n.has(e,i)}));const GM=["continue","continuePrimaryKey","advance"],gv={},tf=new WeakMap,wS=new WeakMap,FM={get(n,e){if(!GM.includes(e))return n[e];let i=gv[e];return i||(i=gv[e]=function(...a){tf.set(this,wS.get(this)[e](...a))}),i}};async function*zM(...n){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...n)),!e)return;e=e;const i=new Proxy(e,FM);for(wS.set(i,e),kl.set(i,ef(e));e;)yield i,e=await(tf.get(i)||e.continue()),tf.delete(i)}function yv(n,e){return e===Symbol.asyncIterator&&Zd(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Zd(n,[IDBIndex,IDBObjectStore])}bS(n=>({...n,get(e,i,a){return yv(e,i)?zM:n.get(e,i,a)},has(e,i){return yv(e,i)||n.has(e,i)}}));const RS="csv-ai-assistant-db",YM=3,Ki="reports",NS="csv-ai-assistant-settings",Ti="current_session";let xd=null;const JM=()=>new Promise((n,e)=>{const i=indexedDB.deleteDatabase(RS);i.onsuccess=()=>n(),i.onerror=()=>e(i.error),i.onblocked=()=>{console.warn("IndexedDB delete is blocked. Close other tabs to complete reset.")}}),vv=()=>VM(RS,YM,{upgrade(n,e){if(!n.objectStoreNames.contains(Ki)){n.createObjectStore(Ki,{keyPath:"id"}).createIndex("updatedAt","updatedAt");return}const i=n.transaction.objectStore(Ki);e<2&&!i.indexNames.contains("updatedAt")&&i.createIndex("updatedAt","updatedAt")}}),ql=()=>(xd||(xd=vv().catch(async n=>{if(n instanceof DOMException&&n.name==="VersionError")return console.warn("IndexedDB version mismatch detected. Resetting local database...",n),await JM(),vv();throw n})),xd),nf=async n=>{try{await(await ql()).put(Ki,n)}catch(e){console.error("Failed to save report to IndexedDB:",e)}},ro=async n=>{try{return await(await ql()).get(Ki,n)}catch(e){console.error("Failed to get report from IndexedDB:",e);return}},$M=async()=>{try{return(await(await ql()).getAllFromIndex(Ki,"updatedAt")).sort((i,a)=>a.updatedAt.getTime()-i.updatedAt.getTime()).map(({id:i,filename:a,createdAt:r,updatedAt:u})=>({id:i,filename:a,createdAt:r,updatedAt:u}))}catch(n){return console.error("Failed to get reports list from IndexedDB:",n),[]}},bd=async n=>{try{await(await ql()).delete(Ki,n)}catch(e){console.error("Failed to delete report from IndexedDB:",e)}},_v={provider:"google",geminiApiKey:"",openAIApiKey:"",model:"gemini-2.5-pro",language:"English"},KM=n=>{try{localStorage.setItem(NS,JSON.stringify(n))}catch(e){console.error("Failed to save settings to localStorage:",e)}},Sv=()=>{try{const n=localStorage.getItem(NS);if(n){const e=JSON.parse(n);return e.apiKey&&delete e.apiKey,{..._v,...e}}}catch(n){console.error("Failed to get settings from localStorage:",n)}return _v};let wd=null;const XM=async()=>(wd||(wd=(async()=>{const n="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.1/dist/transformers.min.js";try{return await import(n)}catch(e){throw console.error("Failed to load @xenova/transformers from CDN.",e),e}})()),wd);class Js{constructor(){this.embedder=null,this.documents=[],this.isInitializing=!1,this.isInitialized=!1}static getInstance(){return Js.instance||(Js.instance=new Js),Js.instance}getIsInitialized(){return this.isInitialized}async init(e){if(!(this.isInitialized||this.isInitializing))try{this.isInitializing=!0;const{pipeline:i,env:a}=await XM();a.allowRemoteModels=!0,a.allowLocalModels=!1,a.localModelPath="",e==null||e("Downloading AI memory model (~34MB)..."),this.embedder=await i("feature-extraction","Xenova/all-MiniLM-L6-v2",{progress_callback:r=>{if(r.status==="progress"&&r.total>0){const u=(r.loaded/1024/1024).toFixed(2),c=(r.total/1024/1024).toFixed(2);e==null||e(`Downloading AI memory model: ${u}MB / ${c}MB`)}}}),e==null||e("AI memory model loaded."),this.isInitialized=!0}catch(i){console.error("Failed to initialize vector store:",i),e==null||e(`Error loading AI memory model: ${i instanceof Error?i.message:String(i)}`),this.isInitialized=!1}finally{this.isInitializing=!1}}rehydrate(e){this.documents=e}async addDocument(e){if(!this.embedder){console.warn("Vector store not initialized. Skipping document add/update.");return}try{const i=await this.embedder(e.text,{pooling:"mean",normalize:!0}),a={...e,embedding:Array.from(i.data)},r=this.documents.findIndex(u=>u.id===e.id);r>-1?this.documents[r]=a:this.documents.push(a)}catch(i){console.error(`Failed to create embedding for document ${e.id}:`,i)}}deleteDocument(e){const i=this.documents.length;return this.documents=this.documents.filter(a=>a.id!==e),this.documents.length<i}getDocumentCount(){return this.documents.length}getDocuments(){return[...this.documents]}clear(){this.documents=[]}async withAbort(e,i){if(!i)return e;if(i.aborted)throw new DOMException("Aborted","AbortError");return new Promise((a,r)=>{const u=()=>{i.removeEventListener("abort",u),r(new DOMException("Aborted","AbortError"))};i.addEventListener("abort",u),e.then(c=>{i.removeEventListener("abort",u),a(c)},c=>{i.removeEventListener("abort",u),r(c)})})}async search(e,i=5,a){if(!this.embedder||this.documents.length===0)return[];try{const r=await this.withAbort(this.embedder(e,{pooling:"mean",normalize:!0}),a==null?void 0:a.signal),u=Array.from(r.data);return this.documents.map(p=>{const g=this.cosineSimilarity(u,p.embedding);return{text:p.text,score:g}}).filter(p=>p.score>.5).sort((p,g)=>g.score-p.score).slice(0,i)}catch(r){return console.error("Failed to perform vector search:",r),[]}}cosineSimilarity(e,i){let a=0,r=0,u=0;for(let c=0;c<e.length;c++)a+=e[c]*i[c],r+=e[c]*e[c],u+=i[c]*i[c];return r===0||u===0?0:a/(Math.sqrt(r)*Math.sqrt(u))}}const Et=Js.getInstance(),yl=["groupByColumn","valueColumn","xValueColumn","yValueColumn","secondaryValueColumn"],Tv=n=>n.toLowerCase().replace(/[_-]+/g," ").replace(/[^a-z0-9 ]/g," ").replace(/\s+/g," ").trim(),vl=(n,e,i=1,a=1/0)=>{if(!e||e.length===0)return!1;const r=e.map(c=>c[n]).filter(c=>c!=null&&String(c).trim()!=="");if(r.length===0)return!1;const u=new Set(r.map(c=>String(c))).size;return u>=i&&u<=a},QM=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`clar-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,Cv=()=>`run-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,ZM=()=>`toast-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,WM=n=>{var e;return((e=n.find(i=>i.status==="pending"))==null?void 0:e.id)??null},MS=(n,e,i)=>{if(!yl.includes(e))return n.value;const a=i.find(c=>c===n.value);if(a)return a;const r=i.find(c=>c.toLowerCase()===n.value.toLowerCase());if(r)return r;const u=Tv(n.label);return i.find(c=>u.includes(Tv(c)))},jM=(n,e,i)=>{if(!yl.includes(n.targetProperty)||!e||e.length===0)return n;const a=n.options.map(r=>{const u=MS(r,n.targetProperty,i);if(!u)return null;if(n.targetProperty==="groupByColumn"){if(!vl(u,e,2,50))return null}else if(!vl(u,e))return null;return{...r,value:u}}).filter(r=>r!==null);return a.length===0?null:{...n,options:a}},Ev=(n,e)=>{if(!n)return null;const i=e.find(a=>a.name===n);return i?i.name:n},eI=(n,e)=>{const i=Ev(n.valueColumn,e)||(n.aggregation==="count"?"Records":"Value"),a=Ev(n.groupByColumn,e)||(n.chartType==="scatter"?"X Axis":"Category"),r={"[metric]":i,"[value]":i,"[dimension]":a,"[group]":a},u=m=>{if(!m)return!1;const v=m.replace(/\s+/g,"");return/(.{3,20})\1{3,}/i.test(v)},c=(m,v)=>{if(!m||m.trim()==="")return v;let _=m;for(const T of Object.keys(r)){const E=new RegExp(T,"gi");_=_.replace(E,r[T])}return/\[.*\]/.test(_)||_.length>150||u(_)?v:_.trim()},p=`${i} by ${a}`,g=`A chart showing ${i} grouped by ${a}.`;return{...n,title:c(n.title,p),description:c(n.description,g)}},Rd=320,tI=800,nI=600,Qr={currentView:"file_upload",isBusy:!1,busyMessage:null,canCancelBusy:!1,progressMessages:[],csvData:null,columnProfiles:[],analysisCards:[],chatHistory:[],finalSummary:null,aiCoreAnalysisSummary:null,dataPreparationPlan:null,initialDataSample:null,vectorStoreDocuments:[],spreadsheetFilterFunction:null,aiFilterExplanation:null,pendingClarifications:[],activeClarificationId:null,toasts:[]},We=OE((n,e)=>{const i=c=>{const p={...c,id:QM(),status:"pending"};return n(g=>({pendingClarifications:[...g.pendingClarifications,p],activeClarificationId:p.id})),p},a=(c,p)=>{e().pendingClarifications.some(m=>m.id===c)&&n(m=>{const v=m.pendingClarifications.map(T=>T.id===c?{...T,status:p}:T),_=p==="pending"||p==="resolving"?c:WM(v);return{pendingClarifications:v,activeClarificationId:_}})},r=c=>{var p;return c?(p=e().createAbortController(c))==null?void 0:p.signal:void 0},u=async(c,p,g)=>{if(g&&e().isRunCancellationRequested(g))return[];const m=c.title??"your requested chart",v={sender:"ai",text:`Okay, creating a chart for "${m}".`,timestamp:new Date,type:"ai_plan_start"};n(T=>({chatHistory:[...T.chatHistory,v]}));const _=await e().runAnalysisPipeline([c],p,{isChatRequest:!0,runId:g});if(_.length>0){const T=_[0].summary.split("---")[0].trim(),E={sender:"ai",text:`Created the chart for "${m}". Here's what I observed:
${T}`,timestamp:new Date,type:"ai_message",cardId:_[0].id};n(w=>({chatHistory:[...w.chatHistory,E]}))}return _};return{...Qr,busyRunId:null,isCancellationRequested:!1,aiFilterRunId:null,abortControllers:{},isAsideVisible:!0,asideWidth:window.innerWidth/4>Rd?window.innerWidth/4:Rd,isSpreadsheetVisible:!0,isDataPrepDebugVisible:!1,isSettingsModalOpen:!1,isHistoryPanelOpen:!1,isMemoryPanelOpen:!1,isAiFiltering:!1,settings:Sv(),reportsList:[],isResizing:!1,isApiKeySet:(()=>{const c=Sv();return c.provider==="google"?!!c.geminiApiKey:!!c.openAIApiKey})(),beginBusy:(c,p)=>{const g=Cv();return n({isBusy:!0,busyMessage:c,canCancelBusy:!!(p!=null&&p.cancellable),busyRunId:g,isCancellationRequested:!1}),g},updateBusyStatus:c=>{e().isBusy&&n({busyMessage:c})},endBusy:c=>{const p=e().busyRunId;if(c&&p&&p!==c)return;n({isBusy:!1,busyMessage:null,canCancelBusy:!1,busyRunId:null,isCancellationRequested:!1});const g=c??p;g&&e().clearRunControllers(g)},requestBusyCancel:()=>{if(!e().busyRunId||e().isCancellationRequested)return;n({isCancellationRequested:!0,canCancelBusy:!1}),e().addProgress("Cancelling current request...");const c=e().busyRunId;c&&e().abortRunControllers(c)},isBusyRunActive:c=>e().busyRunId===c,isRunCancellationRequested:c=>e().isCancellationRequested&&e().busyRunId===c,createAbortController:c=>{if(!c)return null;const p=new AbortController;return n(g=>({abortControllers:{...g.abortControllers,[c]:[...g.abortControllers[c]??[],p]}})),p},abortRunControllers:c=>{n(p=>{const g=p.abortControllers[c];if(g==null||g.forEach(v=>{v.signal.aborted||v.abort()}),!g)return{};const m={...p.abortControllers};return delete m[c],{abortControllers:m}})},clearRunControllers:c=>{n(p=>{if(!p.abortControllers[c])return{};const g={...p.abortControllers};return delete g[c],{abortControllers:g}})},addToast:(c,p="info",g=4e3)=>{const m=ZM();return n(v=>({toasts:[...v.toasts,{id:m,message:c,type:p}]})),g>0&&setTimeout(()=>{e().dismissToast(m)},g),m},dismissToast:c=>{n(p=>({toasts:p.toasts.filter(g=>g.id!==c)}))},init:async()=>{const c=await ro(Ti);c&&(n({...Qr,...c.appState,isBusy:!1,busyMessage:null,canCancelBusy:!1,busyRunId:null,isCancellationRequested:!1,aiFilterRunId:null,abortControllers:{},toasts:[],currentView:c.appState.csvData?"analysis_dashboard":"file_upload",pendingClarifications:c.appState.pendingClarifications??[],activeClarificationId:c.appState.activeClarificationId??null}),c.appState.vectorStoreDocuments&&Et.getIsInitialized()&&(Et.rehydrate(c.appState.vectorStoreDocuments),e().addProgress("Restored AI long-term memory from last session."))),await e().loadReportsList()},addProgress:(c,p="system")=>{const g={text:c,type:p,timestamp:new Date};n(m=>({progressMessages:[...m.progressMessages,g]}))},loadReportsList:async()=>{const c=await $M();n({reportsList:c})},handleSaveSettings:c=>{KM(c);const p=c.provider==="google"?!!c.geminiApiKey:!!c.openAIApiKey;n({settings:c,isApiKeySet:p})},handleAsideMouseDown:c=>{c.preventDefault(),e().setIsResizing(!0);const p=m=>{const v=window.innerWidth-nI;let _=window.innerWidth-m.clientX;_=Math.max(Rd,_),_=Math.min(tI,_,v),e().setAsideWidth(_)},g=()=>{e().setIsResizing(!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",g)},runAnalysisPipeline:async(c,p,g={})=>{const{isChatRequest:m=!1,runId:v}=g,_=e().addProgress,T=e().settings,E=()=>v?e().isRunCancellationRequested(v):!1,w=()=>r(v);let x=!0;const N=async D=>{if(E())return null;try{_(`Executing plan: ${D.title}...`),v&&e().updateBusyStatus(`Executing "${D.title}"...`);const U=Iv(p,D);if(U.length===0)return _(`Skipping "${D.title}" due to empty result.`,"error"),null;if(E())return null;_(`AI is summarizing: ${D.title}...`),v&&e().updateBusyStatus(`Summarizing "${D.title}"...`);const L=await MM(D.title,U,T,{signal:w()});if(E())return null;const G=U.length,F=D.chartType!=="scatter"&&G>15,I={id:`card-${Date.now()}-${Math.random()}`,plan:D,aggregatedData:U,summary:L,displayChartType:D.chartType,isDataVisible:!1,topN:F?8:D.defaultTopN||null,hideOthers:F?!0:D.defaultHideOthers||!1,disableAnimation:m||!x||e().analysisCards.length>0,hiddenLabels:[]};n(z=>({analysisCards:[...z.analysisCards,I]}));const Q=`[Chart: ${D.title}] Description: ${D.description}. AI Summary: ${L.split("---")[0]}`;return await Et.addDocument({id:I.id,text:Q}),_(`View #${I.id.slice(-6)} indexed for long-term memory.`),x=!1,_(`Saved as View #${I.id.slice(-6)}`),I}catch(U){if(E())return _(`Cancelled "${D.title}" before completion.`),null;console.error("Error executing plan:",D.title,U);const L=U instanceof Error?U.message:String(U);return _(`Error executing plan "${D.title}": ${L}`,"error"),null}},k=(await Promise.all(c.map(N))).filter(D=>D!==null);if(!m&&k.length>0&&!E()){_("AI is forming its core understanding of the data..."),v&&e().updateBusyStatus("Forming core understanding...");const D=k.map(I=>({id:I.id,title:I.plan.title,aggregatedDataSample:I.aggregatedData.slice(0,10)})),U=await IM(D,e().columnProfiles,T,{signal:w()});if(E())return k;const L={sender:"ai",text:U,timestamp:new Date,type:"ai_thinking"};if(n(I=>({aiCoreAnalysisSummary:U,chatHistory:[...I.chatHistory,L]})),_("Indexing core analysis for long-term memory..."),await Et.addDocument({id:"core-summary",text:`Core Analysis Summary: ${U}`}),_("Core analysis indexed."),E())return k;_("AI is looking for key insights..."),v&&e().updateBusyStatus("Looking for key insights...");const G=await DM(D,T,{signal:w()});if(E())return k;if(G){const I={sender:"ai",text:G.insight,timestamp:new Date,type:"ai_proactive_insight",cardId:G.cardId};n(Q=>({chatHistory:[...Q.chatHistory,I]})),_(`AI proactively identified an insight in View #${G.cardId.slice(-6)}.`)}if(E())return k;const F=await fv(k,T,{signal:w()});if(E())return k;n({finalSummary:F}),_("Overall summary generated.")}return k},handleInitialAnalysis:async(c,p={})=>{if(!c)return;const{runId:g}=p,m=g??e().beginBusy("Running analysis...",{cancellable:!0});e().addProgress("Starting main analysis...");try{e().addProgress("AI is generating analysis plans..."),e().updateBusyStatus("Drafting analysis plans...");const v=await wM(e().columnProfiles,c.data.slice(0,5),e().settings,{signal:r(m)});if(m&&e().isRunCancellationRequested(m)){e().addProgress("Analysis cancelled before execution.");return}e().addProgress(`AI proposed ${v.length} plans.`),v.length>0?await e().runAnalysisPipeline(v,c,{runId:m}):e().addProgress("AI did not propose any analysis plans.","error")}catch(v){if(!(m&&e().isRunCancellationRequested(m))){console.error("Analysis pipeline error:",v);const _=v instanceof Error?v.message:String(v);e().addProgress(`Error during analysis: ${_}`,"error")}}finally{g||e().endBusy(m),m&&e().isRunCancellationRequested(m)?e().addProgress("Stopped current analysis."):e().addProgress("Analysis complete. Ready for chat.")}},handleFileUpload:async c=>{const p=e();if(p.csvData&&p.csvData.data.length>0){const m=await ro(Ti);if(m){const v=`report-${m.createdAt.getTime()}`,_={...m,id:v,updatedAt:new Date};await nf(_)}}Et.clear(),await bd(Ti),await e().loadReportsList(),n({...Qr,csvData:{fileName:c.name,data:[]},busyRunId:null,isCancellationRequested:!1,aiFilterRunId:null,abortControllers:{},toasts:[]});const g=e().beginBusy(`Processing ${c.name}...`,{cancellable:!0});try{e().updateBusyStatus("Parsing CSV file...");const m=await AE(c);if(e().addProgress(`Parsed ${m.data.length} rows.`),e().isRunCancellationRequested(g)){e().addProgress("Upload cancelled before analysis.");return}n({initialDataSample:m.data.slice(0,20)});let v=m,_,T=null;if(e().isApiKeySet){e().updateBusyStatus("Initializing AI memory..."),await Et.init(e().addProgress),e().addProgress("AI is analyzing data for cleaning and reshaping...");const E=rd(v.data);if(e().updateBusyStatus("Drafting data preparation plan..."),T=await AM(E,v.data.slice(0,20),e().settings,{signal:r(g)}),e().isRunCancellationRequested(g)){e().addProgress("Upload cancelled during preparation.");return}if(T&&T.jsFunctionBody?(e().addProgress(`AI Plan: ${T.explanation}`),e().addProgress("Executing AI data transformation..."),v.data=cy(v.data,T.jsFunctionBody),e().addProgress("Transformation complete.")):e().addProgress("AI found no necessary data transformations."),_=T.outputColumns,v.data.length===0)throw new Error("Dataset empty after transformation.");n({csvData:v,columnProfiles:_,dataPreparationPlan:T,currentView:"analysis_dashboard"}),await e().handleInitialAnalysis(v,{runId:g})}else e().addProgress("API Key not set. Please add it in the settings.","error"),e().setIsSettingsModalOpen(!0),_=rd(v.data),n({csvData:v,columnProfiles:_,currentView:"analysis_dashboard"})}catch(m){if(!e().isRunCancellationRequested(g)){console.error("File processing error:",m);const v=m instanceof Error?m.message:String(m);e().addProgress(`File Processing Error: ${v}`,"error"),n({currentView:"file_upload"})}}finally{e().endBusy(g)}},regenerateAnalyses:async c=>{e().addProgress("Data has changed. Regenerating all analysis cards..."),n({analysisCards:[],finalSummary:null});const p=e().beginBusy("Regenerating insight cards...",{cancellable:!0});try{const g=e().analysisCards.map(m=>m.plan);if(g.length>0){const m=await e().runAnalysisPipeline(g,c,{isChatRequest:!0,runId:p});if(m.length>0&&!(p&&e().isRunCancellationRequested(p))){const v=await fv(m,e().settings,{signal:r(p)});p&&e().isRunCancellationRequested(p)||(n({finalSummary:v}),e().addProgress("All analysis cards have been updated."))}}else e().addProgress("No existing plans found to regenerate.","error")}catch(g){if(!(p&&e().isRunCancellationRequested(p))){console.error("Error regenerating analyses:",g);const m=g instanceof Error?g.message:String(g);e().addProgress(`Error updating analyses: ${m}`,"error")}}finally{e().endBusy(p)}},executeDomAction:c=>{e().addProgress(`AI is performing action: ${c.toolName}...`),n(p=>{const g=[...p.analysisCards];let m=!1;switch(c.toolName){case"highlightCard":{const v=c.args.cardId,_=document.getElementById(v);_&&(_.scrollIntoView({behavior:"smooth",block:"center"}),_.classList.add("ring-4","ring-blue-500","transition-all","duration-500"),setTimeout(()=>_.classList.remove("ring-4","ring-blue-500"),2500));break}case"changeCardChartType":{const{cardId:v,newType:_}=c.args,T=g.findIndex(E=>E.id===v);T>-1&&(g[T].displayChartType=_,m=!0);break}case"showCardData":{const{cardId:v,visible:_}=c.args,T=g.findIndex(E=>E.id===v);T>-1&&(g[T].isDataVisible=_,m=!0);break}case"filterCard":{const{cardId:v,column:_,values:T}=c.args,E=g.findIndex(w=>w.id===v);E>-1&&(g[E].filter=T.length>0?{column:_,values:T}:void 0,m=!0);break}}return m?{analysisCards:g}:{}})},handleChatMessage:async c=>{var m,v,_,T;if(!e().isApiKeySet){e().addProgress("API Key not set.","error"),e().setIsSettingsModalOpen(!0);return}const p=e().beginBusy("Working on your request...",{cancellable:!0}),g={sender:"user",text:c,timestamp:new Date,type:"user_message"};n(E=>({chatHistory:[...E.chatHistory,g]}));try{const E=e().analysisCards.map(x=>({id:x.id,title:x.plan.title,aggregatedDataSample:x.aggregatedData.slice(0,100)}));e().updateBusyStatus("Thinking through your question...");const w=await RM(e().columnProfiles,e().chatHistory,c,E,e().settings,e().aiCoreAnalysisSummary,e().currentView,(((m=e().csvData)==null?void 0:m.data)||[]).slice(0,20),[],e().dataPreparationPlan,{signal:r(p)});if(e().isRunCancellationRequested(p)){e().addProgress("Stopped processing request.");return}for(const x of w.actions){if(e().isRunCancellationRequested(p)){e().addProgress("Cancelled remaining actions.");return}switch(x.thought&&e().addProgress(`AI Thought: ${x.thought}`),x.responseType){case"text_response":if(x.text){const N={sender:"ai",text:x.text,timestamp:new Date,type:"ai_message",cardId:x.cardId};n(k=>({chatHistory:[...k.chatHistory,N]}))}break;case"plan_creation":x.plan&&e().csvData&&await u(x.plan,e().csvData,p);break;case"dom_action":x.domAction&&e().executeDomAction(x.domAction);break;case"execute_js_code":if((v=x.code)!=null&&v.jsFunctionBody&&e().csvData){const N=cy(e().csvData.data,x.code.jsFunctionBody),k={...e().csvData,data:N};n({csvData:k,columnProfiles:rd(k.data)}),await e().regenerateAnalyses(k)}break;case"filter_spreadsheet":(_=x.args)!=null&&_.query&&(e().addProgress("AI is filtering the data explorer based on your request."),await e().handleNaturalLanguageQuery(x.args.query),n({isSpreadsheetVisible:!0}),setTimeout(()=>{var N;(N=document.getElementById("raw-data-explorer"))==null||N.scrollIntoView({behavior:"smooth",block:"center"})},100));break;case"clarification_request":if(x.clarification){const N=jM(x.clarification,(T=e().csvData)==null?void 0:T.data,e().columnProfiles.map(U=>U.name));if(!N){const U="I could not find any usable columns for that question. Try inspecting the data preview to pick a different column.";e().addProgress(U,"error");const L={sender:"ai",text:`${U}
You can also open the Data Preview to double-check column names.`,timestamp:new Date,type:"ai_message",isError:!0,cta:{type:"open_data_preview",label:"Open Data Preview",helperText:"Review the raw columns before asking again."}};n(G=>({chatHistory:[...G.chatHistory,L]}));break}const k=i(N);if(k.options.length===1){const U=k.options[0];e().addProgress(`AI inferred you meant "${U.label}" (${U.value}).`),await e().handleClarificationResponse(k.id,U);break}const D={sender:"ai",text:k.question,timestamp:new Date,type:"ai_clarification",clarificationRequest:k};n(U=>({chatHistory:[...U.chatHistory,D]})),n({activeClarificationId:k.id}),e().endBusy(p);return}break}}}catch(E){if(!e().isRunCancellationRequested(p)){const w=E instanceof Error?E.message:String(E);e().addProgress(`Error: ${w}`,"error");const x={sender:"ai",text:`Sorry, an error occurred: ${w}`,timestamp:new Date,type:"ai_message",isError:!0};n(N=>({chatHistory:[...N.chatHistory,x]}))}}finally{e().pendingClarifications.some(E=>E.status==="pending"||E.status==="resolving")||e().endBusy(p)}},handleClarificationResponse:async(c,p)=>{const{csvData:g,columnProfiles:m}=e(),v=e().pendingClarifications.find(E=>E.id===c&&E.status==="pending");if(!v||!g)return;const _={sender:"user",text:`Selected: ${p.label}`,timestamp:new Date,type:"user_message"};n(E=>({chatHistory:[...E.chatHistory,_]}));const T=e().beginBusy("Applying clarification...",{cancellable:!0});a(c,"resolving");try{const{pendingPlan:E,targetProperty:w}=v,x=m.map(G=>G.name),N=MS(p,w,x);if(yl.includes(w)&&(!N||!x.includes(N))){const G=`I couldn't find a column matching "${p.label}". Please pick another option so I know which column to use.`;e().addProgress(G,"error");const F={sender:"ai",text:G,timestamp:new Date,type:"ai_message",isError:!0};n(I=>({chatHistory:[...I.chatHistory,F]})),a(c,"pending"),e().endBusy(T);return}const k=w==="groupByColumn",D=k?vl(N,g.data,2,50):vl(N,g.data);if(yl.includes(w)&&N&&!D){const G=k?`The column "${N}" doesn't look like a good grouping (not enough distinct categories). Please pick another option.`:`Looks like "${N}" does not contain data right now. Please pick another option or ask about a different metric.`;e().addProgress(G,"error");const F={sender:"ai",text:G,timestamp:new Date,type:"ai_message",isError:!0};n(I=>({chatHistory:[...I.chatHistory,F]})),a(c,"pending"),e().endBusy(T);return}const U={...E,[w]:N??p.value},L=eI(U,m);if(L.aggregation||(L.aggregation=L.valueColumn?"sum":"count"),L.chartType||(L.chartType="bar"),L.chartType!=="scatter"&&(delete L.xValueColumn,delete L.yValueColumn),L.chartType!=="combo"&&(delete L.secondaryValueColumn,delete L.secondaryAggregation),!L.groupByColumn&&L.chartType!=="scatter"){const{columnProfiles:G}=e(),F=G.map(z=>z.name);let I=null;const Q=[...F].sort((z,Z)=>Z.length-z.length);for(const z of Q){const Z=z.toLowerCase().replace(/_/g," ");if(p.label.toLowerCase().includes(Z)){I=z;break}}if(I)L.groupByColumn=I,e().addProgress(`AI inferred grouping by "${I}" based on your selection.`);else{const z=G.filter(Z=>Z.type==="categorical"&&(Z.uniqueValues||0)<g.data.length&&(Z.uniqueValues||0)>1);z.length>0&&(z.sort((Z,X)=>(Z.uniqueValues||1/0)-(X.uniqueValues||1/0)),L.groupByColumn=z[0].name,e().addProgress(`AI inferred grouping by "${z[0].name}" as a fallback.`))}}if(L.title||(L.title=`Analysis of ${p.label}`),L.description||(L.description=`A chart showing an analysis of ${p.label}.`),L.chartType!=="scatter"&&(!L.chartType||!L.groupByColumn||!L.aggregation)){const G=["chartType","groupByColumn","aggregation"].filter(F=>!L[F]);throw new Error(`The clarified plan is still missing required fields like ${G.join(", ")}.`)}await u(L,g,T),a(c,"resolved")}catch(E){if(!e().isRunCancellationRequested(T)){const w=E instanceof Error?E.message:String(E);e().addProgress(`Error processing clarification: ${w}`,"error");const x={sender:"ai",text:`Sorry, an error occurred while creating the chart: ${w}`,timestamp:new Date,type:"ai_message",isError:!0};n(N=>({chatHistory:[...N.chatHistory,x]})),a(c,"pending")}}finally{e().endBusy(T)}},skipClarification:c=>{const p=e().pendingClarifications.find(v=>v.id===c&&v.status==="pending");if(!p)return;const g={sender:"user",text:`Skipped: ${p.question}`,timestamp:new Date,type:"user_message"},m={sender:"ai",text:"No problemI cancelled that request. Ask me something else whenever you are ready.",timestamp:new Date,type:"ai_message"};a(c,"skipped"),n(v=>({chatHistory:[...v.chatHistory,g,m]})),e().endBusy()},handleNaturalLanguageQuery:async c=>{var v;if(!e().isApiKeySet||!e().csvData){e().addProgress("Cannot perform AI query: API Key is not set or no data is loaded.","error");return}const p=e().aiFilterRunId;p&&e().abortRunControllers(p);const g=Cv();n({isAiFiltering:!0,aiFilterRunId:g,spreadsheetFilterFunction:null,aiFilterExplanation:null}),e().addProgress(`AI is processing your data query: "${c}"...`);const m=(v=e().createAbortController(g))==null?void 0:v.signal;try{const _=await NM(c,e().columnProfiles,e().csvData.data.slice(0,5),e().settings,{signal:m});n({spreadsheetFilterFunction:_.jsFunctionBody,aiFilterExplanation:_.explanation}),e().addProgress(`AI filter applied: ${_.explanation}`),e().addToast("AI filter applied successfully.","success")}catch(_){if(_ instanceof DOMException&&_.name==="AbortError")e().addProgress("AI filter request cancelled."),e().addToast("AI filter cancelled.","info");else{const T=_ instanceof Error?_.message:String(_);e().addProgress(`AI query failed: ${T}`,"error"),e().addToast(`AI filter failed: ${T}`,"error")}}finally{e().clearRunControllers(g),n(_=>_.aiFilterRunId===g?{isAiFiltering:!1,aiFilterRunId:null}:{})}},clearAiFilter:()=>{const c=e().aiFilterRunId;c&&e().abortRunControllers(c),n({spreadsheetFilterFunction:null,aiFilterExplanation:null,aiFilterRunId:null,isAiFiltering:!1}),e().addProgress("AI data filter cleared."),e().addToast("AI filter cleared.","info")},cancelAiFilterRequest:()=>{const{aiFilterRunId:c,isAiFiltering:p}=e();!c||!p||(e().abortRunControllers(c),n({isAiFiltering:!1,aiFilterRunId:null}),e().addProgress("AI data filter cancelled."),e().addToast("AI filter cancelled.","info"))},handleChartTypeChange:(c,p)=>{n(g=>({analysisCards:g.analysisCards.map(m=>m.id===c?{...m,displayChartType:p}:m)}))},handleToggleDataVisibility:c=>{n(p=>({analysisCards:p.analysisCards.map(g=>g.id===c?{...g,isDataVisible:!g.isDataVisible}:g)}))},handleTopNChange:(c,p)=>{n(g=>({analysisCards:g.analysisCards.map(m=>m.id===c?{...m,topN:p}:m)}))},handleHideOthersChange:(c,p)=>{n(g=>({analysisCards:g.analysisCards.map(m=>m.id===c?{...m,hideOthers:p}:m)}))},handleToggleLegendLabel:(c,p)=>{n(g=>({analysisCards:g.analysisCards.map(m=>{if(m.id===c){const v=m.hiddenLabels||[],_=v.includes(p)?v.filter(T=>T!==p):[...v,p];return{...m,hiddenLabels:_}}return m})}))},handleLoadReport:async c=>{e().addProgress(`Loading report ${c}...`);const p=await ro(c);p?(Et.clear(),n({...p.appState,currentView:"analysis_dashboard",isHistoryPanelOpen:!1}),p.appState.vectorStoreDocuments&&Et.rehydrate(p.appState.vectorStoreDocuments),e().addProgress(`Report "${p.filename}" loaded.`)):e().addProgress(`Failed to load report ${c}.`,"error")},handleDeleteReport:async c=>{await bd(c),await e().loadReportsList()},handleShowCardFromChat:c=>{const p=document.getElementById(c);p&&(p.scrollIntoView({behavior:"smooth",block:"center"}),p.classList.add("ring-4","ring-blue-500","transition-all","duration-500"),setTimeout(()=>p.classList.remove("ring-4","ring-blue-500"),2500))},handleNewSession:async()=>{if(e().csvData){const c=await ro(Ti);if(c){const p=`report-${c.createdAt.getTime()}`;await nf({...c,id:p,updatedAt:new Date})}}Et.clear(),await bd(Ti),n({...Qr,busyRunId:null,isCancellationRequested:!1,aiFilterRunId:null,abortControllers:{},toasts:[]}),await e().loadReportsList()},setIsAsideVisible:c=>n({isAsideVisible:c}),setAsideWidth:c=>n({asideWidth:c}),setIsSpreadsheetVisible:c=>n({isSpreadsheetVisible:c}),setIsDataPrepDebugVisible:c=>n({isDataPrepDebugVisible:c}),setIsSettingsModalOpen:c=>n({isSettingsModalOpen:c}),setIsHistoryPanelOpen:c=>n({isHistoryPanelOpen:c}),setIsMemoryPanelOpen:c=>n({isMemoryPanelOpen:c}),setIsResizing:c=>n({isResizing:c}),focusDataPreview:()=>{n({isSpreadsheetVisible:!0}),setTimeout(()=>{var c;(c=document.getElementById("raw-data-explorer"))==null||c.scrollIntoView({behavior:"smooth",block:"center"})},100)}}});setInterval(async()=>{var e;const n=We.getState();if(n.csvData&&n.csvData.data.length>0){const i={currentView:n.currentView,isBusy:n.isBusy,busyMessage:n.busyMessage,canCancelBusy:n.canCancelBusy,progressMessages:n.progressMessages,csvData:n.csvData,columnProfiles:n.columnProfiles,analysisCards:n.analysisCards,chatHistory:n.chatHistory,finalSummary:n.finalSummary,aiCoreAnalysisSummary:n.aiCoreAnalysisSummary,dataPreparationPlan:n.dataPreparationPlan,initialDataSample:n.initialDataSample,vectorStoreDocuments:Et.getDocuments(),spreadsheetFilterFunction:n.spreadsheetFilterFunction,aiFilterExplanation:n.aiFilterExplanation,pendingClarifications:n.pendingClarifications,activeClarificationId:n.activeClarificationId,toasts:[]},a={id:Ti,filename:n.csvData.fileName||"Current Session",createdAt:((e=await ro(Ti))==null?void 0:e.createdAt)||new Date,updatedAt:new Date,appState:i};await nf(a)}},2e3);const iI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),sI=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"}),C.jsx("path",{d:"M12.293 5.293a1 1 0 011.414 0l2 2a1 1 0 01-1.414 1.414L13 7.414V10a1 1 0 11-2 0V7.414l-1.293 1.293a1 1 0 01-1.414-1.414l2-2zM7.707 14.707a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L7 12.586V10a1 1 0 112 0v2.586l1.293-1.293a1 1 0 011.414 1.414l-2 2z"})]}),aI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),oI=({cardId:n})=>{var Re,lt;const e=We(ae=>ae.analysisCards.find(je=>je.id===n)),{handleChartTypeChange:i,handleToggleDataVisibility:a,handleTopNChange:r,handleHideOthersChange:u,handleToggleLegendLabel:c}=We(ae=>({handleChartTypeChange:ae.handleChartTypeChange,handleToggleDataVisibility:ae.handleToggleDataVisibility,handleTopNChange:ae.handleTopNChange,handleHideOthersChange:ae.handleHideOthersChange,handleToggleLegendLabel:ae.handleToggleLegendLabel})),p=ge.useRef(null),g=ge.useRef(null),[m,v]=ge.useState(!1),[_,T]=ge.useState([]),[E,w]=ge.useState(!1),[x,N]=ge.useState(!0);if(!e)return null;const{id:k,plan:D,aggregatedData:U,summary:L,displayChartType:G,isDataVisible:F,topN:I,hideOthers:Q,disableAnimation:z,filter:Z,hiddenLabels:X=[]}=e,te=L.split("---"),Te=(Re=te[0])==null?void 0:Re.trim(),de=(lt=te[1])==null?void 0:lt.trim(),Pe=D.valueColumn||"count",V=D.groupByColumn||"",j=ge.useMemo(()=>{let ae=U;return Z&&Z.column&&Z.values.length>0&&(ae=ae.filter(je=>Z.values.includes(je[Z.column]))),ae},[U,Z]),ue=ge.useMemo(()=>D.chartType!=="scatter"&&V&&I?EE(j,V,Pe,I):j,[j,D.chartType,V,I,Pe]),Ce=ge.useMemo(()=>{let ae=ue;return I&&Q&&(ae=ae.filter(je=>je[V]!=="Others")),V&&(ae=ae.filter(je=>!X.includes(String(je[V])))),ae},[ue,I,Q,V,X]),Ne=ge.useMemo(()=>j.reduce((ae,je)=>ae+(Number(je[Pe])||0),0),[j,Pe]),M=async ae=>{if(p.current){v(!0);try{switch(ae){case"png":await pE(p.current,D.title);break;case"csv":gE(Ce,D.title);break;case"html":await yE(p.current,D.title,Ce,L);break}}finally{v(!1)}}},$=(ae,je)=>{const Zi=je.ctrlKey||je.metaKey;T(Yn=>Zi?(Yn.includes(ae)?Yn.filter(sn=>sn!==ae):[...Yn,ae]).sort((sn,aa)=>sn-aa):Yn.includes(ae)?[]:[ae])},ee=()=>{var ae;return(ae=g.current)==null?void 0:ae.resetZoom()},se=()=>T([]),me=ae=>{const je=ae.target.value==="all"?null:parseInt(ae.target.value,10);r(k,je)},Se=_.map(ae=>Ce[ae]);return C.jsxs("div",{ref:p,id:k,className:"bg-white rounded-lg shadow-lg p-4 flex flex-col transition-all duration-300 hover:shadow-blue-500/20 border border-slate-200",children:[C.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[C.jsx("h3",{className:"text-lg font-bold text-slate-900 flex-1",children:D.title}),C.jsxs("div",{className:"flex items-center bg-slate-100 rounded-md p-0.5 space-x-0.5 flex-shrink-0",children:[C.jsx(SE,{currentType:G,onChange:ae=>i(k,ae)}),C.jsxs("div",{className:"relative group",children:[C.jsx("button",{disabled:m,className:"p-1.5 text-slate-500 hover:text-slate-900 rounded-md transition-colors hover:bg-slate-200",children:C.jsx(iI,{})}),C.jsxs("div",{className:"absolute right-0 mt-2 w-36 bg-white border border-slate-200 rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none group-hover:pointer-events-auto",children:[C.jsx("a",{onClick:()=>M("png"),className:"block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 cursor-pointer rounded-t-md",children:"Export as PNG"}),C.jsx("a",{onClick:()=>M("csv"),className:"block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 cursor-pointer",children:"Export as CSV"}),C.jsx("a",{onClick:()=>M("html"),className:"block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 cursor-pointer rounded-b-md",children:"Export as HTML"})]})]})]})]}),C.jsx("p",{className:"text-sm text-slate-500 mb-4",children:D.description}),C.jsxs("div",{className:"grid gap-4 flex-grow grid-cols-1",children:[C.jsxs("div",{className:"relative h-64",children:[C.jsx(mE,{ref:g,chartType:G,data:Ce,plan:D,selectedIndices:_,onElementClick:$,onZoomChange:w,disableAnimation:z}),C.jsxs("div",{className:"absolute top-1 right-1 flex items-center space-x-1",children:[_.length>0&&C.jsx("button",{onClick:se,title:"Clear selection",className:"p-1 bg-white/50 text-slate-600 rounded-full hover:bg-slate-100 hover:text-slate-800 transition-all backdrop-blur-sm",children:C.jsx(aI,{})}),E&&C.jsx("button",{onClick:ee,title:"Reset zoom",className:"p-1 bg-white/50 text-slate-600 rounded-full hover:bg-slate-100 hover:text-slate-800 transition-all backdrop-blur-sm",children:C.jsx(sI,{})})]})]}),V&&C.jsx("div",{className:"flex flex-col",children:C.jsx(wE,{data:ue,total:Ne,groupByKey:V,valueKey:Pe,hiddenLabels:X,onLabelClick:ae=>c(k,ae)})})]}),Z&&C.jsxs("div",{className:"text-xs text-yellow-800 bg-yellow-100 p-2 rounded-md my-3 border border-yellow-200",children:[C.jsx("b",{children:"AI Filter Active:"})," Showing where '",Z.column,"' is '",Z.values.join(", "),`'. Ask AI to "clear filter" to remove.`]}),C.jsx("div",{className:"mt-4 border-t border-slate-200 pt-4",children:C.jsxs("div",{className:"bg-slate-50 p-3 rounded-md text-sm border border-slate-200",children:[C.jsxs("div",{className:"flex justify-between items-baseline mb-2",children:[C.jsx("p",{className:"font-semibold text-blue-600",children:"AI Summary"}),D.aggregation==="sum"&&C.jsxs("p",{className:"text-xs text-slate-500",children:["Total: ",C.jsx("span",{className:"font-bold text-base text-slate-800",children:Ne.toLocaleString(void 0,{maximumFractionDigits:0})})]})]}),C.jsx("p",{className:"text-slate-700 text-xs",children:Te}),de&&C.jsx("p",{className:"text-slate-500 mt-2 text-xs",children:de})]})}),C.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[C.jsx("div",{children:C.jsxs("button",{onClick:()=>a(k),className:"text-sm text-blue-600 hover:underline",children:[F?"Hide":"Show"," Full Data Table"]})}),D.chartType!=="scatter"&&U.length>5&&C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("label",{htmlFor:`top-n-${k}`,className:"text-xs text-slate-500",children:"Show"}),C.jsxs("select",{id:`top-n-${k}`,value:I||"all",onChange:me,className:"bg-white border border-slate-300 text-slate-800 text-xs rounded-md py-1 px-2 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[C.jsx("option",{value:"all",children:"All"}),C.jsx("option",{value:"5",children:"Top 5"}),C.jsx("option",{value:"8",children:"Top 8"}),C.jsx("option",{value:"10",children:"Top 10"}),C.jsx("option",{value:"15",children:"Top 15"}),C.jsx("option",{value:"20",children:"Top 20"})]}),I&&C.jsx("div",{className:"flex items-center",children:C.jsxs("label",{htmlFor:`hide-others-${k}`,className:"flex items-center space-x-1.5 text-xs text-slate-500",children:[C.jsx("input",{type:"checkbox",id:`hide-others-${k}`,checked:Q,onChange:ae=>u(k,ae.target.checked),className:"bg-slate-100 border-slate-300 rounded focus:ring-blue-500 text-blue-600 h-3.5 w-3.5"}),C.jsx("span",{children:'Hide "Others"'})]})})]})]}),_.length>0&&C.jsxs("div",{className:"mt-4 bg-slate-50 p-3 rounded-md text-sm border border-slate-200",children:[C.jsxs("button",{onClick:()=>N(!x),className:"w-full text-left font-semibold text-blue-600 mb-1",children:[x?"":""," Selection Details (",_.length," items)"]}),x&&C.jsx(rl,{data:Se})]}),F&&C.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto border border-slate-200 rounded-md",children:C.jsx(rl,{data:Ce})})]})},rI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 inline-block mr-2 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),lI=({summary:n})=>C.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg shadow-lg p-6 mb-6",children:[C.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-3 flex items-center",children:[C.jsx(rI,{}),"Overall Insights"]}),C.jsx("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed",children:n})]}),uI=()=>{const n=We(i=>i.analysisCards),e=We(i=>i.finalSummary);return n.length===0?C.jsx("div",{className:"flex items-center justify-center h-full",children:C.jsxs("div",{className:"text-center p-4",children:[C.jsx("p",{className:"text-slate-500",children:"Your analysis results will appear here."}),C.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"The AI is generating the initial analysis..."})]})}):C.jsxs("div",{className:"p-1",children:[e&&C.jsx(lI,{summary:e}),C.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-6 mt-6",children:n.map(i=>C.jsx(oI,{cardId:i.id},i.id))})]})},cI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),dI=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),fI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:C.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),hI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),mI=()=>C.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),pI=()=>{const{progressMessages:n,chatHistory:e,isBusy:i,handleChatMessage:a,isApiKeySet:r,setIsAsideVisible:u,setIsSettingsModalOpen:c,setIsMemoryPanelOpen:p,handleShowCardFromChat:g,currentView:m,pendingClarifications:v,activeClarificationId:_,handleClarificationResponse:T,skipClarification:E,focusDataPreview:w,isCancellationRequested:x}=We(X=>({progressMessages:X.progressMessages,chatHistory:X.chatHistory,isBusy:X.isBusy,handleChatMessage:X.handleChatMessage,isApiKeySet:X.isApiKeySet,setIsAsideVisible:X.setIsAsideVisible,setIsSettingsModalOpen:X.setIsSettingsModalOpen,setIsMemoryPanelOpen:X.setIsMemoryPanelOpen,handleShowCardFromChat:X.handleShowCardFromChat,currentView:X.currentView,pendingClarifications:X.pendingClarifications,activeClarificationId:X.activeClarificationId,handleClarificationResponse:X.handleClarificationResponse,skipClarification:X.skipClarification,focusDataPreview:X.focusDataPreview,isCancellationRequested:X.isCancellationRequested})),[N,k]=ge.useState(""),D=ge.useRef(null),U=ge.useRef(null),L=v.some(X=>X.status==="pending"),G=[...n,...e].sort((X,te)=>X.timestamp.getTime()-te.timestamp.getTime()),F=()=>{var X;(X=D.current)==null||X.scrollIntoView({behavior:"smooth"})};ge.useEffect(F,[G]),ge.useEffect(()=>{const X=U.current;if(X){X.style.height="auto";const te=X.scrollHeight;X.style.height=`${te}px`}},[N]);const I=X=>{X.preventDefault(),N.trim()&&!i&&(a(N.trim()),k(""))},Q=X=>{X.key==="Enter"&&!X.shiftKey&&I(X)},z=()=>{if(!r)return"Set API Key in settings to chat";if(L)return"Please resolve or skip the clarification above";switch(m){case"analysis_dashboard":return"Ask for a new analysis or data transformation...";case"file_upload":default:return"Upload a file to begin chatting"}},Z=(X,te)=>{var Te;if("sender"in X){const de=X;if(de.type==="ai_clarification"&&de.clarificationRequest){const Pe=v.find(ee=>ee.id===de.clarificationRequest.id),V=(Pe==null?void 0:Pe.status)??"resolved",j=V==="pending",Ce=(j||V==="resolving")&&(Pe==null?void 0:Pe.id)===_,Ne=Pe?V==="pending":!1,M={pending:Ce?"bg-blue-100 text-blue-800 border-blue-200":"bg-slate-100 text-slate-600 border-slate-200",resolving:"bg-amber-100 text-amber-800 border-amber-200",resolved:"bg-emerald-100 text-emerald-800 border-emerald-200",skipped:"bg-slate-200 text-slate-500 border-slate-300"},$=V==="pending"?Ce?"Active":"Queued":V==="resolving"?"Working":V==="skipped"?"Skipped":"Answered";return C.jsxs("div",{className:`my-2 p-3 bg-white border rounded-lg transition-colors ${Ce?"border-blue-400 shadow shadow-blue-100":"border-blue-200"} ${V==="resolved"?"opacity-90":""} ${V==="skipped"?"opacity-60":""}`,children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsxs("div",{className:"flex items-center text-blue-700",children:[C.jsx("span",{className:"text-lg mr-2",children:""}),C.jsx("h4",{className:"font-semibold",children:"Clarification Needed"})]}),C.jsx("span",{className:`text-xs px-2 py-1 border rounded-full ${M[V]??"bg-slate-100 text-slate-600 border-slate-200"}`,children:$})]}),C.jsx("p",{className:"text-sm text-slate-700 mb-3",children:de.clarificationRequest.question}),C.jsx("div",{className:"flex flex-col space-y-2",children:de.clarificationRequest.options.map(ee=>C.jsxs("button",{onClick:()=>T(de.clarificationRequest.id,ee),disabled:!j||i,className:"w-full text-left text-sm px-3 py-2 bg-slate-100 rounded-md hover:bg-blue-100 hover:border-blue-500 border border-slate-200 transition-colors disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:bg-slate-100",children:[C.jsx("span",{className:"font-medium text-slate-800",children:ee.label}),C.jsxs("span",{className:"block text-xs text-slate-500",children:["Column: ",ee.value]})]},`${de.clarificationRequest.id}-${ee.value}`))}),C.jsx("div",{className:"flex justify-end mt-3",children:C.jsx("button",{onClick:()=>E(de.clarificationRequest.id),disabled:!Ne,className:"text-xs text-slate-500 hover:text-red-600 border border-slate-200 px-3 py-1 rounded-md transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:"Skip / Cancel"})})]},`chat-${te}`)}return de.type==="ai_plan_start"?C.jsxs("div",{className:"my-2 p-3 bg-slate-100 border border-slate-200 rounded-lg",children:[C.jsxs("div",{className:"flex items-center text-slate-700 mb-2",children:[C.jsx("span",{className:"text-lg mr-2",children:""}),C.jsx("h4",{className:"font-semibold",children:"Plan Execution"})]}),C.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:de.text})]},`chat-${te}`):de.type==="ai_thinking"?C.jsxs("div",{className:"my-2 p-3 bg-white border border-blue-200 rounded-lg",children:[C.jsxs("div",{className:"flex items-center text-blue-700 mb-2",children:[C.jsx("span",{className:"text-lg mr-2",children:""}),C.jsx("h4",{className:"font-semibold",children:"AI's Initial Analysis"})]}),C.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:de.text})]},`chat-${te}`):de.type==="ai_proactive_insight"?C.jsxs("div",{className:"my-2 p-3 bg-yellow-50 border border-yellow-300 rounded-lg",children:[C.jsxs("div",{className:"flex items-center text-yellow-800 mb-2",children:[C.jsx("span",{className:"text-lg mr-2",children:""}),C.jsx("h4",{className:"font-semibold",children:"Proactive Insight"})]}),C.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:de.text}),de.cardId&&C.jsx("button",{onClick:()=>g(de.cardId),className:"mt-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-md hover:bg-yellow-200 transition-colors w-full text-left font-medium",children:" Show Related Card"})]},`chat-${te}`):de.sender==="user"?C.jsx("div",{className:"flex justify-end",children:C.jsx("div",{className:"bg-blue-600 rounded-lg px-3 py-2 max-w-xs lg:max-w-md",children:C.jsx("p",{className:"text-sm text-white",children:de.text})})},`chat-${te}`):C.jsx("div",{className:"flex",children:C.jsxs("div",{className:`rounded-lg px-3 py-2 max-w-xs lg:max-w-md ${de.isError?"bg-red-100":"bg-slate-200"}`,children:[C.jsx("p",{className:`text-sm ${de.isError?"text-red-800":"text-slate-800"}`,children:de.text}),de.cardId&&!de.isError&&C.jsx("button",{onClick:()=>g(de.cardId),className:"mt-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-md hover:bg-blue-200 transition-colors w-full text-left font-medium",children:" Show Related Card"}),((Te=de.cta)==null?void 0:Te.type)==="open_data_preview"&&C.jsxs("button",{onClick:w,className:"mt-2 text-xs bg-white text-blue-700 border border-blue-200 px-2 py-1 rounded-md hover:bg-blue-50 transition-colors w-full text-left font-medium",children:[" ",de.cta.label,de.cta.helperText&&C.jsx("span",{className:"block text-[11px] text-slate-500 mt-0.5",children:de.cta.helperText})]})]})},`chat-${te}`)}else{const de=X;return C.jsxs("div",{className:`flex text-xs ${de.type==="error"?"text-red-600":"text-slate-500"}`,children:[C.jsx("span",{className:"mr-2 text-slate-400",children:de.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),C.jsx("span",{children:de.text})]},`prog-${te}`)}};return C.jsxs("div",{className:"flex flex-col h-full bg-slate-100 rounded-lg md:rounded-none",children:[C.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center relative",children:[C.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Assistant"}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("button",{onClick:()=>p(!0),className:"p-1 text-slate-500 rounded-full hover:bg-slate-200 hover:text-slate-800 transition-colors",title:"View AI Memory","aria-label":"View AI Memory",children:C.jsx(fI,{})}),C.jsx("button",{onClick:()=>c(!0),className:"p-1 text-slate-500 rounded-full hover:bg-slate-200 hover:text-slate-800 transition-colors",title:"Settings","aria-label":"Open Settings",children:C.jsx(dI,{})}),C.jsx("button",{onClick:()=>u(!1),className:"p-1 text-slate-500 rounded-full hover:bg-slate-200 hover:text-slate-800 transition-colors",title:"Hide Panel","aria-label":"Hide Assistant Panel",children:C.jsx(cI,{})})]})]}),C.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[G.map(Z),C.jsx("div",{ref:D})]}),C.jsxs("div",{className:"p-4 border-t border-slate-200 bg-white",children:[C.jsxs("form",{onSubmit:I,className:"flex items-start space-x-2",children:[C.jsx("textarea",{ref:U,rows:1,value:N,onChange:X=>k(X.target.value),onKeyDown:Q,placeholder:z(),disabled:i||!r||m==="file_upload"||L,className:"flex-grow bg-white border border-slate-300 rounded-md py-2 px-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 resize-none max-h-32",style:{overflowY:"auto"}}),C.jsxs("button",{type:"submit",disabled:i||!N.trim()||!r||m==="file_upload"||L,className:"flex-shrink-0 px-4 h-10 flex items-center justify-center gap-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed","aria-label":i?x?"Cancelling request":"Sending message":"Send message",children:[i?C.jsx(mI,{}):C.jsx(hI,{}),C.jsx("span",{className:"text-sm",children:i?x?"Cancelling":"Sending":"Send"})]})]}),C.jsx("div",{className:"text-xs text-slate-400 mt-2",children:m==="analysis_dashboard"?'e.g., "Sum of sales by region", or "Remove rows for USA"':""})]})]})},gI=()=>{const{handleFileUpload:n,isBusy:e,isApiKeySet:i,progressMessages:a,fileName:r}=We(v=>{var _;return{handleFileUpload:v.handleFileUpload,isBusy:v.isBusy,isApiKeySet:v.isApiKeySet,progressMessages:v.progressMessages,fileName:((_=v.csvData)==null?void 0:_.fileName)||null}}),[u,c]=ge.useState(!1),p=ge.useCallback(v=>{v.preventDefault(),v.stopPropagation(),i&&(v.type==="dragenter"||v.type==="dragover"?c(!0):v.type==="dragleave"&&c(!1))},[i]),g=ge.useCallback(v=>{v.preventDefault(),v.stopPropagation(),c(!1),i&&v.dataTransfer.files&&v.dataTransfer.files[0]&&n(v.dataTransfer.files[0])},[n,i]),m=v=>{i&&v.target.files&&v.target.files[0]&&n(v.target.files[0])};return e&&r?C.jsxs("div",{className:"flex flex-col items-center justify-center p-12 border-2 border-dashed rounded-lg border-blue-500 bg-slate-100 h-full",children:[C.jsxs("div",{className:"flex items-center text-xl text-slate-800 mb-4",children:[C.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C.jsxs("span",{children:['Processing "',r,'"...']})]}),C.jsx("div",{className:"w-full max-w-lg bg-white rounded-md p-4 max-h-64 overflow-y-auto border border-slate-200",children:C.jsx("ul",{className:"space-y-1",children:a.map((v,_)=>C.jsxs("li",{className:`flex text-xs ${v.type==="error"?"text-red-600":"text-slate-500"}`,children:[C.jsx("span",{className:"mr-2 text-slate-400",children:v.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),C.jsx("span",{children:v.text})]},_))})}),C.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"All processing is done locally in your browser. Your data stays private."})]}):i?C.jsxs("div",{onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:g,className:`flex flex-col items-center justify-center p-12 border-2 border-dashed rounded-lg transition-colors duration-300 h-full ${u?"border-blue-500 bg-slate-100":"border-slate-300 hover:border-blue-500"}`,children:[C.jsx("svg",{className:"w-16 h-16 text-slate-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h10a2 2 0 012 2v10a2 2 0 01-2 2z"})}),C.jsx("p",{className:"text-xl text-slate-500 mb-2",children:"Drag & drop your CSV file here"}),C.jsx("p",{className:"text-slate-400",children:"or"}),C.jsx("label",{htmlFor:"file-upload",className:"mt-4 cursor-pointer bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Select a file"}),C.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:m,className:"hidden",disabled:e}),C.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"All processing is done locally in your browser. Your data stays private."})]}):C.jsxs("div",{className:"flex flex-col items-center justify-center p-12 border-2 border-dashed rounded-lg border-slate-300 h-full",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-16 h-16 text-slate-400 mb-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),C.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"API Key Required"}),C.jsx("p",{className:"mt-2 max-w-sm text-center text-slate-500",children:"To unlock the AI analysis features, please add your Google Gemini API key in the Assistant's settings panel."}),C.jsx("p",{className:"mt-6 text-xs text-slate-400",children:"Your data remains local and private even when using the AI."})]})},yI=["English","Mandarin","Spanish","Japanese","French"],Av=["gemini-2.5-flash","gemini-2.5-pro"],xv=["gpt-5","gpt-5-mini","gpt-4o","gpt-4-turbo"],vI=()=>{const{isOpen:n,onClose:e,onSave:i,currentSettings:a}=We(m=>({isOpen:m.isSettingsModalOpen,onClose:()=>m.setIsSettingsModalOpen(!1),onSave:m.handleSaveSettings,currentSettings:m.settings})),[r,u]=ge.useState(a);if(ge.useEffect(()=>{u(a)},[a,n]),!n)return null;const c=()=>{i(r),e()},p=m=>{const{name:v,value:_}=m.target;u(T=>({...T,[v]:_}))},g=m=>{u(v=>{const _=Av.includes(v.model),T=xv.includes(v.model);let E=v.model;return m==="google"&&!_?E="gemini-2.5-pro":m==="openai"&&!T&&(E="gpt-4o"),{...v,provider:m,model:E}})};return C.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md border border-slate-200",onClick:m=>m.stopPropagation(),children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Settings"}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"AI Provider"}),C.jsxs("div",{className:"flex space-x-2 rounded-lg bg-slate-200 p-1",children:[C.jsx("button",{onClick:()=>g("google"),className:`w-full rounded-md py-1.5 text-sm font-medium transition-colors ${r.provider==="google"?"bg-blue-600 text-white shadow":"text-slate-700 hover:bg-slate-300"}`,children:"Google Gemini"}),C.jsx("button",{onClick:()=>g("openai"),className:`w-full rounded-md py-1.5 text-sm font-medium transition-colors ${r.provider==="openai"?"bg-blue-600 text-white shadow":"text-slate-700 hover:bg-slate-300"}`,children:"OpenAI"})]})]}),r.provider==="google"&&C.jsxs("div",{children:[C.jsx("label",{htmlFor:"geminiApiKey",className:"block text-sm font-medium text-slate-700",children:"Gemini API Key"}),C.jsx("input",{type:"password",id:"geminiApiKey",name:"geminiApiKey",value:r.geminiApiKey,onChange:p,className:"mt-1 block w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your API key"}),C.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Get your key from ",C.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google AI Studio"}),"."]})]}),r.provider==="openai"&&C.jsxs("div",{children:[C.jsx("label",{htmlFor:"openAIApiKey",className:"block text-sm font-medium text-slate-700",children:"OpenAI API Key"}),C.jsx("input",{type:"password",id:"openAIApiKey",name:"openAIApiKey",value:r.openAIApiKey,onChange:p,className:"mt-1 block w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your API key (sk-...)"}),C.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Get your key from ",C.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"OpenAI Platform"}),"."]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-slate-700",children:"AI Model"}),C.jsx("input",{type:"text",id:"model",name:"model",value:r.model,onChange:p,list:"model-list",className:"mt-1 block w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., gpt-4o"}),C.jsx("datalist",{id:"model-list",children:(r.provider==="google"?Av:xv).map(m=>C.jsx("option",{value:m},m))}),C.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Select a suggested model or type a custom one."})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-slate-700",children:"Agent Language"}),C.jsx("select",{id:"language",name:"language",value:r.language,onChange:p,className:"mt-1 block w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-500",children:yI.map(m=>C.jsx("option",{value:m,children:m},m))}),C.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Primary language for AI summaries and chat responses."})]})]}),C.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[C.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-md hover:bg-slate-300 transition-colors",children:"Cancel"}),C.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})})},_I=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),SI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),TI=()=>{const{isOpen:n,onClose:e,reports:i,onLoadReport:a,onDeleteReport:r}=We(c=>({isOpen:c.isHistoryPanelOpen,onClose:()=>c.setIsHistoryPanelOpen(!1),reports:c.reportsList,onLoadReport:c.handleLoadReport,onDeleteReport:c.handleDeleteReport}));if(!n)return null;const u=(c,p,g)=>{c.stopPropagation(),window.confirm(`Are you sure you want to delete the report for "${g}"? This cannot be undone.`)&&r(p)};return C.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl h-full max-h-[80vh] border border-slate-200 flex flex-col",onClick:c=>c.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Analysis History"}),C.jsx("button",{onClick:e,className:"p-1 text-slate-500 rounded-full hover:bg-slate-100 hover:text-slate-800 transition-colors",title:"Close History",children:C.jsx(_I,{})})]}),C.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:i.length===0?C.jsx("div",{className:"flex items-center justify-center h-full",children:C.jsx("p",{className:"text-slate-500",children:"No past reports found. Upload a CSV to start."})}):C.jsx("ul",{className:"space-y-3",children:i.map(c=>{const p=c.id===Ti;return C.jsx("li",{children:C.jsx("div",{onClick:()=>!p&&a(c.id),className:`block p-4 bg-slate-50 rounded-lg transition-all ${p?"ring-2 ring-blue-500 cursor-default":"hover:bg-slate-100 hover:ring-2 hover:ring-blue-500 cursor-pointer"}`,children:C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("div",{children:[C.jsxs("p",{className:"font-semibold text-slate-800 truncate",children:[p?C.jsx("span",{className:"text-blue-600 font-bold",children:"[Current Session] "}):null,c.filename]}),C.jsxs("p",{className:"text-sm text-slate-500",children:["Last saved: ",new Date(c.updatedAt).toLocaleString()]})]}),!p&&C.jsx("button",{onClick:g=>u(g,c.id,c.filename),className:"p-2 text-slate-500 rounded-full hover:bg-red-100 hover:text-red-600 transition-colors flex-shrink-0 ml-4",title:"Delete Report",children:C.jsx(SI,{})})]})})},c.id)})})}),C.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"Your reports are saved securely in your browser's IndexedDB."})]})})},CI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),EI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),AI=5*1024,xI=()=>{const n=We(I=>I.isMemoryPanelOpen),e=We(I=>I.addToast),i=()=>We.getState().setIsMemoryPanelOpen(!1),[a,r]=ge.useState([]),[u,c]=ge.useState(""),[p,g]=ge.useState([]),[m,v]=ge.useState(!1),[_,T]=ge.useState(null),E=ge.useRef(null),w=Et.getIsInitialized(),x=ge.useCallback(()=>{r(Et.getDocuments())},[]),N=ge.useMemo(()=>{if(a.length===0)return 0;const I=a.reduce((z,Z)=>z+Z.text.length*2,0),Q=a.length*384*4;return(I+Q)/1024},[a]);ge.useEffect(()=>{n?x():(c(""),g([]),T(null))},[n,x]),ge.useEffect(()=>()=>{var I;(I=E.current)==null||I.abort()},[]);const k=async I=>{var z;if(I.preventDefault(),!u.trim()||!w)return;(z=E.current)==null||z.abort();const Q=new AbortController;E.current=Q,v(!0),T(null);try{const Z=await Et.search(u,5,{signal:Q.signal});Q.signal.aborted||g(Z)}catch(Z){Z instanceof DOMException&&Z.name==="AbortError"||console.error("Memory search failed:",Z)}finally{E.current===Q&&(E.current=null),v(!1)}},D=()=>{E.current&&(E.current.abort(),E.current=null,v(!1),e("Memory search cancelled.","info"))},U=I=>{window.confirm("Are you sure you want to delete this memory item?")&&(Et.deleteDocument(I),x())},L=()=>{window.confirm("Are you sure you want to clear all items from the AI's memory? This cannot be undone.")&&(Et.clear(),x(),g([]))},G=I=>{T(I);const Q=document.getElementById(`memory-doc-${I.substring(0,30)}`);Q==null||Q.scrollIntoView({behavior:"smooth",block:"center"})};if(!n)return null;const F=Math.min(N/AI*100,100);return C.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 flex items-center justify-center z-50 transition-opacity",onClick:i,children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl h-full max-h-[85vh] border border-slate-200 flex flex-col",onClick:I=>I.stopPropagation(),children:[C.jsxs("header",{className:"flex justify-between items-start mb-4 flex-shrink-0",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("span",{className:"text-3xl",children:""}),C.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"AI Long-Term Memory"})]}),C.jsxs("div",{className:"mt-2 pl-12",children:[C.jsxs("div",{className:"flex items-baseline space-x-2 text-sm text-slate-500",children:[C.jsxs("span",{children:[a.length," items"]}),C.jsx("span",{className:"text-slate-300",children:"|"}),C.jsxs("span",{children:["Using ~",N.toFixed(2)," KB"]})]}),C.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mt-1",children:C.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${F}%`}})})]})]}),C.jsx("button",{onClick:i,className:"p-1 text-slate-500 rounded-full hover:bg-slate-100 hover:text-slate-800 transition-colors",title:"Close",children:C.jsx(CI,{})})]}),C.jsxs("div",{className:"flex-grow grid md:grid-cols-2 gap-6 min-h-0",children:[C.jsxs("div",{className:"flex flex-col min-h-0",children:[C.jsxs("div",{className:"mb-4 p-4 bg-slate-50 border border-slate-200 rounded-lg flex-shrink-0",children:[C.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:"Test Similarity Search"}),C.jsxs("form",{onSubmit:k,className:"flex items-center space-x-2",children:[C.jsx("input",{type:"text",value:u,onChange:I=>c(I.target.value),placeholder:w?"Enter query to find memories...":"Memory model is loading...",disabled:!w||m,className:"flex-grow bg-white border border-slate-300 rounded-md py-1.5 px-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:opacity-50"}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("button",{type:"submit",disabled:!w||m||!u.trim(),className:"px-4 py-1.5 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",children:m?"Searching":"Search"}),m&&C.jsx("button",{type:"button",onClick:D,className:"px-3 py-1.5 border border-slate-300 rounded-md text-slate-600 hover:bg-slate-100 transition-colors",children:"Cancel"})]})]})]}),C.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.length>0&&C.jsxs("div",{className:"space-y-2",children:[C.jsx("h4",{className:"text-sm font-medium text-slate-600",children:"Top Results:"}),p.map((I,Q)=>C.jsxs("div",{onClick:()=>G(I.text),className:"bg-white p-2.5 border border-slate-200 rounded-lg text-xs cursor-pointer hover:border-blue-500 hover:ring-1 hover:ring-blue-500",children:[C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("p",{className:"text-slate-700 font-semibold",children:"Match"}),C.jsxs("p",{className:"text-blue-600 font-bold",children:[(I.score*100).toFixed(1),"%"]})]}),C.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1 mb-2",children:C.jsx("div",{className:"bg-blue-500 h-1 rounded-full",style:{width:`${I.score*100}%`}})}),C.jsxs("p",{className:"text-slate-600 italic",children:['"',I.text,'"']})]},Q))]})})]}),C.jsxs("div",{className:"flex flex-col min-h-0",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[C.jsxs("h3",{className:"font-semibold text-slate-800",children:["All Stored Memories (",a.length,")"]}),a.length>0&&C.jsx("button",{onClick:L,className:"text-xs text-red-600 hover:underline",children:"Clear All"})]}),C.jsx("div",{className:"flex-grow overflow-y-auto pr-2 border-t border-slate-200 pt-2",children:a.length===0?C.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 text-sm",children:C.jsx("p",{children:"The AI's memory is currently empty."})}):C.jsx("ul",{className:"space-y-2",children:a.map(I=>C.jsxs("li",{id:`memory-doc-${I.text.substring(0,30)}`,className:`p-3 bg-slate-50 rounded-lg text-sm text-slate-800 border border-slate-200 flex justify-between items-start group transition-all duration-300 ${_===I.text?"border-blue-500 ring-2 ring-blue-500":""}`,children:[C.jsx("p",{className:"flex-grow pr-4 break-words",children:I.text}),C.jsx("button",{onClick:()=>U(I.id),className:"p-1 text-slate-400 rounded-full hover:bg-red-100 hover:text-red-600 transition-colors opacity-0 group-hover:opacity-100 flex-shrink-0",title:"Delete Memory",children:C.jsx(EI,{})})]},I.id))})})]})]})]})})},Zr=50,bI=({direction:n})=>n?n==="ascending"?C.jsx("span",{className:"text-slate-800",children:""}):C.jsx("span",{className:"text-slate-800",children:""}):C.jsx("span",{className:"text-slate-400",children:""}),wI=({data:n,sortConfig:e,onSort:i,columnWidths:a,onColumnResizeStart:r})=>{const[u,c]=ge.useState(0);if(!n||n.length===0)return C.jsx("p",{className:"text-slate-500 p-4 text-center",children:"No data matches your search."});const p=Object.keys(n[0]),g=Math.ceil(n.length/Zr),m=u*Zr,v=n.slice(m,m+Zr),_=()=>c(x=>Math.max(0,x-1)),T=()=>c(x=>Math.min(g-1,x+1)),E=x=>typeof x=="number"?x.toLocaleString(void 0,{maximumFractionDigits:2}):x,w=x=>{let N,k="";for(;x>=0;)N=x%26,k=String.fromCharCode(N+65)+k,x=Math.floor(x/26)-1;return k};return C.jsxs("div",{className:"w-full text-sm h-full flex flex-col",children:[C.jsx("div",{className:"flex-grow overflow-auto",children:C.jsxs("table",{className:"w-full text-left border-collapse",style:{tableLayout:"fixed"},children:[C.jsx("thead",{className:"bg-slate-100 text-slate-600 sticky top-0 z-10",children:C.jsxs("tr",{children:[C.jsx("th",{className:"p-2 font-semibold text-slate-500 text-center sticky left-0 z-20 bg-slate-100 border-r border-slate-200",style:{width:"60px"},children:"#"}),p.map((x,N)=>C.jsxs("th",{className:"p-2 font-semibold whitespace-nowrap border-r border-l border-slate-200 relative",style:{width:a[x]||150},children:[C.jsxs("button",{onClick:()=>i(x),className:"flex items-center justify-between w-full h-full",children:[C.jsxs("span",{className:"truncate",title:x,children:[w(N)," - ",x]}),C.jsx(bI,{direction:(e==null?void 0:e.key)===x?e.direction:void 0})]}),C.jsx("div",{onMouseDown:k=>r(x,k),className:"absolute top-0 right-0 h-full w-2 cursor-col-resize z-30"})]},x))]})}),C.jsx("tbody",{className:"bg-white",children:v.map((x,N)=>C.jsxs("tr",{className:"border-b border-slate-200 last:border-b-0 hover:bg-slate-50",children:[C.jsx("td",{className:"p-2 text-slate-400 text-center sticky left-0 z-10 bg-white border-r border-slate-200",style:{width:"60px"},children:m+N+1}),p.map(k=>C.jsx("td",{className:"p-2 text-slate-700 whitespace-nowrap overflow-hidden text-ellipsis border-r border-l border-slate-200",children:E(x[k])},`${N}-${k}`))]},N))})]})}),g>1&&C.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-100 border-t border-slate-200 flex-shrink-0",children:[C.jsxs("span",{className:"text-xs text-slate-500",children:["Showing ",m+1," - ",Math.min(m+Zr,n.length)," of ",n.length," rows"]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("button",{onClick:_,disabled:u===0,className:"px-2 py-1 text-xs bg-slate-200 rounded disabled:opacity-50 hover:bg-slate-300",children:"Previous"}),C.jsxs("span",{className:"text-xs text-slate-500",children:["Page ",u+1," of ",g]}),C.jsx("button",{onClick:T,disabled:u===g-1,className:"px-2 py-1 text-xs bg-slate-200 rounded disabled:opacity-50 hover:bg-slate-300",children:"Next"})]})]})]})},RI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),NI=({isOpen:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 transform transition-transform duration-200 ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),MI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),II=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),DI=()=>C.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),PI=({isVisible:n})=>{const{csvData:e,spreadsheetFilterFunction:i,aiFilterExplanation:a,isAiFiltering:r,handleNaturalLanguageQuery:u,clearAiFilter:c,cancelAiFilterRequest:p}=We(G=>({csvData:G.csvData,spreadsheetFilterFunction:G.spreadsheetFilterFunction,aiFilterExplanation:G.aiFilterExplanation,isAiFiltering:G.isAiFiltering,handleNaturalLanguageQuery:G.handleNaturalLanguageQuery,clearAiFilter:G.clearAiFilter,cancelAiFilterRequest:G.cancelAiFilterRequest})),g=()=>We.getState().setIsSpreadsheetVisible(!n),[m,v]=ge.useState(null),[_,T]=ge.useState(""),E=ge.useMemo(()=>(e==null?void 0:e.data.length)>0?Object.keys(e.data[0]):[],[e==null?void 0:e.data]),[w,x]=ge.useState({});ge.useEffect(()=>{if(!e)return;const G={};E.forEach(F=>{var z;const I=F.length*8+30,Q=String(((z=e.data[0])==null?void 0:z[F])||"").length*7;G[F]=Math.max(120,I,Q)}),x(G)},[E,e]);const N=G=>{let F="ascending";m&&m.key===G&&m.direction==="ascending"&&(F="descending"),v({key:G,direction:F})},k=(G,F)=>{F.preventDefault();const I=F.clientX,Q=w[G],z=X=>{const te=Q+(X.clientX-I);te>60&&x(Te=>({...Te,[G]:te}))},Z=()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",Z),document.body.style.cursor=""};document.body.style.cursor="col-resize",document.addEventListener("mousemove",z),document.addEventListener("mouseup",Z)},D=()=>{_.trim()&&u(_.trim())},U=G=>{G.key==="Enter"&&D()},L=ge.useMemo(()=>{if(!e)return[];let G=[...e.data];if(i)try{G=bE(G,i)}catch(F){console.error("AI filter execution failed:",F)}else if(_){const F=_.toLowerCase();G=G.filter(I=>Object.values(I).some(Q=>String(Q).toLowerCase().includes(F)))}return m!==null&&G.sort((F,I)=>{const Q=F[m.key],z=I[m.key];if(Q==null)return 1;if(z==null)return-1;const Z=typeof Q=="number"?Q:parseFloat(String(Q).replace(/[^0-9.-]+/g,"")),X=typeof z=="number"?z:parseFloat(String(z).replace(/[^0-9.-]+/g,""));if(!isNaN(Z)&&!isNaN(X))return m.direction==="ascending"?Z-X:X-Z;const te=String(Q).toLowerCase(),Te=String(z).toLowerCase();return te<Te?m.direction==="ascending"?-1:1:te>Te?m.direction==="ascending"?1:-1:0}),G},[e,m,_,i]);return e?C.jsxs("div",{id:"raw-data-explorer",className:"bg-white rounded-lg shadow-lg flex flex-col transition-all duration-300 border border-slate-200",children:[C.jsxs("button",{onClick:g,className:"flex justify-between items-center p-4 cursor-pointer w-full text-left rounded-t-lg hover:bg-slate-50","aria-expanded":n,children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Raw Data Explorer"}),C.jsxs("p",{className:"text-sm text-slate-500",children:["File: ",e.fileName]})]}),C.jsx(NI,{isOpen:n})]}),n&&C.jsxs("div",{className:"flex flex-col h-full p-4 pt-0",children:[C.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[C.jsxs("div",{className:"relative flex-grow",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(RI,{})}),C.jsx("input",{type:"text",placeholder:"Search table or ask AI (e.g., 'show rows where column_3 > 100')",value:_,onChange:G=>T(G.target.value),onKeyDown:U,className:"bg-white border border-slate-300 rounded-md py-1.5 pl-10 pr-4 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-blue-500 w-full"})]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsxs("button",{onClick:D,disabled:r||!_.trim(),className:"flex items-center space-x-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",title:"Use AI to filter data based on your query",children:[r?C.jsx(DI,{}):C.jsx(MI,{}),C.jsx("span",{children:r?"Working":"Ask AI"})]}),r&&C.jsx("button",{type:"button",onClick:p,className:"px-3 py-1.5 border border-slate-300 rounded-md text-slate-600 hover:bg-slate-100 transition-colors",children:"Cancel"})]})]}),a&&C.jsxs("div",{className:"bg-blue-50 text-blue-800 border border-blue-200 rounded-md p-2 text-sm flex justify-between items-center mb-2",children:[C.jsxs("p",{children:[C.jsx("span",{className:"font-semibold",children:"AI Filter:"})," ",a]}),C.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-blue-200",title:"Clear AI filter",children:C.jsx(II,{})})]}),C.jsx("div",{className:"flex-grow overflow-auto border border-slate-200 rounded-md",style:{maxHeight:"60vh"},children:C.jsx(wI,{data:L,sortConfig:m,onSort:N,columnWidths:w,onColumnResizeStart:k})})]})]}):null},UI=({isOpen:n})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 transform transition-transform duration-200 ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),LI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),kI=({isVisible:n})=>{const{plan:e,originalSample:i,transformedSample:a}=We(u=>{var c;return{plan:u.dataPreparationPlan,originalSample:u.initialDataSample,transformedSample:((c=u.csvData)==null?void 0:c.data.slice(0,20))||[]}}),r=()=>We.getState().setIsDataPrepDebugVisible(!n);return!e||!i?null:C.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex flex-col transition-all duration-300 border border-slate-200",children:[C.jsxs("button",{onClick:r,className:"flex justify-between items-center p-4 cursor-pointer w-full text-left rounded-t-lg hover:bg-slate-50","aria-expanded":n,children:[C.jsxs("div",{children:[C.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center",children:[C.jsx(LI,{})," AI Data Transformation Log"]}),C.jsx("p",{className:"text-sm text-slate-500",children:"See how the AI cleaned and reshaped your data."})]}),C.jsx(UI,{isOpen:n})]}),n&&C.jsxs("div",{className:"p-4 pt-0 space-y-6",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"AI's Plan"}),C.jsxs("p",{className:"text-sm bg-slate-50 p-3 rounded-md border border-slate-200 text-slate-700 italic",children:['"',e.explanation,'"']})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Transformation Code"}),C.jsx("pre",{className:"bg-slate-900 text-slate-100 p-3 rounded-md text-xs overflow-x-auto",children:C.jsx("code",{children:`// AI-generated function to transform data
function transform(data, _util) {
${e.jsFunctionBody}
}`})})]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Data Before (Raw Sample)"}),C.jsx("div",{className:"max-h-64 overflow-y-auto border border-slate-200 rounded-md",children:C.jsx(rl,{data:i})})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Data After (Transformed Sample)"}),C.jsx("div",{className:"max-h-64 overflow-y-auto border border-slate-200 rounded-md",children:C.jsx(rl,{data:a})})]})]})]})]})},qI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),BI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),VI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2-2z"})}),OI=()=>{const{onNewSession:n,onOpenHistory:e,isAsideVisible:i,onShowAssistant:a}=We(r=>({onNewSession:r.handleNewSession,onOpenHistory:()=>{r.loadReportsList(),r.setIsHistoryPanelOpen(!0)},isAsideVisible:r.isAsideVisible,onShowAssistant:()=>r.setIsAsideVisible(!0)}));return C.jsxs("header",{className:"mb-6 flex justify-between items-start flex-shrink-0",children:[C.jsx("div",{className:"max-w-xs",children:C.jsx("h1",{className:"text-xl font-extrabold text-slate-900 leading-tight",children:"CSV Data Analysis Agent"})}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",title:"Start a new analysis session",children:[C.jsx(VI,{}),C.jsx("span",{className:"hidden sm:inline",children:"New"})]}),C.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-md hover:bg-slate-100 transition-colors",title:"View analysis history",children:[C.jsx(BI,{}),C.jsx("span",{className:"hidden sm:inline",children:"History"})]}),!i&&C.jsx("button",{onClick:a,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors","aria-label":"Show Assistant Panel",title:"Show Assistant Panel",children:C.jsx(qI,{})})]})]})},HI=()=>C.jsxs("svg",{className:"h-4 w-4 text-blue-600 animate-spin",viewBox:"0 0 24 24",fill:"none",role:"status","aria-label":"Loading",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),GI=()=>{const{isBusy:n,busyMessage:e,canCancelBusy:i,requestBusyCancel:a,isCancellationRequested:r}=We(u=>({isBusy:u.isBusy,busyMessage:u.busyMessage,canCancelBusy:u.canCancelBusy,requestBusyCancel:u.requestBusyCancel,isCancellationRequested:u.isCancellationRequested}));return n?C.jsxs("div",{className:"mb-4 rounded-lg border border-blue-200 bg-blue-50 px-4 py-3 shadow-sm flex flex-col gap-2 md:flex-row md:items-center md:justify-between",role:"status","aria-live":"polite",children:[C.jsxs("div",{className:"flex items-center gap-3 text-blue-900",children:[C.jsx(HI,{}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm font-semibold",children:e||"Running your request"}),r&&C.jsx("p",{className:"text-xs text-blue-700",children:"Cancelling wrapping up safely."})]})]}),i&&C.jsx("button",{type:"button",onClick:a,disabled:r,className:"text-sm font-semibold rounded-md border border-blue-300 px-3 py-1.5 text-blue-700 hover:bg-blue-100 disabled:opacity-60 disabled:cursor-not-allowed",children:r?"Cancelling":"Cancel"})]}):null},FI={info:"bg-slate-800 text-white",success:"bg-emerald-600 text-white",error:"bg-red-600 text-white"},zI=()=>{const{toasts:n,dismissToast:e}=We(i=>({toasts:i.toasts,dismissToast:i.dismissToast}));return n.length===0?null:C.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 max-w-sm",children:n.map(i=>C.jsxs("div",{className:`flex items-start justify-between rounded-lg shadow-lg px-4 py-3 text-sm ${FI[i.type]}`,children:[C.jsx("p",{className:"pr-4",children:i.message}),C.jsx("button",{onClick:()=>e(i.id),className:"text-white/70 hover:text-white text-lg leading-none","aria-label":"Dismiss notification",children:""})]},i.id))})},YI=()=>{const{init:n,currentView:e,csvData:i,isAsideVisible:a,asideWidth:r,isResizing:u,handleAsideMouseDown:c,isDataPrepDebugVisible:p,isSpreadsheetVisible:g,dataPreparationPlan:m,initialDataSample:v}=We(E=>({init:E.init,currentView:E.currentView,csvData:E.csvData,isAsideVisible:E.isAsideVisible,asideWidth:E.asideWidth,isResizing:E.isResizing,handleAsideMouseDown:E.handleAsideMouseDown,isDataPrepDebugVisible:E.isDataPrepDebugVisible,isSpreadsheetVisible:E.isSpreadsheetVisible,dataPreparationPlan:E.dataPreparationPlan,initialDataSample:E.initialDataSample})),_=We(E=>E.setIsAsideVisible);ge.useEffect(()=>{n()},[n]);const T=()=>e==="file_upload"||!i?C.jsx("div",{className:"flex-grow min-h-0",children:C.jsx(gI,{})}):C.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto",children:[C.jsx(uI,{}),m&&m.jsFunctionBody&&v&&C.jsx("div",{className:"mt-8",children:C.jsx(kI,{isVisible:p})}),C.jsx("div",{className:"mt-8",children:C.jsx(PI,{isVisible:g})})]});return C.jsxs("div",{className:"flex flex-col md:flex-row h-screen bg-slate-50 text-slate-800 font-sans",children:[C.jsx(vI,{}),C.jsx(TI,{}),C.jsx(xI,{}),C.jsx(zI,{}),C.jsxs("main",{className:"flex-1 overflow-hidden p-4 flex flex-col",children:[C.jsx(OI,{}),C.jsx(GI,{}),T()]}),a&&C.jsxs(C.Fragment,{children:[C.jsx("div",{onMouseDown:c,onDoubleClick:()=>_(!1),className:"hidden md:flex group items-center justify-center w-2.5 cursor-col-resize",title:"Drag to resize, double-click to hide",children:C.jsx("div",{className:`w-0.5 h-8 bg-slate-300 rounded-full transition-colors duration-200 group-hover:bg-brand-secondary ${u?"!bg-blue-600":""}`})}),C.jsx("aside",{className:"w-full md:w-auto bg-white flex flex-col h-full border-l border-slate-200",style:{width:r},children:C.jsx(pI,{})})]})]})},IS=document.getElementById("root");if(!IS)throw new Error("Could not find root element to mount to");const JI=dE.createRoot(IS);JI.render(C.jsx(bv.StrictMode,{children:C.jsx(YI,{})}));
